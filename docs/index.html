<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" /><meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Welcome to WSE_FE’s Documentation! &mdash; WSE_FE 0.0.1 documentation</title>
      <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
      <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  <!--[if lt IE 9]>
    <script src="_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script data-url_root="./" id="documentation_options" src="_static/documentation_options.js"></script>
        <script src="_static/jquery.js"></script>
        <script src="_static/underscore.js"></script>
        <script src="_static/doctools.js"></script>
        <script async="async" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
    <script src="_static/js/theme.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
            <a href="#" class="icon icon-home"> WSE_FE
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <!-- Local TOC -->
              <div class="local-toc"><ul>
<li><a class="reference internal" href="#">Welcome to WSE_FE’s Documentation!</a></li>
<li><a class="reference internal" href="#obtaining-the-code">Obtaining the Code</a></li>
<li><a class="reference internal" href="#license">License</a></li>
<li><a class="reference internal" href="#simple-diffusion-example">Simple Diffusion Example</a><ul>
<li><a class="reference internal" href="#solving-explicitly">Solving Explicitly</a></li>
<li><a class="reference internal" href="#solving-implicitly">Solving Implicitly</a></li>
</ul>
</li>
<li><a class="reference internal" href="#command-line-arguments">Command Line Arguments</a><ul>
<li><a class="reference internal" href="#running-scripts-for-development">Running Scripts for Development</a></li>
<li><a class="reference internal" href="#debugging">Debugging</a></li>
<li><a class="reference internal" href="#compiling-for-hardware">Compiling for Hardware</a></li>
</ul>
</li>
<li><a class="reference internal" href="#wse-interface-module">WSE Interface Module</a><ul>
<li><a class="reference internal" href="#module-WSE_FE.WSE_Interface">Classes and Methods</a></li>
</ul>
</li>
<li><a class="reference internal" href="#wse-array-module">WSE Array Module</a><ul>
<li><a class="reference internal" href="#id5">Classes and Methods</a></li>
</ul>
</li>
<li><a class="reference internal" href="#wse-scalar-module">WSE Scalar Module</a><ul>
<li><a class="reference internal" href="#id6">Classes and Methods</a></li>
</ul>
</li>
<li><a class="reference internal" href="#wse-solver-module">WSE Solver Module</a><ul>
<li><a class="reference internal" href="#id7">Classes and Methods</a></li>
</ul>
</li>
<li><a class="reference internal" href="#custom-ide-with-synax-highlighting">Custom IDE With Synax Highlighting</a></li>
</ul>
</div>
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="#">WSE_FE</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="#" class="icon icon-home"></a> &raquo;</li>
      <li>Welcome to WSE_FE’s Documentation!</li>
      <li class="wy-breadcrumbs-aside">
            <a href="_sources/index.rst.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <div class="toctree-wrapper compound">
</div>
<section id="welcome-to-wse-fe-s-documentation">
<h1>Welcome to WSE_FE’s Documentation!<a class="headerlink" href="#welcome-to-wse-fe-s-documentation" title="Permalink to this headline"></a></h1>
<p>This package is a product of the <a class="reference external" href="http://www.netl.doe.gov">National Energy Technology Laboratory</a> (NETL)
in collaboration with <a class="reference external" href="https://cerebras.net/">Cerebras Systems Inc</a>.</p>
<p>Field equations have two properties:</p>
<ol class="arabic simple">
<li><p>They have a value or set of values at every point in space time</p></li>
<li><p>Changes to the values are only affected by the immediate surroundings (the Principle of Locality in physics)</p></li>
</ol>
<p>This gives rise to several sets of common differential equations that describe
almost every physical phenomenon in nature at the finest space-time scales.
The only known exception to this fundamental principle appears to be quantum
entanglement which seems to have the property of instantaneous information
transfer.  Every other phenomenon propagates through space-time with a transfer
rate lower than or equal to the speed of light.  Field equations are even fundamental
to our understanding of the quantum realm at Plank scales.  Field equations
can be used to describe systems of objects which exhibit discrete behavior at
intermediate scales. Due to the law of averages, ensembles of discrete objects can take
on the character of a field equation at scales that are many times larger than the
discrete objects (although even “discrete” objects are described as
fields on the finest scales).  This allows sets of field equations to adequately
and accurately describe the behavior of fluids, star/galaxy clusters, and granular
solids under limited circumstances. If a physical system can be written with ODE/PDE
expressions at the scales of interest, it is possible to approximate them on a computer
through discretization.</p>
<p>It should come as no surprise that an Application Specific Integrated Circuit (ASIC) can be
many orders of magnitude faster and more efficient than general purpose computing hardware.
To the best of our knowledge, no one has endeavored to create an ASIC for field equation modeling.
However, recent developments in Artificial Intelligence (AI) ASICS are producing hardware that happens
to also be very good at field equation modeling, as is the case with the Cerebras Wafer Scale
Engine.  The architecture allows definition of discretized values, distributed evenly across the
processor array and mirrors the physical Principle of Locality in that it allows for the nearest
neighbors to affect a local change in a minimum of clock cycles (on average 1-2 cycles).
While the WSE architecture was not developed as an ASIC for field equations, the same properties
that make it so efficient for training large AI models (ie: data flow based matrix multiplications)
end up making it efficient for solving field equations with large numbers of voxels or cells.</p>
</section>
<section id="obtaining-the-code">
<h1>Obtaining the Code<a class="headerlink" href="#obtaining-the-code" title="Permalink to this headline"></a></h1>
<p>This github repository contains documentation only.  The full code repository is available <a class="reference external" href="https://mfix.netl.doe.gov/gitlab/tjordan/cerebrasdev/-/tree/master/WSE_Field_Equation">here</a>.
To abtain access to the code, register on the <a class="reference external" href="https://mfix.netl.doe.gov/register">MFiX website</a>
contact Dirk Van Essendelft at <a class="reference external" href="mailto:drik&#46;vanessendelft&#37;&#52;&#48;netl&#46;doe&#46;gov">drik<span>&#46;</span>vanessendelft<span>&#64;</span>netl<span>&#46;</span>doe<span>&#46;</span>gov</a> to be added to the privet
gitlab repository.  This process has been adopted until NETL makes a determination
about the export control nature of this work.</p>
<p>One will also need to contact Cerebras to obtain the proprietary compilers.
A procedure for obtaining these compilers is underway.  For the time being,
NETL will make introductions to Cerebras for interested parties.</p>
</section>
<section id="license">
<h1>License<a class="headerlink" href="#license" title="Permalink to this headline"></a></h1>
<p>This work is a product of the Federal Government.  As of now, it is covered
under a <a class="reference external" href="https://creativecommons.org/share-your-work/public-domain/cc0/">CC0 License</a> until
applications for a different copyright and license structure are adopted.</p>
</section>
<section id="simple-diffusion-example">
<h1>Simple Diffusion Example<a class="headerlink" href="#simple-diffusion-example" title="Permalink to this headline"></a></h1>
<p>This package is designed to allow practitioners to easily program the Wafer Scale Engine to
solve Field Equations at an exceptionally rapid pace with high energy efficiency.  This equation
can be solved both explicitly and implicitly with linear discretization to second order accuracy. The
WSE_FE package is capable of solving both explicit and implicit formulations.</p>
<p>The governing equation for diffusion without convection takes a simple Laplacian form and is one of the
most common field equations that relates the time rate of change of a scalar field to its spatial distribution,
known as Fick’s second law.  Here, <span class="math notranslate nohighlight">\(\alpha\)</span> is the conductivity.</p>
<div class="math notranslate nohighlight">
\[\frac{\partial T}{\partial t} =  \alpha \nabla^2 T = \alpha \left(\frac{\partial^2 T}{\partial x^2} + \frac{\partial^2 T}{\partial y^2} + \frac{\partial^2 T}{\partial z^2}\right)\]</div>
<section id="solving-explicitly">
<h2>Solving Explicitly<a class="headerlink" href="#solving-explicitly" title="Permalink to this headline"></a></h2>
<p>With explicit linear discretization on a cartesian, uniform grid, the diffusion equation simplifies to:</p>
<div class="math notranslate nohighlight">
\[T_i^{n+1} = c\left(T_E^n + T_W^n + T_N^n + T_S^n + T_T^n + T_B^n \right) + \left( 1 - 6c\right) T_i^n\]</div>
<div class="math notranslate nohighlight">
\[c = \frac{\alpha \left(\Delta t \right)}{\left(\Delta l \right)^2}\]</div>
<p>The equations will remain stable when:</p>
<div class="math notranslate nohighlight">
\[3c &lt; 0.5\]</div>
<p>From the stability criteria, it is clear that the allowable time step is proportional
to the square of the voxel length scale and inversely proportional to the conductivity.
Explicit solutions are very useful for large voxel size problems and/or those with
low conductivity.  Common applications for explicit solutions are weather and reservoir
modeling where voxel sizes are large and conductivity is low.</p>
<p>The following code shows how to solve a generic diffusion equation explicitly in the
WSE_FE API.</p>
<p>file name: rectancular_diffusion_explicit.py</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">WSE_FE.WSE_Interface</span> <span class="kn">import</span> <span class="n">WSE_Interface</span>
<span class="kn">from</span> <span class="nn">WSE_FE.WSE_Array</span> <span class="kn">import</span> <span class="n">WSE_Array</span>
<span class="kn">import</span> <span class="nn">NumPy</span> <span class="k">as</span> <span class="nn">np</span>

<span class="n">wse</span> <span class="o">=</span> <span class="n">WSE_Interface</span><span class="p">()</span>
<span class="n">parser</span> <span class="o">=</span> <span class="n">wse</span><span class="o">.</span><span class="n">get_cmd_line_parser</span><span class="p">()</span>

<span class="c1"># Define constansts</span>
<span class="n">c</span> <span class="o">=</span> <span class="mf">0.1</span>
<span class="n">center</span> <span class="o">=</span> <span class="mf">1.0</span> <span class="o">-</span> <span class="mf">6.0</span> <span class="o">*</span> <span class="n">c</span>

<span class="c1"># Add CFD specific command line arguments</span>
<span class="n">parser</span><span class="o">.</span><span class="n">add_argument</span><span class="p">(</span><span class="s2">&quot;-x&quot;</span><span class="p">,</span><span class="s2">&quot;--x&quot;</span><span class="p">,</span> <span class="n">help</span><span class="o">=</span><span class="s2">&quot;specify x dimension&quot;</span><span class="p">,</span> <span class="nb">type</span><span class="o">=</span><span class="nb">int</span><span class="p">,</span> <span class="n">default</span><span class="o">=</span><span class="mi">10</span><span class="p">)</span>
<span class="n">parser</span><span class="o">.</span><span class="n">add_argument</span><span class="p">(</span><span class="s2">&quot;-y&quot;</span><span class="p">,</span><span class="s2">&quot;--y&quot;</span><span class="p">,</span> <span class="n">help</span><span class="o">=</span><span class="s2">&quot;specify y dimension&quot;</span><span class="p">,</span> <span class="nb">type</span><span class="o">=</span><span class="nb">int</span><span class="p">,</span> <span class="n">default</span><span class="o">=</span><span class="mi">10</span><span class="p">)</span>
<span class="n">parser</span><span class="o">.</span><span class="n">add_argument</span><span class="p">(</span><span class="s2">&quot;-z&quot;</span><span class="p">,</span> <span class="s2">&quot;--z&quot;</span><span class="p">,</span> <span class="n">help</span><span class="o">=</span><span class="s2">&quot;specify z dimension&quot;</span><span class="p">,</span> <span class="nb">type</span><span class="o">=</span><span class="nb">int</span><span class="p">,</span> <span class="n">default</span><span class="o">=</span><span class="mi">10</span><span class="p">)</span>
<span class="n">parser</span><span class="o">.</span><span class="n">add_argument</span><span class="p">(</span><span class="s2">&quot;-ts&quot;</span><span class="p">,</span><span class="s2">&quot;--time_steps&quot;</span><span class="p">,</span> <span class="n">help</span><span class="o">=</span><span class="s2">&quot;specify number of time steps&quot;</span><span class="p">,</span> <span class="nb">type</span><span class="o">=</span><span class="nb">int</span><span class="p">,</span> <span class="n">default</span><span class="o">=</span><span class="mi">5</span><span class="p">)</span>
<span class="n">args</span> <span class="o">=</span> <span class="n">wse</span><span class="o">.</span><span class="n">get_available_cmd_args</span><span class="p">()</span>


<span class="c1"># Create the initial Temperature field</span>
<span class="n">T_init</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">ones</span><span class="p">((</span><span class="n">args</span><span class="o">.</span><span class="n">x</span><span class="p">,</span><span class="n">args</span><span class="o">.</span><span class="n">y</span><span class="p">,</span><span class="n">args</span><span class="o">.</span><span class="n">z</span><span class="p">))</span>

<span class="c1">#Set Boundary Conditions</span>
<span class="n">T_init</span><span class="p">[</span><span class="mi">1</span><span class="p">:</span><span class="o">-</span><span class="mi">1</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">:</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span> <span class="o">=</span> <span class="mf">1.0</span>
<span class="n">T_init</span><span class="p">[</span><span class="mi">1</span><span class="p">:</span><span class="o">-</span><span class="mi">1</span><span class="p">,</span><span class="o">-</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">:</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span> <span class="o">=</span> <span class="mf">1.0</span>
<span class="n">T_init</span><span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">:</span><span class="o">-</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">:</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span> <span class="o">=</span> <span class="mf">1.0</span>
<span class="n">T_init</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">:</span><span class="o">-</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">:</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span> <span class="o">=</span> <span class="mf">1.0</span>
<span class="n">T_init</span><span class="p">[</span><span class="mi">1</span><span class="p">:</span><span class="o">-</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">:</span><span class="o">-</span><span class="mi">1</span><span class="p">,</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="mf">0.0</span>
<span class="n">T_init</span><span class="p">[</span><span class="mi">1</span><span class="p">:</span><span class="o">-</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">:</span><span class="o">-</span><span class="mi">1</span><span class="p">,</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span> <span class="o">=</span> <span class="mf">0.0</span>

<span class="c1"># Instantiate the WSE Array objects needed</span>
<span class="n">T_n</span> <span class="o">=</span> <span class="n">WSE_Array</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s1">&#39;T_n&#39;</span><span class="p">,</span> <span class="n">initData</span><span class="o">=</span><span class="n">T_init</span><span class="p">)</span>

<span class="c1"># Start looping over time</span>
<span class="n">wse</span><span class="o">.</span><span class="n">for_loop_start</span><span class="p">(</span><span class="s1">&#39;time_loop&#39;</span><span class="p">,</span> <span class="n">args</span><span class="o">.</span><span class="n">time_steps</span><span class="p">)</span>

<span class="c1"># Update T from current values</span>
<span class="n">T_n</span><span class="p">[</span><span class="mi">1</span><span class="p">:</span><span class="o">-</span><span class="mi">1</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="n">center</span> <span class="o">*</span> <span class="n">T_n</span><span class="p">[</span><span class="mi">1</span><span class="p">:</span><span class="o">-</span><span class="mi">1</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">]</span>\
                <span class="o">+</span> <span class="n">c</span><span class="o">*</span><span class="p">(</span><span class="n">T_n</span><span class="p">[</span><span class="mi">2</span><span class="p">:,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">]</span> <span class="o">+</span> <span class="n">T_n</span><span class="p">[:</span><span class="o">-</span><span class="mi">2</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">]</span> \
                   <span class="o">+</span> <span class="n">T_n</span><span class="p">[</span><span class="mi">1</span><span class="p">:</span><span class="o">-</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">0</span><span class="p">]</span> <span class="o">+</span> <span class="n">T_n</span><span class="p">[</span><span class="mi">1</span><span class="p">:</span><span class="o">-</span><span class="mi">1</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span> \
                   <span class="o">+</span> <span class="n">T_n</span><span class="p">[</span><span class="mi">1</span><span class="p">:</span><span class="o">-</span><span class="mi">1</span><span class="p">,</span><span class="o">-</span><span class="mi">1</span><span class="p">,</span><span class="mi">0</span><span class="p">]</span> <span class="o">+</span> <span class="n">T_n</span><span class="p">[</span><span class="mi">1</span><span class="p">:</span><span class="o">-</span><span class="mi">1</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">])</span>

<span class="n">wse</span><span class="o">.</span><span class="n">for_loop_end</span><span class="p">(</span><span class="s1">&#39;time_loop&#39;</span><span class="p">)</span>

<span class="c1"># Compile, run, and validate</span>
<span class="n">wse</span><span class="o">.</span><span class="n">make_WSE</span><span class="p">(</span><span class="n">answer</span><span class="o">=</span><span class="n">T_n</span><span class="p">)</span>
</pre></div>
</div>
<p>From the command line run:</p>
<div class="highlight-consol notranslate"><div class="highlight"><pre><span></span>$ python rectancular_diffusion_explicit.py
</pre></div>
</div>
<p>And it will produce an output similar to:</p>
<div class="highlight-consol notranslate"><div class="highlight"><pre><span></span>********************* Starting Make ***********************
********************* Writing binary input files ***********************
    Total vectors to write:  3
    Total Data to Write (MB):  0.012
    Total T_bin to Write (MB):  0.00768
**************** Done writing binary input files ***********************
********************* Started Host Validation ***********************
********************* Done Host Validation ***********************
********************* Running Cerebras Tools ***********************
examples                :  0:01.42 PASS smoke [ H=4 W=4 D=100 NC=8 NArgs=6 COMPILER=angler ]
********************* Finished Running Cerebras Tools ***********************
********************* Done Make ***********************
</pre></div>
</div>
</section>
<section id="solving-implicitly">
<h2>Solving Implicitly<a class="headerlink" href="#solving-implicitly" title="Permalink to this headline"></a></h2>
<p>Implicit methods can allow for larger time steps.  The fully implicit formulation with linear discretization
and a uniform grid simplified to:</p>
<div class="math notranslate nohighlight">
\[T_i^{n+1} - \frac{c}{1+6c} \left(T_E^{n+1} + T_W^{n+1} + T_N^{n+1} + T_S^{n+1} + T_T^{n+1} + T_B^{n+1} \right) = \frac{1.0}{\left( 1 - 6c\right)} T_i^n\]</div>
<p>The convergence criteria for an implicit method is diagonal dominance.  In this case: <span class="math notranslate nohighlight">\(1 \geq \frac{6c}{1+6c}\)</span>
which is always met.  This equation will converge, even if slowly, regardless of the conductivity or cell length scale.</p>
<p>The following code shows how to solve a generic diffusion equation implicitly in the
WSE_FE API.</p>
<p>file name: rectancular_diffusion.py</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">WSE_FE.WSE_Interface</span> <span class="kn">import</span> <span class="n">WSE_Interface</span>
<span class="kn">from</span> <span class="nn">WSE_FE.WSE_Array</span> <span class="kn">import</span> <span class="n">WSE_Array</span>

<span class="kn">from</span> <span class="nn">WSE_FE.WSE_Solver</span> <span class="kn">import</span> <span class="n">CgConstantOffDiag</span><span class="p">,</span> <span class="n">JacobiConstantOffDiag</span>
<span class="kn">import</span> <span class="nn">NumPy</span> <span class="k">as</span> <span class="nn">np</span>

<span class="n">wse</span> <span class="o">=</span> <span class="n">WSE_Interface</span><span class="p">()</span>
<span class="n">parser</span> <span class="o">=</span> <span class="n">wse</span><span class="o">.</span><span class="n">get_cmd_line_parser</span><span class="p">()</span>

<span class="n">c</span> <span class="o">=</span> <span class="mf">0.1</span>
<span class="n">off_diag_coeff</span> <span class="o">=</span> <span class="o">-</span><span class="n">c</span><span class="o">/</span><span class="p">(</span><span class="mf">1.0</span><span class="o">+</span><span class="mf">6.0</span><span class="o">*</span><span class="n">c</span><span class="p">)</span>
<span class="n">source_center_coeff</span> <span class="o">=</span> <span class="mf">1.0</span><span class="o">/</span><span class="p">(</span><span class="mf">1.0</span><span class="o">+</span><span class="mf">6.0</span><span class="o">*</span><span class="n">c</span><span class="p">)</span>

<span class="c1">#Add CFD Specific command line arguments</span>
<span class="n">parser</span><span class="o">.</span><span class="n">add_argument</span><span class="p">(</span><span class="s2">&quot;-x&quot;</span><span class="p">,</span><span class="s2">&quot;--x&quot;</span><span class="p">,</span> <span class="n">help</span><span class="o">=</span><span class="s2">&quot;specify x dimension&quot;</span><span class="p">,</span> <span class="nb">type</span><span class="o">=</span><span class="nb">int</span><span class="p">,</span> <span class="n">default</span><span class="o">=</span><span class="mi">10</span><span class="p">)</span>
<span class="n">parser</span><span class="o">.</span><span class="n">add_argument</span><span class="p">(</span><span class="s2">&quot;-y&quot;</span><span class="p">,</span><span class="s2">&quot;--y&quot;</span><span class="p">,</span> <span class="n">help</span><span class="o">=</span><span class="s2">&quot;specify y dimension&quot;</span><span class="p">,</span> <span class="nb">type</span><span class="o">=</span><span class="nb">int</span><span class="p">,</span> <span class="n">default</span><span class="o">=</span><span class="mi">10</span><span class="p">)</span>
<span class="n">parser</span><span class="o">.</span><span class="n">add_argument</span><span class="p">(</span><span class="s2">&quot;-z&quot;</span><span class="p">,</span> <span class="s2">&quot;--z&quot;</span><span class="p">,</span> <span class="n">help</span><span class="o">=</span><span class="s2">&quot;specify z dimension&quot;</span><span class="p">,</span> <span class="nb">type</span><span class="o">=</span><span class="nb">int</span><span class="p">,</span> <span class="n">default</span><span class="o">=</span><span class="mi">10</span><span class="p">)</span>
<span class="n">parser</span><span class="o">.</span><span class="n">add_argument</span><span class="p">(</span><span class="s2">&quot;-ts&quot;</span><span class="p">,</span><span class="s2">&quot;--time_steps&quot;</span><span class="p">,</span> <span class="n">help</span><span class="o">=</span><span class="s2">&quot;specify number of time steps&quot;</span><span class="p">,</span> <span class="nb">type</span><span class="o">=</span><span class="nb">int</span><span class="p">,</span> <span class="n">default</span><span class="o">=</span><span class="mi">5</span><span class="p">)</span>
<span class="n">parser</span><span class="o">.</span><span class="n">add_argument</span><span class="p">(</span><span class="s2">&quot;-s&quot;</span><span class="p">,</span><span class="s2">&quot;--solver&quot;</span><span class="p">,</span> <span class="n">help</span><span class="o">=</span><span class="s2">&quot;the solver to use (Cg or Jacobi with constant off diagonal)&quot;</span><span class="p">,</span> <span class="nb">type</span><span class="o">=</span><span class="nb">str</span><span class="p">,</span> <span class="n">default</span><span class="o">=</span><span class="s1">&#39;Cg&#39;</span><span class="p">)</span>
<span class="n">args</span> <span class="o">=</span> <span class="n">wse</span><span class="o">.</span><span class="n">get_available_cmd_args</span><span class="p">()</span>

<span class="k">if</span> <span class="n">args</span><span class="o">.</span><span class="n">solver</span> <span class="o">==</span> <span class="s1">&#39;Cg&#39;</span><span class="p">:</span>
    <span class="n">solver</span> <span class="o">=</span> <span class="n">CgConstantOffDiag</span><span class="p">(</span><span class="n">args</span><span class="o">.</span><span class="n">x</span><span class="p">,</span> <span class="n">args</span><span class="o">.</span><span class="n">y</span><span class="p">,</span> <span class="n">args</span><span class="o">.</span><span class="n">z</span><span class="p">)</span>
<span class="k">elif</span> <span class="n">args</span><span class="o">.</span><span class="n">solver</span> <span class="o">==</span> <span class="s1">&#39;Jacobi&#39;</span><span class="p">:</span>
    <span class="n">solver</span> <span class="o">=</span> <span class="n">JacobiConstantOffDiag</span><span class="p">(</span><span class="n">args</span><span class="o">.</span><span class="n">x</span><span class="p">,</span> <span class="n">args</span><span class="o">.</span><span class="n">y</span><span class="p">,</span> <span class="n">args</span><span class="o">.</span><span class="n">z</span><span class="p">)</span>

<span class="c1">#Create the initial Temperature field</span>
<span class="n">T_init</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">ones</span><span class="p">((</span><span class="n">args</span><span class="o">.</span><span class="n">x</span><span class="p">,</span><span class="n">args</span><span class="o">.</span><span class="n">y</span><span class="p">,</span><span class="n">args</span><span class="o">.</span><span class="n">z</span><span class="p">))</span>

<span class="n">T_init</span><span class="p">[</span><span class="mi">1</span><span class="p">:</span><span class="o">-</span><span class="mi">1</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">:</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span> <span class="o">=</span> <span class="mf">1.0</span>
<span class="n">T_init</span><span class="p">[</span><span class="mi">1</span><span class="p">:</span><span class="o">-</span><span class="mi">1</span><span class="p">,</span><span class="o">-</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">:</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span> <span class="o">=</span> <span class="mf">1.0</span>
<span class="n">T_init</span><span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">:</span><span class="o">-</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">:</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span> <span class="o">=</span> <span class="mf">1.0</span>
<span class="n">T_init</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">:</span><span class="o">-</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">:</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span> <span class="o">=</span> <span class="mf">1.0</span>
<span class="n">T_init</span><span class="p">[</span><span class="mi">1</span><span class="p">:</span><span class="o">-</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">:</span><span class="o">-</span><span class="mi">1</span><span class="p">,</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="mf">0.0</span>
<span class="n">T_init</span><span class="p">[</span><span class="mi">1</span><span class="p">:</span><span class="o">-</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">:</span><span class="o">-</span><span class="mi">1</span><span class="p">,</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span> <span class="o">=</span> <span class="mf">0.0</span>

<span class="c1">#Instantiate the WSE Array objects needed</span>
<span class="n">T_n</span> <span class="o">=</span> <span class="n">WSE_Array</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s1">&#39;T_n&#39;</span><span class="p">,</span> <span class="n">initData</span><span class="o">=</span><span class="n">T_init</span><span class="p">)</span>

<span class="k">if</span> <span class="n">args</span><span class="o">.</span><span class="n">solver</span> <span class="o">==</span> <span class="s1">&#39;Cg&#39;</span><span class="p">:</span>
    <span class="n">b</span> <span class="o">=</span> <span class="n">wse</span><span class="o">.</span><span class="n">get_named_array</span><span class="p">(</span><span class="s1">&#39;program_scratch_2&#39;</span><span class="p">)</span>
<span class="k">else</span><span class="p">:</span>
    <span class="n">b</span> <span class="o">=</span> <span class="n">WSE_Array</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s1">&#39;b&#39;</span><span class="p">,</span> <span class="n">initData</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">zeros</span><span class="p">((</span><span class="n">args</span><span class="o">.</span><span class="n">x</span><span class="p">,</span><span class="n">args</span><span class="o">.</span><span class="n">y</span><span class="p">,</span><span class="n">args</span><span class="o">.</span><span class="n">z</span><span class="p">)))</span>

<span class="n">wse</span><span class="o">.</span><span class="n">for_loop_start</span><span class="p">(</span><span class="s1">&#39;time_loop&#39;</span><span class="p">,</span> <span class="n">args</span><span class="o">.</span><span class="n">time_steps</span><span class="p">)</span>

<span class="c1"># calculate the source terms</span>
<span class="n">b</span><span class="p">[</span><span class="mi">1</span><span class="p">:</span><span class="o">-</span><span class="mi">1</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="n">source_center_coeff</span><span class="o">*</span><span class="n">T_n</span><span class="p">[</span><span class="mi">1</span><span class="p">:</span><span class="o">-</span><span class="mi">1</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">]</span>

<span class="c1"># run the generalized CG solver</span>
<span class="n">T_n</span> <span class="o">=</span> <span class="n">solver</span><span class="o">.</span><span class="n">solve</span><span class="p">(</span><span class="n">T_n</span><span class="p">,</span> <span class="n">off_diag_coeff</span><span class="p">,</span> <span class="n">b</span><span class="p">,</span> <span class="mf">0.001</span><span class="p">)</span>

<span class="n">wse</span><span class="o">.</span><span class="n">for_loop_end</span><span class="p">(</span><span class="s1">&#39;time_loop&#39;</span><span class="p">)</span>

<span class="n">wse</span><span class="o">.</span><span class="n">make_WSE</span><span class="p">(</span><span class="n">answer</span><span class="o">=</span><span class="n">T_n</span><span class="p">)</span>
</pre></div>
</div>
<p>From the command line run:</p>
<div class="highlight-consol notranslate"><div class="highlight"><pre><span></span>$ python rectancular_diffusion.py
</pre></div>
</div>
<p>And it will produce an ouput similar to:</p>
<div class="highlight-consol notranslate"><div class="highlight"><pre><span></span>********************* Starting Make ***********************
********************* Writing binary input files ***********************
    Total vectors to write:  6
    Total Data to Write (MB):  0.024
    Total T_bin to Write (MB):  0.01536
**************** Done writing binary input files ***********************
********************* Started Host Validation ***********************
********************* Done Host Validation ***********************
********************* Running Cerebras Tools ***********************
examples                :  0:03.71 PASS smoke [ H=4 W=4 D=100 NC=8 NArgs=6 COMPILER=angler ]
********************* Finished Running Cerebras Tools ***********************
********************* Done Make ***********************
</pre></div>
</div>
</section>
</section>
<section id="command-line-arguments">
<h1>Command Line Arguments<a class="headerlink" href="#command-line-arguments" title="Permalink to this headline"></a></h1>
<p>The WSE_FE API uses the argparse library to automatically add compiler options
to any script that calls the WSE_FE.WSE_Interface.WSE_Interface.make_WSE method.
This feature enables rapid development, supports debugging, and compiling larges
scale executables for hardware runs with just a few keystrokes.</p>
<p>Just add <cite>-h</cite> behind any python script with the make_WSE method called in it to
get a help menu.  It is possible to add domain specific command line arguments
to a program with the <cite>get_cmd_line_parser</cite> and <cite>get_available_cmd_args</cite> methods
as seen in the above examples.  Use the WSE_Interface.str_to_bool method in as the input to
the type keyword argument in the parser.add_argument method for boolean inputs.</p>
<p>The <cite>-h</cite> option will produce an output similar to:</p>
<div class="highlight-consol notranslate"><div class="highlight"><pre><span></span>usage: test_center_add.py [-h] [-dl DEBUG_LEVEL] [-lp LAUNCH_PORTRAIT]
              [-mg MAKE_GOAL] [-vr VERIFY_RESULT]
              [-ptv PRINT_TILE_VERIFICATION]
              [-hin HARDWARE_IMAGE_NAME]
              [-ast ANALYZE_SIMULATOR_TIMESTAMPS]
              [-hon HARDWARE_OUTPUT_NAME] [-to TIMEOUT]
              [-att ADD_TASK_TAGS] [-ts32 TIME_STAMPS_32BIT]
              [-ts16 TIME_STAMPS_16BIT] [-tsm TIME_STAMP_MODULO]
              [-ppc POWER_PERFORMANCE_COUNTER]
              [-dml DISPLAY_MAKE_LOG] [-x X] [-y Y] [-z Z]

Command Line Parser for WSE Interface

optional arguments:
  -h, --help            show this help message and exit
  -dl DEBUG_LEVEL, --debug_level DEBUG_LEVEL
                        Sets the level of debug. 0:off 1:create portrait files
                        2:JOB=-
  -lp LAUNCH_PORTRAIT, --launch_portrait LAUNCH_PORTRAIT
                        launches portrait
  -mg MAKE_GOAL, --make_goal MAKE_GOAL
                        specify make goal
  -vr VERIFY_RESULT, --verify_result VERIFY_RESULT
                        toggle verification of results through NumPy
  -ptv PRINT_TILE_VERIFICATION, --print_tile_verification PRINT_TILE_VERIFICATION
                        enables printing the memory space from the host durint
                        validation. Specify Tx.y where x and y are the tile
                        coordinates from paing
  -hin HARDWARE_IMAGE_NAME, --hardware_image_name HARDWARE_IMAGE_NAME
                        specifying a name creates files for a hardware run
  -ast ANALYZE_SIMULATOR_TIMESTAMPS, --analyze_simulator_timestamps ANALYZE_SIMULATOR_TIMESTAMPS
                        turns on analysis of time stamps from Simfabric
  -hon HARDWARE_OUTPUT_NAME, --hardware_output_name HARDWARE_OUTPUT_NAME
                        specifying on output image name turns on hardware
                        analysis
  -to TIMEOUT, --timeout TIMEOUT
                        specifies the allowable time for a Simfabric run
  -att ADD_TASK_TAGS, --add_task_tags ADD_TASK_TAGS
                        compiles task tags into ag files for debugging
  -ts32 TIME_STAMPS_32BIT, --time_stamps_32bit TIME_STAMPS_32BIT
                        set time stamps to 32 bit recording
  -ts16 TIME_STAMPS_16BIT, --time_stamps_16bit TIME_STAMPS_16BIT
                        set time stamps to 16 bit recording
  -tsm TIME_STAMP_MODULO, --time_stamp_modulo TIME_STAMP_MODULO
                        specify the frequency of recording time stamps
  -ppc POWER_PERFORMANCE_COUNTER, --power_performance_counter POWER_PERFORMANCE_COUNTER
                        turns on power performance counter recording
  -dml DISPLAY_MAKE_LOG, --display_make_log DISPLAY_MAKE_LOG
                        displays make log from wse make
  -x X, --x X           specify x dimension
  -y Y, --y Y           specify y dimension
  -z Z, --z Z           specify z dimension
</pre></div>
</div>
<section id="running-scripts-for-development">
<h2>Running Scripts for Development<a class="headerlink" href="#running-scripts-for-development" title="Permalink to this headline"></a></h2>
<p>Running the script without any command line options will cause the API to create the
<a href="#id1"><span class="problematic" id="id2">*</span></a>.ag, <a href="#id3"><span class="problematic" id="id4">*</span></a>.paint, and Makefile, compile the code into a binary, run the
hardware simulator (Simfabric) and compare the output to a NumPy based
validation code within the API.  The correct result is specified in
make_wse through the <cite>answer</cite> keyword argument.</p>
<p>This configuration is a great way to debug the code during development.
It is not recommended that the problem size be very large if run in this mode.
Simfabric is very useful, but it is not very fast and can consume considerable
memory if the problem size is set to a large size.</p>
<p>If the code ran successfully and produced the same answer as the validation code it will produce an output
similar to:</p>
<div class="highlight-consol notranslate"><div class="highlight"><pre><span></span>********************* Starting Make ***********************
********************* Writing binary input files ***********************
    Total vectors to write:  6
    Total Data to Write (MB):  0.024
    Total T_bin to Write (MB):  0.01536
**************** Done writing binary input files ***********************
********************* Started Host Validation ***********************
********************* Done Host Validation ***********************
********************* Running Cerebras Tools ***********************
examples                :  0:03.71 PASS smoke [ H=4 W=4 D=100 NC=8 NArgs=6 COMPILER=angler ]
********************* Finished Running Cerebras Tools ***********************
********************* Done Make ***********************
</pre></div>
</div>
<p>The PASS indicates that Simfabric ran and the validation/Simfabric output provided in <cite>answer</cite> were identical.</p>
</section>
<section id="debugging">
<h2>Debugging<a class="headerlink" href="#debugging" title="Permalink to this headline"></a></h2>
<p>The following command line set is quite useful.  The <cite>-ptv T4.5</cite> option causes the validation
code to print out the source and destination memory space for the tile at coordinates of  (4,5)
in validation.txt for every operation.  This can then be compared to the Cerebras
debug tool, Portrait, for each operation to debug the code.  The -dl 1 option launches
the portrait sever which can be connected to in a browser at <cite>http://localhost:8080/paint.html</cite></p>
<div class="highlight-consol notranslate"><div class="highlight"><pre><span></span>$ python test_add.py -ptv T4.5 -dl 1
</pre></div>
</div>
<p>Setting debug_level to 2 is eqivalent to setting <cite>GOAL=debug JOB=-</cite> flags in the Cerebras make process.
This will cause Simfabric to dump out detailed log files and launch the Portrait server.  It will
also ignore any tests and force a pass to allow portrait to launch even if a fatal condition was
detected in the Simfabric run.  This is useful when debugging failing microcode.</p>
<p>Setting debug_level to 1 or 2 will also turn on more printing to screen for the API</p>
</section>
<section id="compiling-for-hardware">
<h2>Compiling for Hardware<a class="headerlink" href="#compiling-for-hardware" title="Permalink to this headline"></a></h2>
<p>It is not recommended to run the validation or Simfabric for large scale runs.  Running either the NumPy
validation and/or Simfabric at the maximum scales that the WSE can run can take many days to
complete on a single node.  It is thus recommended that development be done on the smallest size problem
that is still meaningful and that it then be scaled up for a hardware run and all validation be turned off.</p>
<p>This can be easily done through the command line as follows</p>
<div class="highlight-consol notranslate"><div class="highlight"><pre><span></span>$ python rectangular_diffusion.py -x 800 -y 1000 -z 2000 -vr 0 -mg bench.img -hin full_scale_implicit_diffusion
</pre></div>
</div>
<p>If the code contains any timers, they can be turned on with the <cite>-ts16</cite> or <cite>-ts32</cite> arguments</p>
</section>
</section>
<section id="wse-interface-module">
<h1>WSE Interface Module<a class="headerlink" href="#wse-interface-module" title="Permalink to this headline"></a></h1>
<p>The WSE Inference Module is a singleton class which is enstantiated in every
other class within the WSE_Package.  It was created this way to provide flexibility
to users and to maintain key program sequences and memory wherever it is used.
The WSE provides several key feauteres to the API:</p>
<ol class="arabic simple">
<li><p>Maintains program sequences</p></li>
<li><p>Handles memory spaces with no need for user input</p></li>
<li><p>Handles controller specific operations as well as global operations (Looping, conditionals, global reductions, controller arithmetic)</p></li>
<li><p>Handles code optimization</p></li>
<li><p>Enables compiler directives</p></li>
<li><p>Compiles into WSE images and maps</p></li>
<li><p>Handles validation in NumPy</p></li>
</ol>
<p>Almost all of this functionality is handled automatically and is not a necessary
concern for end users.</p>
<section id="module-WSE_FE.WSE_Interface">
<span id="classes-and-methods"></span><h2>Classes and Methods<a class="headerlink" href="#module-WSE_FE.WSE_Interface" title="Permalink to this headline"></a></h2>
<dl class="py class">
<dt class="sig sig-object py" id="WSE_FE.WSE_Interface.WSE_Interface">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">WSE_FE.WSE_Interface.</span></span><span class="sig-name descname"><span class="pre">WSE_Interface</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">*</span></span><span class="n"><span class="pre">args</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#WSE_FE.WSE_Interface.WSE_Interface" title="Permalink to this definition"></a></dt>
<dd><p>Singleton class that keeps track of program sequence for the WSE_FE package</p>
<p>See WSE_Interface_Singleton for available methods</p>
</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="WSE_FE.WSE_Interface.WSE_Interface_Singleton">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">WSE_FE.WSE_Interface.</span></span><span class="sig-name descname"><span class="pre">WSE_Interface_Singleton</span></span><a class="headerlink" href="#WSE_FE.WSE_Interface.WSE_Interface_Singleton" title="Permalink to this definition"></a></dt>
<dd><p>DO NOT INSTANTIATE DIRECTLY</p>
<p>This class is the singleton base of WSE_Interface</p>
<p>Contains all methods available in WSE_Interface</p>
<dl class="py method">
<dt class="sig sig-object py" id="WSE_FE.WSE_Interface.WSE_Interface_Singleton.for_loop_end">
<span class="sig-name descname"><span class="pre">for_loop_end</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">name</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#WSE_FE.WSE_Interface.WSE_Interface_Singleton.for_loop_end" title="Permalink to this definition"></a></dt>
<dd><p>Call to mark the end of a for loop</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>name</strong> (<em>str:</em>) – The name of the for loop referenced in for_loop_start</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="WSE_FE.WSE_Interface.WSE_Interface_Singleton.for_loop_start">
<span class="sig-name descname"><span class="pre">for_loop_start</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">name</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">n</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#WSE_FE.WSE_Interface.WSE_Interface_Singleton.for_loop_start" title="Permalink to this definition"></a></dt>
<dd><p>Call to mark the start of a for loop</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>name</strong> (<em>str:</em>) – A unique name for the loop to reference at the close of the loop</p></li>
<li><p><strong>n</strong> (<em>int</em>) – the number of loops to complete</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="WSE_FE.WSE_Interface.WSE_Interface_Singleton.get_available_cmd_args">
<span class="sig-name descname"><span class="pre">get_available_cmd_args</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#WSE_FE.WSE_Interface.WSE_Interface_Singleton.get_available_cmd_args" title="Permalink to this definition"></a></dt>
<dd><p>WSE_Interface creates a default set of command line arguments through
the argparse library.  This function allows users to retrieve all command
line arguments.  To add more domain specific arbuments see
get_cmd_line_parser.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">WSE_FE.WSE_Interface</span> <span class="kn">import</span> <span class="n">WSE_Interface</span>

<span class="n">wse</span> <span class="o">=</span> <span class="n">WSE_Interface</span><span class="p">()</span>
<span class="n">args</span> <span class="o">=</span> <span class="n">wse</span><span class="o">.</span><span class="n">get_available_cmd_args</span><span class="p">()</span>

<span class="c1">#use args in furhter code</span>
</pre></div>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="WSE_FE.WSE_Interface.WSE_Interface_Singleton.get_cmd_line_parser">
<span class="sig-name descname"><span class="pre">get_cmd_line_parser</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#WSE_FE.WSE_Interface.WSE_Interface_Singleton.get_cmd_line_parser" title="Permalink to this definition"></a></dt>
<dd><p>WSE_Interface creates a default set of command line arguments through
the argparse library.  This function allows users to get the parser
created in the WSE_Interface so that domain specific arguments can be
added as command line arguments.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">WSE_FE.WSE_Interface</span> <span class="kn">import</span> <span class="n">WSE_Interface</span>

<span class="n">wse</span> <span class="o">=</span> <span class="n">WSE_Interface</span><span class="p">()</span>
<span class="n">parser</span> <span class="o">=</span> <span class="n">wse</span><span class="o">.</span><span class="n">get_cmd_line_parser</span><span class="p">()</span>

<span class="c1">#Add CFD Specific command line arguments</span>
<span class="n">parser</span><span class="o">.</span><span class="n">add_argument</span><span class="p">(</span><span class="s2">&quot;-x&quot;</span><span class="p">,</span><span class="s2">&quot;--x&quot;</span><span class="p">,</span> <span class="n">help</span><span class="o">=</span><span class="s2">&quot;specify x dimension&quot;</span><span class="p">,</span> <span class="nb">type</span><span class="o">=</span><span class="nb">int</span><span class="p">,</span> <span class="n">default</span><span class="o">=</span><span class="mi">10</span><span class="p">)</span>
<span class="n">parser</span><span class="o">.</span><span class="n">add_argument</span><span class="p">(</span><span class="s2">&quot;-y&quot;</span><span class="p">,</span><span class="s2">&quot;--y&quot;</span><span class="p">,</span> <span class="n">help</span><span class="o">=</span><span class="s2">&quot;specify y dimension&quot;</span><span class="p">,</span> <span class="nb">type</span><span class="o">=</span><span class="nb">int</span><span class="p">,</span> <span class="n">default</span><span class="o">=</span><span class="mi">10</span><span class="p">)</span>
<span class="n">parser</span><span class="o">.</span><span class="n">add_argument</span><span class="p">(</span><span class="s2">&quot;-z&quot;</span><span class="p">,</span> <span class="s2">&quot;--z&quot;</span><span class="p">,</span> <span class="n">help</span><span class="o">=</span><span class="s2">&quot;specify z dimension&quot;</span><span class="p">,</span> <span class="nb">type</span><span class="o">=</span><span class="nb">int</span><span class="p">,</span> <span class="n">default</span><span class="o">=</span><span class="mi">10</span><span class="p">)</span>
<span class="n">args</span> <span class="o">=</span> <span class="n">wse</span><span class="o">.</span><span class="n">get_available_cmd_args</span><span class="p">()</span>

<span class="c1">#use args in furhter code</span>
</pre></div>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="WSE_FE.WSE_Interface.WSE_Interface_Singleton.make_WSE">
<span class="sig-name descname"><span class="pre">make_WSE</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">answer</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">liveCells</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#WSE_FE.WSE_Interface.WSE_Interface_Singleton.make_WSE" title="Permalink to this definition"></a></dt>
<dd><p>Compiles the code for the Wafer Scale Engine.  Several command line
options set compilation behavior.  Any python script calls this script
will have default command line arguments enabled. Use the <cite>-h</cite> option
behind the python call to launch the script to get a listing of the
available options.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>answer</strong> (<a class="reference internal" href="#WSE_FE.WSE_Array.WSE_Array" title="WSE_FE.WSE_Array.WSE_Array"><em>WSE_Array</em></a><em>, </em><a class="reference internal" href="#WSE_FE.WSE_Scalar.WSE_Scalar" title="WSE_FE.WSE_Scalar.WSE_Scalar"><em>WSE_Scalar</em></a><em>, </em><em>optional</em>) – A WSE_array or WSE_Scalar that holds the answer for validation. The default is None.</p></li>
<li><p><strong>liveCells</strong> (<em>np.array</em><em>, </em><em>optional</em>) – A map of live cells used to construct an image of validation data. The default is None.</p></li>
</ul>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>None.</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="WSE_FE.WSE_Interface.WSE_Interface_Singleton.record_timestamp">
<span class="sig-name descname"><span class="pre">record_timestamp</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#WSE_FE.WSE_Interface.WSE_Interface_Singleton.record_timestamp" title="Permalink to this definition"></a></dt>
<dd><p>Call to record time stamp for benchmarking</p>
<dl class="field-list simple">
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>None.</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="WSE_FE.WSE_Interface.WSE_Interface_Singleton.str_to_bool">
<span class="sig-name descname"><span class="pre">str_to_bool</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">v</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#WSE_FE.WSE_Interface.WSE_Interface_Singleton.str_to_bool" title="Permalink to this definition"></a></dt>
<dd><p>Converts several strings into booleans. yes, true, t, y, 1 are
understood as true, while no, valse, n, f, 0 are understood as false.
Inputs are not case sensitive.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>v</strong> (<em>str</em>) – the input string to be tested.</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>The boolean representation of the input.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>bool</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="WSE_FE.WSE_Interface.WSE_Interface_Singleton.while_loop_end">
<span class="sig-name descname"><span class="pre">while_loop_end</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">name</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#WSE_FE.WSE_Interface.WSE_Interface_Singleton.while_loop_end" title="Permalink to this definition"></a></dt>
<dd><p>Call to mark the end of a while loop</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>name</strong> (<em>str:</em>) – The name of the while loop referenced in while_loop_start</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="WSE_FE.WSE_Interface.WSE_Interface_Singleton.while_loop_start">
<span class="sig-name descname"><span class="pre">while_loop_start</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">name</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">scalar_index</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">tolerance</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#WSE_FE.WSE_Interface.WSE_Interface_Singleton.while_loop_start" title="Permalink to this definition"></a></dt>
<dd><p>Call to mark the start of a while loop</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>name</strong> (<em>str:</em>) – A unique name for the loop to reference at the close of the loop</p></li>
<li><p><strong>scalar_index</strong> – the integer handle to the scalar memory position in the controller where</p></li>
</ul>
</dd>
</dl>
<p>value is stored to compare to tolerance
:type scalar_index: int</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>tolerance</strong> (<em>float</em>) – the tolerance to stop iterating</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

</section>
</section>
<section id="wse-array-module">
<h1>WSE Array Module<a class="headerlink" href="#wse-array-module" title="Permalink to this headline"></a></h1>
<p>The WSE_Array class is designed to allow users to work with 3D arrays in a
similar way to NumPy.  In fact, user defined WSE_Arrays are initialized from
3D NumPy arrays through the <cite>initData</cite> keyword on instantiation.  The first two
axes in the NumPy arrays map to tile coordinates and axis 2 maps to the memory
axis on each tile.</p>
<p>Each WSE_Array is designed to represent field data within a cell/voxel in a 3D
structured finite element/volume simulation. Thus, the shape of each WSE_Array
is set to the number of cells in the cardinal axes (including boundary cells).</p>
<p>Each tile holds a column of cells in the third axis of the NumPy data.  Arithmetic
is written from the perspective of a single tile in the array.</p>
<p>Slicing a WSE_Array object is similar to NumPy but is in relative coordinates.
The first axis is usually a slice range which specifies the elements of each
local vector on each tile.  It is equivalent to the slicing in the third axis
of a 3d NumPy array.  The second two axes specify the tile position relative
to the local tile coordinate.  The second axis specifies the relative position
east and west, and the third axis specifies the relative position north and
south.</p>
<p>Arithmetic operations are done in the worker field.  When neighbor operations
are involved, moats send their data into the worker field.  Moats are designed
to hold NSEW boundary conditions and are usually only updated at the tail end
of a time step.  Boundary conditions can be updated through a copy operation
which will move neighboring values from the worker field into the moat.</p>
<p>WSE_Array format:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">dst</span><span class="p">[</span><span class="mi">1</span><span class="p">:</span><span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="n">s0</span><span class="p">[</span><span class="mi">2</span><span class="p">:,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">]</span> <span class="o">+</span> <span class="n">s1</span><span class="p">[:</span><span class="o">-</span><span class="mi">2</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">]</span>
<span class="n">dst</span><span class="p">[</span><span class="mi">1</span><span class="p">:</span><span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="n">s0</span><span class="p">[</span><span class="mi">1</span><span class="p">:</span><span class="o">-</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">0</span><span class="p">]</span> <span class="o">+</span> <span class="n">s1</span><span class="p">[</span><span class="mi">1</span><span class="p">:</span><span class="o">-</span><span class="mi">1</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">]</span>
</pre></div>
</div>
<p>NumPy format:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">dst</span><span class="p">[</span><span class="mi">1</span><span class="p">:</span><span class="o">-</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">:</span><span class="o">-</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">:</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span> <span class="o">=</span> <span class="n">s0</span><span class="p">[</span><span class="mi">1</span><span class="p">:</span><span class="o">-</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">:</span><span class="o">-</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">:]</span> <span class="o">+</span> <span class="n">s1</span><span class="p">[</span><span class="mi">1</span><span class="p">:</span><span class="o">-</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">:</span><span class="o">-</span><span class="mi">1</span><span class="p">,:</span><span class="o">-</span><span class="mi">2</span><span class="p">]</span>
<span class="n">dst</span><span class="p">[</span><span class="mi">1</span><span class="p">:</span><span class="o">-</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">:</span><span class="o">-</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">:</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span> <span class="o">=</span> <span class="n">s0</span><span class="p">[</span><span class="mi">1</span><span class="p">:</span><span class="o">-</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">:,</span><span class="mi">1</span><span class="p">:</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span> <span class="o">+</span> <span class="n">s1</span><span class="p">[</span><span class="mi">1</span><span class="p">:</span><span class="o">-</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">:</span><span class="o">-</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">:</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span>
</pre></div>
</div>
<section id="id5">
<h2>Classes and Methods<a class="headerlink" href="#id5" title="Permalink to this headline"></a></h2>
<dl class="py class">
<dt class="sig sig-object py" id="WSE_FE.WSE_Array.WSE_Array">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">WSE_FE.WSE_Array.</span></span><span class="sig-name descname"><span class="pre">WSE_Array</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">name</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#WSE_FE.WSE_Array.WSE_Array" title="Permalink to this definition"></a></dt>
<dd><p>Class to handle expressive math with array objects.</p>
<dl class="py method">
<dt class="sig sig-object py" id="WSE_FE.WSE_Array.WSE_Array.__add__">
<span class="sig-name descname"><span class="pre">__add__</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">other</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#WSE_FE.WSE_Array.WSE_Array.__add__" title="Permalink to this definition"></a></dt>
<dd><p>python magic function to override the ‘+’ operator</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>other</strong> (<em>int</em><em>, </em><em>float</em><em>, </em><a class="reference internal" href="#WSE_FE.WSE_Array.WSE_Array" title="WSE_FE.WSE_Array.WSE_Array"><em>WSE_Array</em></a>) – The other object to add.</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><strong>result</strong> – The WSE_rray object pointing to the result of the addition.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>WSE_array</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="WSE_FE.WSE_Array.WSE_Array.__getitem__">
<span class="sig-name descname"><span class="pre">__getitem__</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">subscript</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#WSE_FE.WSE_Array.WSE_Array.__getitem__" title="Permalink to this definition"></a></dt>
<dd><p>python magic function to handle slicing</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>subscript</strong> (<em>touble</em>) – the slice data.</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><strong>copy_self</strong> – A copy of the incoming WSE_Array.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><a class="reference internal" href="#WSE_FE.WSE_Array.WSE_Array" title="WSE_FE.WSE_Array.WSE_Array">WSE_Array</a></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="WSE_FE.WSE_Array.WSE_Array.__mul__">
<span class="sig-name descname"><span class="pre">__mul__</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">other</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#WSE_FE.WSE_Array.WSE_Array.__mul__" title="Permalink to this definition"></a></dt>
<dd><p>python magic function to override the ‘*’ operator</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>other</strong> (<em>int</em><em>, </em><em>float</em><em>, </em><a class="reference internal" href="#WSE_FE.WSE_Array.WSE_Array" title="WSE_FE.WSE_Array.WSE_Array"><em>WSE_Array</em></a>) – The other object to multiply.</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><strong>result</strong> – The WSE_rray object pointing to the result of the multiplication.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>WSE_array</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="WSE_FE.WSE_Array.WSE_Array.__setitem__">
<span class="sig-name descname"><span class="pre">__setitem__</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">subscript</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">item</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#WSE_FE.WSE_Array.WSE_Array.__setitem__" title="Permalink to this definition"></a></dt>
<dd><p>python magic function to handle sclice assignment</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>subscript</strong> (<em>touple</em>) – The slice of the slice assignment.</p></li>
<li><p><strong>item</strong> (<em>list</em>) – a list containing the self, other, and operation tag for the previous operation.</p></li>
</ul>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>None.</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="WSE_FE.WSE_Array.WSE_Array.__sub__">
<span class="sig-name descname"><span class="pre">__sub__</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">other</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#WSE_FE.WSE_Array.WSE_Array.__sub__" title="Permalink to this definition"></a></dt>
<dd><p>python magic function to override the ‘-’ operator</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>other</strong> (<em>int</em><em>, </em><em>float</em><em>, </em><a class="reference internal" href="#WSE_FE.WSE_Array.WSE_Array" title="WSE_FE.WSE_Array.WSE_Array"><em>WSE_Array</em></a>) – The object to subtract.</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><strong>result</strong> – The WSE_rray object pointing to the result of the subtraction.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>WSE_array</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="WSE_FE.WSE_Array.WSE_Array.__truediv__">
<span class="sig-name descname"><span class="pre">__truediv__</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">other</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#WSE_FE.WSE_Array.WSE_Array.__truediv__" title="Permalink to this definition"></a></dt>
<dd><p>python magic function to override the ‘/’ operator</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>other</strong> (<em>int</em><em>, </em><em>float</em><em>, </em><a class="reference internal" href="#WSE_FE.WSE_Array.WSE_Array" title="WSE_FE.WSE_Array.WSE_Array"><em>WSE_Array</em></a>) – The denominator for the division.</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><strong>result</strong> – The WSE_rray object pointing to the result of the division.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>WSE_array</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="WSE_FE.WSE_Array.WSE_Array.copy">
<span class="sig-name descname"><span class="pre">copy</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">other</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">moatArray</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#WSE_FE.WSE_Array.WSE_Array.copy" title="Permalink to this definition"></a></dt>
<dd><p>copies other into self.  If moatArray is specified, copies self into
moatArray memory space on the moat invoved rather than self.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>other</strong> (<a class="reference internal" href="#WSE_FE.WSE_Array.WSE_Array" title="WSE_FE.WSE_Array.WSE_Array"><em>WSE_Array</em></a>) – The WSE_Array to copy.</p></li>
<li><p><strong>moatArray</strong> (<a class="reference internal" href="#WSE_FE.WSE_Array.WSE_Array" title="WSE_FE.WSE_Array.WSE_Array"><em>WSE_Array</em></a><em>, </em><em>optional</em>) – The WSE_Array to copy into on the moat if specified. The default is None.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><strong>result</strong> – An updated copy of self.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>WSE_array</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="WSE_FE.WSE_Array.WSE_Array.max_with">
<span class="sig-name descname"><span class="pre">max_with</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">other</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#WSE_FE.WSE_Array.WSE_Array.max_with" title="Permalink to this definition"></a></dt>
<dd><p>computes the element wise maximum of self with other</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>other</strong> (<em>int</em><em>, </em><em>float</em>) – a value to max with.</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><strong>result</strong> – the result of the maximum operation.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><a class="reference internal" href="#WSE_FE.WSE_Array.WSE_Array" title="WSE_FE.WSE_Array.WSE_Array">WSE_Array</a></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="WSE_FE.WSE_Array.WSE_Array.min_with">
<span class="sig-name descname"><span class="pre">min_with</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">other</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#WSE_FE.WSE_Array.WSE_Array.min_with" title="Permalink to this definition"></a></dt>
<dd><p>computes the element wise minimum of self with other</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>other</strong> (<em>int</em><em>, </em><em>float</em>) – a value to min with.</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><strong>result</strong> – the result of the minimum operation.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><a class="reference internal" href="#WSE_FE.WSE_Array.WSE_Array" title="WSE_FE.WSE_Array.WSE_Array">WSE_Array</a></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="WSE_FE.WSE_Array.WSE_Array.reduce_add_2_control">
<span class="sig-name descname"><span class="pre">reduce_add_2_control</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">result_scalar</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#WSE_FE.WSE_Array.WSE_Array.reduce_add_2_control" title="Permalink to this definition"></a></dt>
<dd><p>computes the reduce add on self and places the result
in a WSE_Scalar on the control tile</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>result_scalar</strong> (<a class="reference internal" href="#WSE_FE.WSE_Scalar.WSE_Scalar" title="WSE_FE.WSE_Scalar.WSE_Scalar"><em>WSE_Scalar</em></a><em>, </em><em>int</em>) – The WSE_Scalar objecto or scalar index to where to store the result.</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>None</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="WSE_FE.WSE_Array.WSE_Array.reduce_dot_2_control">
<span class="sig-name descname"><span class="pre">reduce_dot_2_control</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">other</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">result_scalar</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#WSE_FE.WSE_Array.WSE_Array.reduce_dot_2_control" title="Permalink to this definition"></a></dt>
<dd><p>computes the dot product reduction between self and other and places it
in a WSE_Scalar on the control tile</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>other</strong> (<a class="reference internal" href="#WSE_FE.WSE_Array.WSE_Array" title="WSE_FE.WSE_Array.WSE_Array"><em>WSE_Array</em></a>) – The other Array object to do the dot product with.</p></li>
<li><p><strong>result_scalar</strong> (<a class="reference internal" href="#WSE_FE.WSE_Scalar.WSE_Scalar" title="WSE_FE.WSE_Scalar.WSE_Scalar"><em>WSE_Scalar</em></a><em>, </em><em>int</em>) – The WSE_Scalar objecto or scalar index to where to store the result.</p></li>
</ul>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>None.</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

</section>
</section>
<section id="wse-scalar-module">
<h1>WSE Scalar Module<a class="headerlink" href="#wse-scalar-module" title="Permalink to this headline"></a></h1>
<p>The WSE Scalar Module is designed to handle global, mutable scalars in the
WSE_FE API.  Global scalars live in the memory space of the controller and
are broadcast with the arguments when an operation is evoked.  This approach
conserves memory on the system and incurs minimal latencies.  It is most
commonly used in calculating dot products in linear solvers.  The Module
supports a limited but growing number of scalar-scalar operations.  These
operations are conducted on the controller tile.</p>
<section id="id6">
<h2>Classes and Methods<a class="headerlink" href="#id6" title="Permalink to this headline"></a></h2>
<dl class="py class">
<dt class="sig sig-object py" id="WSE_FE.WSE_Scalar.WSE_Scalar">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">WSE_FE.WSE_Scalar.</span></span><span class="sig-name descname"><span class="pre">WSE_Scalar</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#WSE_FE.WSE_Scalar.WSE_Scalar" title="Permalink to this definition"></a></dt>
<dd><dl class="py method">
<dt class="sig sig-object py" id="WSE_FE.WSE_Scalar.WSE_Scalar.__add__">
<span class="sig-name descname"><span class="pre">__add__</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">other</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#WSE_FE.WSE_Scalar.WSE_Scalar.__add__" title="Permalink to this definition"></a></dt>
<dd><p>Python magic function to override the ‘+’ operator</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>other</strong> (<em>float</em><em>, </em><em>int</em>) – the value to add with.</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><strong>result</strong> – The WSE_Scalar object that contains the result.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><a class="reference internal" href="#WSE_FE.WSE_Scalar.WSE_Scalar" title="WSE_FE.WSE_Scalar.WSE_Scalar">WSE_Scalar</a></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="WSE_FE.WSE_Scalar.WSE_Scalar.__mul__">
<span class="sig-name descname"><span class="pre">__mul__</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">other</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#WSE_FE.WSE_Scalar.WSE_Scalar.__mul__" title="Permalink to this definition"></a></dt>
<dd><p>Python magic function to override the ‘*’ operator</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>other</strong> (<a class="reference internal" href="#WSE_FE.WSE_Scalar.WSE_Scalar" title="WSE_FE.WSE_Scalar.WSE_Scalar"><em>WSE_Scalar</em></a><em>, </em><a class="reference internal" href="#WSE_FE.WSE_Array.WSE_Array" title="WSE_FE.WSE_Array.WSE_Array"><em>WSE_Array</em></a>) – the value to multiply with.</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><strong>result</strong> – The WSE_Scalar  or WSE_Array object that contains the result.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><a class="reference internal" href="#WSE_FE.WSE_Scalar.WSE_Scalar" title="WSE_FE.WSE_Scalar.WSE_Scalar">WSE_Scalar</a>, WSE_array</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="WSE_FE.WSE_Scalar.WSE_Scalar.__setitem__">
<span class="sig-name descname"><span class="pre">__setitem__</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">subscript</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">item</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#WSE_FE.WSE_Scalar.WSE_Scalar.__setitem__" title="Permalink to this definition"></a></dt>
<dd><p>Python magic to overwrite the slice assignment.  Used to trigger a
write into an existing WSE_Scalar object and not trigger creation of
a new WSE_Scalar object. This is necessary because there is no python
magic to overwrite the assign operator.</p>
<div class="highlight-pthon notranslate"><div class="highlight"><pre><span></span>from WSE_FE.WSE_Scalar import WSE_Scalar

dst = WSE_Scalar(name=&#39;dst&#39;)
scalar_1 = WSE_Scalar(name=&#39;scalar_1&#39;, value = 1.0)

#puts the value 2.0 in the memory space for dst
dst[0]  = scalar_1 + 1.0

#overwrites dst with a new WSE_Scalar object (dangerous)
dst = scalar_1 + 1.0
</pre></div>
</div>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>subscript</strong> (<em>int</em>) – should be an int of zero, if not throws error.</p></li>
<li><p><strong>item</strong> (<em>list</em>) – coded list that shows the previous operations coming into the slice
assignment.</p></li>
</ul>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>None.</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="WSE_FE.WSE_Scalar.WSE_Scalar.__truediv__">
<span class="sig-name descname"><span class="pre">__truediv__</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">other</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#WSE_FE.WSE_Scalar.WSE_Scalar.__truediv__" title="Permalink to this definition"></a></dt>
<dd><p>see __div__</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="WSE_FE.WSE_Scalar.WSE_Scalar.copy">
<span class="sig-name descname"><span class="pre">copy</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">other</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#WSE_FE.WSE_Scalar.WSE_Scalar.copy" title="Permalink to this definition"></a></dt>
<dd><p>Copies the value in other to self</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>other</strong> (<a class="reference internal" href="#WSE_FE.WSE_Scalar.WSE_Scalar" title="WSE_FE.WSE_Scalar.WSE_Scalar"><em>WSE_Scalar</em></a>) – The value to copy.</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>None.</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="WSE_FE.WSE_Scalar.WSE_Scalar.setValue">
<span class="sig-name descname"><span class="pre">setValue</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">value</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#WSE_FE.WSE_Scalar.WSE_Scalar.setValue" title="Permalink to this definition"></a></dt>
<dd><p>Sets a WSE_Scalar to a float value.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>value</strong> (<em>float</em><em>, </em><em>int</em>) – The value to set the scalar to.</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>None.</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

</section>
</section>
<section id="wse-solver-module">
<h1>WSE Solver Module<a class="headerlink" href="#wse-solver-module" title="Permalink to this headline"></a></h1>
<p>This is a convenience class that packages common linear solvers to solve systems
of linear equations to a defined tolerance.  The Solvers use the same Modules
in this package to program the WSE once the coefficient matrix and source vector
are formed.  The implicit solution example for the diffusion equation
uses one of the <cite>CgConstantOffDiag</cite> variant below.  Be sure to instantiate
the class at the start of a program to initialize the necessary memory spaces.</p>
<p>The solvers will create <cite>program_scratch</cite> space for arrays and scalars.  These
memory spaces are available to users outside of the solver, but will be overwritten
when the solver is called.  This is usually ok as implicitly solving equations
involves repeated processes of forming and solving and the memory spaces during
each process is partially isolated (they share A/b and field values).  Reusing
program scratch is suitable for several intermediate calculations in the formation
steps.</p>
<section id="id7">
<h2>Classes and Methods<a class="headerlink" href="#id7" title="Permalink to this headline"></a></h2>
<dl class="py class">
<dt class="sig sig-object py" id="WSE_FE.WSE_Solver.BiCgStab">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">WSE_FE.WSE_Solver.</span></span><span class="sig-name descname"><span class="pre">BiCgStab</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">x_dim</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">y_dim</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">z_dim</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">makeXCopy</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#WSE_FE.WSE_Solver.BiCgStab" title="Permalink to this definition"></a></dt>
<dd><dl class="py method">
<dt class="sig sig-object py" id="WSE_FE.WSE_Solver.BiCgStab.solve">
<span class="sig-name descname"><span class="pre">solve</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">x</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">A_E</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">A_W</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">A_N</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">A_S</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">A_T</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">A_B</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">b</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">tolerance</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">benchmark_iterations</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#WSE_FE.WSE_Solver.BiCgStab.solve" title="Permalink to this definition"></a></dt>
<dd><p>Solves the linear equation Ax=b using the biconjugate gradient stablized method.
A and b terms are assumed to be normalized by the diagonal so that
the diagonal is 1 at every row</p>
<p>The matrix is assumed to have 7 non zero components correspondign to
center, east, west, north, top, and bottom</p>
<p>The matrix should be diagonally dominant, symmetric with a positive
diagonal of one and negative off diagonals</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>x</strong> (<a class="reference internal" href="#WSE_FE.WSE_Array.WSE_Array" title="WSE_FE.WSE_Array.WSE_Array"><em>WSE_Array</em></a>) – The initial guess.</p></li>
<li><p><strong>A_E</strong> (<a class="reference internal" href="#WSE_FE.WSE_Array.WSE_Array" title="WSE_FE.WSE_Array.WSE_Array"><em>WSE_Array</em></a>) – The east component of the coefficient matrix.</p></li>
<li><p><strong>A_W</strong> (<a class="reference internal" href="#WSE_FE.WSE_Array.WSE_Array" title="WSE_FE.WSE_Array.WSE_Array"><em>WSE_Array</em></a>) – The east component of the coefficient matrix.</p></li>
<li><p><strong>A_N</strong> (<a class="reference internal" href="#WSE_FE.WSE_Array.WSE_Array" title="WSE_FE.WSE_Array.WSE_Array"><em>WSE_Array</em></a>) – The east component of the coefficient matrix.</p></li>
<li><p><strong>A_S</strong> (<a class="reference internal" href="#WSE_FE.WSE_Array.WSE_Array" title="WSE_FE.WSE_Array.WSE_Array"><em>WSE_Array</em></a>) – The east component of the coefficient matrix.</p></li>
<li><p><strong>A_T</strong> (<a class="reference internal" href="#WSE_FE.WSE_Array.WSE_Array" title="WSE_FE.WSE_Array.WSE_Array"><em>WSE_Array</em></a>) – The east component of the coefficient matrix.</p></li>
<li><p><strong>A_B</strong> (<a class="reference internal" href="#WSE_FE.WSE_Array.WSE_Array" title="WSE_FE.WSE_Array.WSE_Array"><em>WSE_Array</em></a>) – The east component of the coefficient matrix.</p></li>
<li><p><strong>b</strong> (<a class="reference internal" href="#WSE_FE.WSE_Array.WSE_Array" title="WSE_FE.WSE_Array.WSE_Array"><em>WSE_Array</em></a>) – The source array.</p></li>
<li><p><strong>tolerance</strong> (<em>float</em>) – The tolerance to solve the equation set to.</p></li>
<li><p><strong>benchmark_iterations</strong> (<em>int</em><em>, </em><em>optional</em>) – sets the loop to a for loop with <cite>benchmark_iterations</cite> iterations
if a positive integer is provided and inserts a record_timestamp
method call. The default is None.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><strong>x</strong> – The approximate solution to the equation.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><a class="reference internal" href="#WSE_FE.WSE_Array.WSE_Array" title="WSE_FE.WSE_Array.WSE_Array">WSE_Array</a></p>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="WSE_FE.WSE_Solver.Cg">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">WSE_FE.WSE_Solver.</span></span><span class="sig-name descname"><span class="pre">Cg</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">x_dim</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">y_dim</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">z_dim</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">makeXCopy</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#WSE_FE.WSE_Solver.Cg" title="Permalink to this definition"></a></dt>
<dd><dl class="py method">
<dt class="sig sig-object py" id="WSE_FE.WSE_Solver.Cg.solve">
<span class="sig-name descname"><span class="pre">solve</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">x</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">A_E</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">A_W</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">A_N</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">A_S</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">A_T</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">A_B</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">b</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">tolerance</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">benchmark_iterations</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#WSE_FE.WSE_Solver.Cg.solve" title="Permalink to this definition"></a></dt>
<dd><p>Solves the linear equation Ax=b using the conjugate gradient method.
A and b terms are assumed to be normalized by the diagonal so that
the diagonal is 1 at every row</p>
<p>The matrix is assumed to have 7 non zero components correspondign to
center, east, west, north, top, and bottom</p>
<p>The matrix should be diagonally dominant, symmetric with a positive
diagonal of one and negative off diagonals</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>x</strong> (<a class="reference internal" href="#WSE_FE.WSE_Array.WSE_Array" title="WSE_FE.WSE_Array.WSE_Array"><em>WSE_Array</em></a>) – The initial guess.</p></li>
<li><p><strong>A_E</strong> (<a class="reference internal" href="#WSE_FE.WSE_Array.WSE_Array" title="WSE_FE.WSE_Array.WSE_Array"><em>WSE_Array</em></a>) – The east component of the coefficient matrix.</p></li>
<li><p><strong>A_W</strong> (<a class="reference internal" href="#WSE_FE.WSE_Array.WSE_Array" title="WSE_FE.WSE_Array.WSE_Array"><em>WSE_Array</em></a>) – The east component of the coefficient matrix.</p></li>
<li><p><strong>A_N</strong> (<a class="reference internal" href="#WSE_FE.WSE_Array.WSE_Array" title="WSE_FE.WSE_Array.WSE_Array"><em>WSE_Array</em></a>) – The east component of the coefficient matrix.</p></li>
<li><p><strong>A_S</strong> (<a class="reference internal" href="#WSE_FE.WSE_Array.WSE_Array" title="WSE_FE.WSE_Array.WSE_Array"><em>WSE_Array</em></a>) – The east component of the coefficient matrix.</p></li>
<li><p><strong>A_T</strong> (<a class="reference internal" href="#WSE_FE.WSE_Array.WSE_Array" title="WSE_FE.WSE_Array.WSE_Array"><em>WSE_Array</em></a>) – The east component of the coefficient matrix.</p></li>
<li><p><strong>A_B</strong> (<a class="reference internal" href="#WSE_FE.WSE_Array.WSE_Array" title="WSE_FE.WSE_Array.WSE_Array"><em>WSE_Array</em></a>) – The east component of the coefficient matrix.</p></li>
<li><p><strong>b</strong> (<a class="reference internal" href="#WSE_FE.WSE_Array.WSE_Array" title="WSE_FE.WSE_Array.WSE_Array"><em>WSE_Array</em></a>) – The source array.</p></li>
<li><p><strong>tolerance</strong> (<em>float</em>) – The tolerance to solve the equation set to.</p></li>
<li><p><strong>benchmark_iterations</strong> (<em>int</em><em>, </em><em>optional</em>) – sets the loop to a for loop with <cite>benchmark_iterations</cite> iterations
if a positive integer is provided and inserts a record_timestamp
method call. The default is None.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><strong>x</strong> – The approximate solution to the equation.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><a class="reference internal" href="#WSE_FE.WSE_Array.WSE_Array" title="WSE_FE.WSE_Array.WSE_Array">WSE_Array</a></p>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="WSE_FE.WSE_Solver.CgConstantOffDiag">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">WSE_FE.WSE_Solver.</span></span><span class="sig-name descname"><span class="pre">CgConstantOffDiag</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">x_dim</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">y_dim</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">z_dim</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">makeXCopy</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#WSE_FE.WSE_Solver.CgConstantOffDiag" title="Permalink to this definition"></a></dt>
<dd><dl class="py method">
<dt class="sig sig-object py" id="WSE_FE.WSE_Solver.CgConstantOffDiag.solve">
<span class="sig-name descname"><span class="pre">solve</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">x</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">offdiag</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">b</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">tolerance</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">benchmark_iterations</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#WSE_FE.WSE_Solver.CgConstantOffDiag.solve" title="Permalink to this definition"></a></dt>
<dd><p>Solves the linear equation Ax=b using the conjugate gradient method.
A and b terms are assumed to be normalized by the diagonal so that
the diagonal is 1 at every row</p>
<p>The matrix is assumed to have 7 non zero components that all share the
value of offdiag (typical of diffusion equations)</p>
<p>The matrix should be diagonally dominant, symmetric with a positive
diagonal of one and negative off diagonals</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>x</strong> (<a class="reference internal" href="#WSE_FE.WSE_Array.WSE_Array" title="WSE_FE.WSE_Array.WSE_Array"><em>WSE_Array</em></a>) – The initial guess.</p></li>
<li><p><strong>offdiag</strong> (<em>float</em>) – the shared matrix coefficient for all off diagonals</p></li>
<li><p><strong>b</strong> (<a class="reference internal" href="#WSE_FE.WSE_Array.WSE_Array" title="WSE_FE.WSE_Array.WSE_Array"><em>WSE_Array</em></a>) – The source array.</p></li>
<li><p><strong>tolerance</strong> (<em>float</em>) – The tolerance to solve the equation set to.</p></li>
<li><p><strong>benchmark_iterations</strong> (<em>int</em><em>, </em><em>optional</em>) – sets the loop to a for loop with <cite>benchmark_iterations</cite> iterations
if a positive integer is provided and inserts a record_timestamp
method call. The default is None.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><strong>x</strong> – The approximate solution to the equation.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><a class="reference internal" href="#WSE_FE.WSE_Array.WSE_Array" title="WSE_FE.WSE_Array.WSE_Array">WSE_Array</a></p>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="WSE_FE.WSE_Solver.Jacobi">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">WSE_FE.WSE_Solver.</span></span><span class="sig-name descname"><span class="pre">Jacobi</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">x_dim</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">y_dim</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">z_dim</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">makeXCopy</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#WSE_FE.WSE_Solver.Jacobi" title="Permalink to this definition"></a></dt>
<dd><dl class="py method">
<dt class="sig sig-object py" id="WSE_FE.WSE_Solver.Jacobi.solve">
<span class="sig-name descname"><span class="pre">solve</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">x</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">A_E</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">A_W</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">A_N</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">A_S</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">A_T</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">A_B</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">b</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">tolerance</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">benchmark_iterations</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#WSE_FE.WSE_Solver.Jacobi.solve" title="Permalink to this definition"></a></dt>
<dd><p>Solves the linear equation Ax=b using the Jacobi method.
A and b terms are assumed to be normalized by the diagonal so that
the diagonal is 1 at every row</p>
<p>The matrix is assumed to have 7 non zero components correspondign to
center, east, west, north, top, and bottom</p>
<p>The matrix should be diagonally dominant with a positive
diagonal of one and negative off diagonals</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>x</strong> (<a class="reference internal" href="#WSE_FE.WSE_Array.WSE_Array" title="WSE_FE.WSE_Array.WSE_Array"><em>WSE_Array</em></a>) – The initial guess.</p></li>
<li><p><strong>A_E</strong> (<a class="reference internal" href="#WSE_FE.WSE_Array.WSE_Array" title="WSE_FE.WSE_Array.WSE_Array"><em>WSE_Array</em></a>) – The east component of the coefficient matrix.</p></li>
<li><p><strong>A_W</strong> (<a class="reference internal" href="#WSE_FE.WSE_Array.WSE_Array" title="WSE_FE.WSE_Array.WSE_Array"><em>WSE_Array</em></a>) – The east component of the coefficient matrix.</p></li>
<li><p><strong>A_N</strong> (<a class="reference internal" href="#WSE_FE.WSE_Array.WSE_Array" title="WSE_FE.WSE_Array.WSE_Array"><em>WSE_Array</em></a>) – The east component of the coefficient matrix.</p></li>
<li><p><strong>A_S</strong> (<a class="reference internal" href="#WSE_FE.WSE_Array.WSE_Array" title="WSE_FE.WSE_Array.WSE_Array"><em>WSE_Array</em></a>) – The east component of the coefficient matrix.</p></li>
<li><p><strong>A_T</strong> (<a class="reference internal" href="#WSE_FE.WSE_Array.WSE_Array" title="WSE_FE.WSE_Array.WSE_Array"><em>WSE_Array</em></a>) – The east component of the coefficient matrix.</p></li>
<li><p><strong>A_B</strong> (<a class="reference internal" href="#WSE_FE.WSE_Array.WSE_Array" title="WSE_FE.WSE_Array.WSE_Array"><em>WSE_Array</em></a>) – The east component of the coefficient matrix.</p></li>
<li><p><strong>b</strong> (<a class="reference internal" href="#WSE_FE.WSE_Array.WSE_Array" title="WSE_FE.WSE_Array.WSE_Array"><em>WSE_Array</em></a>) – The source array.</p></li>
<li><p><strong>tolerance</strong> (<em>float</em>) – The tolerance to solve the equation set to.</p></li>
<li><p><strong>benchmark_iterations</strong> (<em>int</em><em>, </em><em>optional</em>) – sets the loop to a for loop with <cite>benchmark_iterations</cite> iterations
if a positive integer is provided and inserts a record_timestamp
method call. The default is None.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><strong>x</strong> – The approximate solution to the equation.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><a class="reference internal" href="#WSE_FE.WSE_Array.WSE_Array" title="WSE_FE.WSE_Array.WSE_Array">WSE_Array</a></p>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="WSE_FE.WSE_Solver.JacobiConstantOffDiag">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">WSE_FE.WSE_Solver.</span></span><span class="sig-name descname"><span class="pre">JacobiConstantOffDiag</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">x_dim</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">y_dim</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">z_dim</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">makeXCopy</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#WSE_FE.WSE_Solver.JacobiConstantOffDiag" title="Permalink to this definition"></a></dt>
<dd><dl class="py method">
<dt class="sig sig-object py" id="WSE_FE.WSE_Solver.JacobiConstantOffDiag.solve">
<span class="sig-name descname"><span class="pre">solve</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">x</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">offdiag</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">b</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">tolerance</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">benchmark_iterations</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#WSE_FE.WSE_Solver.JacobiConstantOffDiag.solve" title="Permalink to this definition"></a></dt>
<dd><p>Solves the linear equation Ax=b using the Jacobi method.
A and b terms are assumed to be normalized by the diagonal so that
the diagonal is 1 at every row</p>
<p>The matrix is assumed to have 7 non zero components that all share the
value of offdiag (typical of diffusion equations)</p>
<p>The matrix should be diagonally dominant with a positive
diagonal of one and negative off diagonals</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>x</strong> (<a class="reference internal" href="#WSE_FE.WSE_Array.WSE_Array" title="WSE_FE.WSE_Array.WSE_Array"><em>WSE_Array</em></a>) – The initial guess.</p></li>
<li><p><strong>offdiag</strong> (<em>float</em>) – the shared matrix coefficient for all off diagonals</p></li>
<li><p><strong>b</strong> (<a class="reference internal" href="#WSE_FE.WSE_Array.WSE_Array" title="WSE_FE.WSE_Array.WSE_Array"><em>WSE_Array</em></a>) – The source array.</p></li>
<li><p><strong>tolerance</strong> (<em>float</em>) – The tolerance to solve the equation set to.</p></li>
<li><p><strong>benchmark_iterations</strong> (<em>int</em><em>, </em><em>optional</em>) – sets the loop to a for loop with <cite>benchmark_iterations</cite> iterations
if a positive integer is provided and inserts a record_timestamp
method call. The default is None.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><strong>x</strong> – The approximate solution to the equation.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><a class="reference internal" href="#WSE_FE.WSE_Array.WSE_Array" title="WSE_FE.WSE_Array.WSE_Array">WSE_Array</a></p>
</dd>
</dl>
</dd></dl>

</dd></dl>

</section>
</section>
<section id="custom-ide-with-synax-highlighting">
<h1>Custom IDE With Synax Highlighting<a class="headerlink" href="#custom-ide-with-synax-highlighting" title="Permalink to this headline"></a></h1>
<p>NETL is maintaining a custom version of the Spyder IDE which supports syntax
highlighing for WSE code.  Installation can be done with conda by following the
instructions below:</p>
<ol class="arabic simple">
<li><p>clone the repository from the <a class="reference external" href="https://mfix.netl.doe.gov/gitlab/tjordan/spyder/-/tree/wse_support">gitlab</a> repository</p></li>
<li><p>check out the wse_support branch</p></li>
<li><p>navigate to the folder with the setup.py and env.yml files</p></li>
<li><p>run <cite>conda env create -f env.yml –name spyder</cite></p></li>
<li><p>run <cite>conda activate spyder</cite></p></li>
<li><p>run <cite>python setup.py install</cite></p></li>
<li><p>run <cite>spyder</cite></p></li>
</ol>
</section>


           </div>
          </div>
          <footer>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright .</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>