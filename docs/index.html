

<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8">
  <meta name="generator" content="Docutils 0.18.1: http://docutils.sourceforge.net/" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Welcome to WFA’s Documentation! &mdash; WFA 0.0.1 documentation</title>
  

  
  <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="_static/copybutton.css" type="text/css" />

  
  
  
  

  
  <!--[if lt IE 9]>
    <script src="_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="./" src="_static/documentation_options.js"></script>
        <script src="_static/jquery.js"></script>
        <script src="_static/underscore.js"></script>
        <script src="_static/doctools.js"></script>
        <script src="_static/language_data.js"></script>
        <script src="_static/clipboard.min.js"></script>
        <script src="_static/copybutton.js"></script>
        <script async="async" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/latest.js?config=TeX-AMS-MML_HTMLorMML"></script>
    
    <script type="text/javascript" src="_static/js/theme.js"></script>

    
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="#" class="icon icon-home" alt="Documentation Home"> WFA
          

          
          </a>

          
            
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        
        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <!-- Local TOC -->
              <div class="local-toc"><ul>
<li><a class="reference internal" href="#">Welcome to WFA’s Documentation!</a></li>
<li><a class="reference internal" href="#recent-achievement">Recent Achievement</a></li>
<li><a class="reference internal" href="#license">License</a></li>
<li><a class="reference internal" href="#setup-instructions">Setup Instructions</a><ul>
<li><a class="reference internal" href="#obtaining-the-wfa-code">Obtaining the WFA Code</a></li>
<li><a class="reference internal" href="#running-on-neocortex">Running on Neocortex</a><ul>
<li><a class="reference internal" href="#interactive-singularity">Interactive Singularity</a></li>
<li><a class="reference internal" href="#checking-installation">Checking Installation</a></li>
<li><a class="reference internal" href="#launching-portrait-from-neocortex">Launching Portrait from Neocortex</a></li>
<li><a class="reference internal" href="#compiling-for-hardware-neocortex">Compiling for Hardware Neocortex</a></li>
<li><a class="reference internal" href="#retrieving-data">Retrieving Data</a></li>
<li><a class="reference internal" href="#saving-time-dependent-data">Saving time Dependent Data</a></li>
<li><a class="reference internal" href="#converting-checkpoints-to-vtr">Converting Checkpoints to VTR</a></li>
</ul>
</li>
<li><a class="reference internal" href="#useful-tools-and-methods">Useful Tools and Methods</a><ul>
<li><a class="reference internal" href="#custom-spyder-ide">Custom Spyder IDE</a></li>
<li><a class="reference internal" href="#sshfs">sshfs</a><ul>
<li><a class="reference internal" href="#neocortex-from-linux">Neocortex from Linux</a></li>
<li><a class="reference internal" href="#neocortex-from-windows">Neocortex from Windows</a></li>
</ul>
</li>
<li><a class="reference internal" href="#pycharm">Pycharm</a></li>
</ul>
</li>
</ul>
</li>
<li><a class="reference internal" href="#simple-diffusion-example">Simple Diffusion Example</a><ul>
<li><a class="reference internal" href="#solving-explicitly">Solving Explicitly</a></li>
<li><a class="reference internal" href="#solving-implicitly">Solving Implicitly</a></li>
</ul>
</li>
<li><a class="reference internal" href="#command-line-arguments">Command Line Arguments</a><ul>
<li><a class="reference internal" href="#running-scripts-for-development">Running Scripts for Development</a></li>
<li><a class="reference internal" href="#debugging">Debugging</a></li>
<li><a class="reference internal" href="#compiling-for-hardware">Compiling for Hardware</a></li>
</ul>
</li>
<li><a class="reference internal" href="#wse-interface-module">WSE Interface Module</a><ul>
<li><a class="reference internal" href="#module-WSE_FE.WSE_Interface">Classes and Methods</a></li>
</ul>
</li>
<li><a class="reference internal" href="#wse-array-module">WSE Array Module</a><ul>
<li><a class="reference internal" href="#classes-and-methods-1">Classes and Methods</a></li>
</ul>
</li>
<li><a class="reference internal" href="#wse-scalar-module">WSE Scalar Module</a><ul>
<li><a class="reference internal" href="#classes-and-methods-2">Classes and Methods</a></li>
</ul>
</li>
<li><a class="reference internal" href="#wse-solver-module">WSE Solver Module</a><ul>
<li><a class="reference internal" href="#classes-and-methods-3">Classes and Methods</a></li>
</ul>
</li>
<li><a class="reference internal" href="#wse-loops-module">WSE Loops Module</a><ul>
<li><a class="reference internal" href="#classes-and-methods-4">Classes and Methods</a></li>
</ul>
</li>
<li><a class="reference internal" href="#cfd-formation-module">CFD Formation Module</a><ul>
<li><a class="reference internal" href="#classes-and-methods-5">Classes and Methods</a></li>
</ul>
</li>
<li><a class="reference internal" href="#fd-navier-stokes-module">FD Navier Stokes Module</a><ul>
<li><a class="reference internal" href="#classes-and-methods-6">Classes and Methods</a></li>
</ul>
</li>
<li><a class="reference internal" href="#coding-style-guidelines">Coding Style Guidelines</a><ul>
<li><a class="reference internal" href="#python">Python</a></li>
<li><a class="reference internal" href="#wse-files">WSE files</a></li>
<li><a class="reference internal" href="#python-docstrings">Python Docstrings</a></li>
</ul>
</li>
</ul>
</div>
            
          
        </div>
        
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="#">WFA</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="#" class="icon icon-home"></a> &raquo;</li>
        
      <li>Welcome to WFA’s Documentation!</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="_sources/index.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="toctree-wrapper compound">
</div>
<section id="welcome-to-wfa-s-documentation">
<h1>Welcome to WFA’s Documentation!<a class="headerlink" href="#welcome-to-wfa-s-documentation" title="Permalink to this headline">¶</a></h1>
<p>This page contains the documentation for the Wafer scale engine Field equation Application programming interfas or WFA.</p>
<p>This package is a product of the <a class="reference external" href="http://www.netl.doe.gov">National Energy Technology Laboratory</a> (NETL)
in collaboration with <a class="reference external" href="https://cerebras.net/">Cerebras Systems Inc</a>.</p>
<p>Field equations have two properties:</p>
<ol class="arabic simple">
<li><p>They have a value or set of values at every point in space time</p></li>
<li><p>Changes to the values are only affected by the immediate surroundings (the Principle of Locality in physics)</p></li>
</ol>
<p>This gives rise to several sets of common differential equations that describe
almost every physical phenomenon in nature at the finest space-time scales.
The only known exception to this fundamental principle appears to be quantum
entanglement which seems to have the property of instantaneous information
transfer.  Every other phenomenon propagates through space-time with a transfer
rate lower than or equal to the speed of light.  Field equations are even fundamental
to our understanding of the quantum realm at Plank scales.  Field equations
can be used to describe systems of objects which exhibit discrete behavior at
intermediate scales. Due to the law of averages, ensembles of discrete objects can take
on the character of a field equation at scales that are many times larger than the
discrete objects (although even “discrete” objects are described as
fields on the finest scales).  This allows sets of field equations to adequately
and accurately describe the behavior of fluids, star/galaxy clusters, and granular
solids under limited circumstances. If a physical system can be written with ODE/PDE
expressions at the scales of interest, it is possible to approximate them on a computer
through discretization.</p>
<p>It should come as no surprise that an Application Specific Integrated Circuit (ASIC) can be
many orders of magnitude faster and more efficient than general purpose computing hardware.
To the best of our knowledge, no one has endeavored to create an ASIC for field equation modeling.
However, recent developments in Artificial Intelligence (AI) ASICS are producing hardware that happens
to also be very good at field equation modeling, as is the case with the Cerebras Wafer Scale
Engine.  The architecture allows definition of discretized values, distributed evenly across the
processor array and mirrors the physical Principle of Locality in that it allows for the nearest
neighbors to affect a local change in a minimum of clock cycles (on average 1-2 cycles).
While the WSE architecture was not developed as an ASIC for field equations, the same properties
that make it so efficient for training large AI models (ie: data flow based matrix multiplications)
end up making it efficient for solving field equations with large numbers of voxels or cells.</p>
</section>
<section id="recent-achievement">
<h1>Recent Achievement<a class="headerlink" href="#recent-achievement" title="Permalink to this headline">¶</a></h1>
<p>NETL, Cerebras, and the Pittsburgh Supercomputing Center recently completed the first ever CFD simulation on a WSE at the
Neocortex facility.  The simulation is of Rayleigh-Benard convection using a new solution method called
<a class="reference external" href="https://gmd.copernicus.org/articles/15/5757/2022/">The Accellerated Pseudo Transient Method</a>.  The CFD solver uses the
WFA to compile and run.  Work is currently under way to characterize the exact speed gains and energy consumption relative
to the fastest conventional hardware available.  Our early benchmarks and results are available in an arXiv
<a class="reference external" href="https://arxiv.org/abs/2209.13768/">paper</a>. and will be updated as new data comes in.</p>
<iframe width="560" height="315" src="https://www.youtube.com/embed/7NWe0kwaqrE" title="YouTube video player" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share" allowfullscreen></iframe></section>
<section id="license">
<h1>License<a class="headerlink" href="#license" title="Permalink to this headline">¶</a></h1>
<p>This work is a product of the Federal Government.  As of now, it is covered
under a <a class="reference external" href="https://creativecommons.org/share-your-work/public-domain/cc0/">CC0 License</a> until
applications for a different copyright and license structure are adopted.</p>
</section>
<section id="setup-instructions">
<h1>Setup Instructions<a class="headerlink" href="#setup-instructions" title="Permalink to this headline">¶</a></h1>
<p>There are two tasks to complete in order to get set up with the WFA.  First, the WFA library must be obtained.
Due to export restrictions, the code is maintained on a private gitlab server.  Follow the instructions in the
“Obtaining the Code” section.  Second, the compilers necessary to run the code are proprietary to Cerebras Systems, Inc.
The compilers are usually packaged with the hardware in singularity containers.  The compilers necessary for the WFA
have been integrated into version 1.8.0 and above in the SDK container.</p>
<section id="obtaining-the-wfa-code">
<h2>Obtaining the WFA Code<a class="headerlink" href="#obtaining-the-wfa-code" title="Permalink to this headline">¶</a></h2>
<p>This github repository contains documentation only.  The full code repository is available <a class="reference external" href="https://mfix.netl.doe.gov/gitlab/tjordan/cerebrasdev/-/tree/master/WSE_Field_Equation">here</a>.
To obtain access to the code, register on the <a class="reference external" href="https://mfix.netl.doe.gov/register">MFiX website</a>
contact Terry Jordan at <a class="reference external" href="mailto:terry&#46;jordan&#37;&#52;&#48;netl&#46;doe&#46;gov">terry<span>&#46;</span>jordan<span>&#64;</span>netl<span>&#46;</span>doe<span>&#46;</span>gov</a> to be added to the privet
gitlab repository.  This process has been adopted until NETL makes a determination about the export control nature of
this work.</p>
<p>After being added to the repository, checkout the latest repo:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">git clone https://mfix.netl.doe.gov/gitlab/tjordan/cerebrasdev.git</span>
</pre></div>
</div>
</section>
<section id="running-on-neocortex">
<h2>Running on Neocortex<a class="headerlink" href="#running-on-neocortex" title="Permalink to this headline">¶</a></h2>
<p><a class="reference external" href="http://https://www.cmu.edu/psc/aibd/neocortex/">Necortex</a> is an NSF funded computer run by the Pittsburgh Supercomputing Center (PSC) and consists of a
Superdome Flex and two CS-2’s (the system that contains a WSE). PSC runs regular user solicitations
for time on Neocortex.  NETL has been working with Cerebras and PSC to ensure the WFA can run on the
Neocortex system.</p>
<p>The first thing to do is follow the instruction in the <cite>Obtaining the WFA Code</cite> section to get the repository for the
WFA set up on Neocortex.  If there is no special reason to use a different branch, checkout Master and make sure you
pull the latest changes.</p>
<p>The next thing to do is set up the container that contains the proprietary Cerebras Containers.  The WFA compiles
against the Paint and Angler compilers using Make.  The container you use will have to have this capability built in.
According to Cerebras, the SDK container at 1.8.0 and later will have this built in.  If the container installed on
the hardware is a lower version number, then one will have to obtain a custom built container from Leighton Wilson at
cerebras (reach out to him on the Neocotex Slack channel).  As of the writing of this version of the documentation
(3/24/23), Neocortex has not upgraded to 1.8.0.  Thus, users will have to generate a binary in the custom container and
then submit the run on hardware using the latest installed container on Neocortex.</p>
<section id="interactive-singularity">
<h3>Interactive Singularity<a class="headerlink" href="#interactive-singularity" title="Permalink to this headline">¶</a></h3>
<p>Throughout the development and run cycle, you will need generate images inside a singularity container.  While it is
possible to do this in batch mode, it is more convenient to launch an interactive singularity environment as several
python packages have to be installed and it can waste a lot of time to run in batch mode.</p>
<p>Because singularity is locked down, installing python packages in the normal way is not possible.  To get around this,
we create a directory which will contain python packages and then set the <code class="code docutils literal notranslate"><span class="pre">.local</span></code> path in the home directory to
this location.</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">mkdir &lt;path_to&gt;/Cerebras-extra-python-packages</span>
</pre></div>
</div>
<p>We also link the path to the WFA repository to a root level folder <code class="code docutils literal notranslate"><span class="pre">/cerebras_dev</span></code> inside the container.  If
<code class="code docutils literal notranslate"><span class="pre">&lt;path_to_repo&gt;</span></code> is set correctly, then a <code class="code docutils literal notranslate"><span class="pre">cd</span> <span class="pre">\cerebras_dev</span></code> inside the container should take you to the
top level directory of the WFA repository where the <code class="code docutils literal notranslate"><span class="pre">README.md</span></code> file exists.  <code class="code docutils literal notranslate"><span class="pre">&lt;path_to_sif_file&gt;</span></code> is either
the path to a custom sif container or the default environment variable to the installed SDK container on Neocortex
depending on if the installed container is at/above 1.8.0.</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">singularity run -B &lt;path_to&gt;/Cerebras-extra-python-packages:$HOME/.local -B &lt;path_to_repo&gt;/:/cerebras_dev &lt;path_to_sif_file&gt;</span>
</pre></div>
</div>
<p>Because we have to use the python installed in the container, if you use a python manager like Conda, you will have
to deactivate it so that <code class="code docutils literal notranslate"><span class="pre">python</span></code> points to the containers python.  For conda this is simple:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">conda deactivate</span>
</pre></div>
</div>
<p>Once this is set up, leave the terminal open so you can do development and generate simulator/hardware images.</p>
</section>
<section id="checking-installation">
<h3>Checking Installation<a class="headerlink" href="#checking-installation" title="Permalink to this headline">¶</a></h3>
<p>Now that the container environment is set up, it is good to check that the WFA is working correctly.  Inside the
terminal with the singularity container running:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">cd /cerebras_dev</span>
</pre></div>
</div>
<p>Then launch the tests by:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">python build_and_test.py</span>
</pre></div>
</div>
<p>This should install all the python dependencies and start launching the tests.  You should see output similar to this:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp"># </span>lots of install messages

<span class="go">Finished processing dependencies for WSE-Field-Equations==0.0.1</span>
<span class="go">test_FDNS_bc_Vz                                   : pass</span>
<span class="go">test_scalar_array_mul                             : pass</span>
<span class="go">test_FDNS_dVxdtau                                 : pass</span>
<span class="go">test_FDNS_bc_T                                    : pass</span>
<span class="go">test_FDNS_dt_absVx                                : pass</span>
<span class="go">test_momentum_formation                           : pass</span>
<span class="go">test_rhie_chow_interp_2                           : pass</span>
<span class="go">test_mom_with_rhie_chow                           : pass</span>
<span class="go">test_FDNS_qTy                                     : pass</span>
<span class="go">test_rectangular_diffusion_jacobi                 : pass</span>
<span class="go">test_FDNS_Ry                                      : pass</span>
<span class="go">test_FDNS_T                                       : pass</span>
<span class="go">test_neighbor_mul                                 : pass</span>
<span class="go">test_norm                                         : pass</span>
<span class="go">test_FDNS_dt_fromVx                               : pass</span>
<span class="go">test_FDNS_dt_Advection                            : pass</span>

<span class="gp"># </span>lots more tests
</pre></div>
</div>
<p>All tests should pass if installed correctly and the branch you are on shows a pass in the gitlab
runner in the online repository.  It may take 5-10 min to run all the tests depending on how many
are checked in.</p>
</section>
<section id="launching-portrait-from-neocortex">
<h3>Launching Portrait from Neocortex<a class="headerlink" href="#launching-portrait-from-neocortex" title="Permalink to this headline">¶</a></h3>
<p>If doing development on Neocortex, which is headless, one will want to launch the visual debugging tool, Portrait.</p>
<p>Navigate to the input file directory and run the input file with one of the debug level options <code class="code docutils literal notranslate"><span class="pre">-dl</span> <span class="pre">&lt;1,2,3&gt;</span></code>,
all of them will launch the Portrait web server for you:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">python &lt;input_file&gt;.py -dl &lt;1,2,3&gt;</span>
</pre></div>
</div>
<p>The last line in the console after running the debug option will look something like this:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">http://br023.ib.bridges2.psc.edu:8080/paint.html</span>
</pre></div>
</div>
<p>This is the server to connect to in the format of:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">http://&lt;server&gt;:&lt;port&gt;/paint.html</span>
</pre></div>
</div>
<p>From your local machine ssh into Neocortex:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">ssh -L &lt;port&gt;:&lt;sever&gt;:&lt;port&gt; &lt;username&gt;@bridges2.psc.edu</span>
</pre></div>
</div>
<p>Launch web browser (firefox and chrome work the best) and navigate to:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">localhost:&lt;port&gt;/paint.html</span>
</pre></div>
</div>
</section>
<section id="compiling-for-hardware-neocortex">
<h3>Compiling for Hardware Neocortex<a class="headerlink" href="#compiling-for-hardware-neocortex" title="Permalink to this headline">¶</a></h3>
<p>By default the WFA will compile and run in Simfabric (the Cerebras built hardware simulator).  To to compile
hardware, specify the hardware input name (<code class="code docutils literal notranslate"><span class="pre">-hin</span> <span class="pre">&lt;hardware_run_name&gt;</span></code>) and the make goal as bench.img
(<code class="code docutils literal notranslate"><span class="pre">-mg</span> <span class="pre">bench.image</span></code>).</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">python &lt;run_name&gt;.py -hin &lt;hardware_run_name&gt; -mg bench.img &lt;additional_args&gt;</span>
</pre></div>
</div>
<p>This will generate a tar file that contains the image (binary) that is ready to run on hardware
<code class="code docutils literal notranslate"><span class="pre">&lt;hardware_run_name&gt;.tar.gz</span></code>.  The next thing to do is move the tar file into the WFA utility directory:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">mv &lt;hardware_run_name&gt;.tar.gz /cerebras_dev/WSE_Field_Equation/util</span>
</pre></div>
</div>
<p>The job can then be submitted to Neocortex through slurm.  Make sure the <code class="code docutils literal notranslate"><span class="pre">&lt;hardware_run_name&gt;</span></code> does not include
the <code class="code docutils literal notranslate"><span class="pre">.tar.gz</span></code> extension is not included in the <code class="code docutils literal notranslate"><span class="pre">-c</span></code> option.  The <code class="code docutils literal notranslate"><span class="pre">-o</span> <span class="pre">&lt;field_variable&gt;</span></code> option
specifies the name of the <code class="code docutils literal notranslate"><span class="pre">WSE_Array</span></code> to save as output from the WSE.</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp gp-VirtualEnv">(cd /cerebras_dev/WSE_Field_Equation/util; sbatch --nodelist=sdf-&lt;1 or 2&gt; neocortex_slurm_script_bash -c &lt;hardware_run_name&gt; -o &lt;field_variable&gt;)</span>
</pre></div>
</div>
</section>
<section id="retrieving-data">
<h3>Retrieving Data<a class="headerlink" href="#retrieving-data" title="Permalink to this headline">¶</a></h3>
<p>On Neocortex, the fastest way to run is to move data off the network drives and onto the local SSD’s.  The
<code class="code docutils literal notranslate"><span class="pre">neocortex_slurm_script_bash</span></code> script will move the <code class="code docutils literal notranslate"><span class="pre">&lt;hardware_run_name&gt;.tar.gz</span></code> file to the local drive
on the super dome flex at <code class="code docutils literal notranslate"><span class="pre">/local1/&lt;project_name&gt;/&lt;hardware_run_name&gt;</span></code>.  To access this data, log into the SDF
node:
.. code-block:: console</p>
<blockquote>
<div><p>srun –nodelist=sdf-&lt;1 or 2&gt; –pty bash</p>
</div></blockquote>
<p>and navigate to the local storage</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">cd /local1/&lt;project_name&gt;/&lt;hardware_run_name&gt;</span>
</pre></div>
</div>
<p>The results will be in a series <code class="code docutils literal notranslate"><span class="pre">.ckpt</span></code> files.  If the program ran successfully and got to the end, the
<code class="code docutils literal notranslate"><span class="pre">progend.txt</span></code> file should have a <code class="code docutils literal notranslate"><span class="pre">1</span></code> in it.</p>
</section>
<section id="saving-time-dependent-data">
<h3>Saving time Dependent Data<a class="headerlink" href="#saving-time-dependent-data" title="Permalink to this headline">¶</a></h3>
<p>Multiple checkpoints can be saved out in series as the calculations are completed.  The WFA can be configured to write
out files from one loop starting at iteration <code class="code docutils literal notranslate"><span class="pre">&lt;start_iteration&gt;</span></code> and writing out every <code class="code docutils literal notranslate"><span class="pre">&lt;mod_iterations&gt;</span></code>.
To do this, the controller puts itself in a pause state and waits for the host
to check if it is ready to take data off.  If it is, the host will issue a data retrieval command and get the data off
the WSE.  This is a far from optimal solution for IO and currently uses a very slow debug interface.  It will be
replaced with a different interface that puts the host in a wait to receive mode and uses the full 1.2Tb/s data link
to bring down frame save rates to a few milliseconds and not interrupt solution progress.</p>
<p>To enable this, the <code class="code docutils literal notranslate"><span class="pre">conditional_pause</span></code> method in the loop context manager must be called.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">with</span> <span class="n">for_loop</span><span class="p">(</span><span class="s1">&#39;time_march&#39;</span><span class="p">,</span> <span class="n">args</span><span class="o">.</span><span class="n">time_steps</span><span class="p">)</span> <span class="k">as</span> <span class="n">time_march</span><span class="p">:</span>
   <span class="n">iter_counter</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="n">iter_counter</span> <span class="o">+</span> <span class="mi">1</span>
   <span class="n">T</span><span class="p">[</span><span class="mi">2</span><span class="p">:</span><span class="o">-</span><span class="mi">2</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">push_to_host</span><span class="p">(</span><span class="n">args</span><span class="o">.</span><span class="n">start_iteration_push</span><span class="p">,</span> <span class="n">args</span><span class="o">.</span><span class="n">modulo_iteration_push</span><span class="p">)</span>
   <span class="k">if</span> <span class="n">args</span><span class="o">.</span><span class="n">add_time_pause</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
       <span class="n">time_march</span><span class="o">.</span><span class="n">conditional_pause</span><span class="p">()</span>
   <span class="n">ns</span><span class="o">.</span><span class="n">_fluid_iteration</span><span class="p">(</span><span class="n">save_debug_images</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">num_reduction_lim_its</span><span class="o">=</span><span class="n">nerr</span><span class="p">,</span>
                       <span class="n">max_pseudo_its</span><span class="o">=</span><span class="n">max_pseudo_its</span><span class="p">,</span> <span class="n">fluid_tol</span><span class="o">=</span><span class="n">nl_tol</span><span class="p">)</span>
</pre></div>
</div>
<p>It is often beneficial to put this in a guard with a command line option set.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># Head of file</span>
<span class="n">wse</span> <span class="o">=</span> <span class="n">WSE_Interface</span><span class="p">()</span>
<span class="n">parser</span> <span class="o">=</span> <span class="n">wse</span><span class="o">.</span><span class="n">get_cmd_line_parser</span><span class="p">()</span>

<span class="c1"># Add Program Specific command line arguments</span>
<span class="n">parser</span><span class="o">.</span><span class="n">add_argument</span><span class="p">(</span><span class="s2">&quot;-ts&quot;</span><span class="p">,</span> <span class="s2">&quot;--time_steps&quot;</span><span class="p">,</span> <span class="n">help</span><span class="o">=</span><span class="s2">&quot;specify number of time steps&quot;</span><span class="p">,</span>
                    <span class="nb">type</span><span class="o">=</span><span class="nb">int</span><span class="p">,</span> <span class="n">default</span><span class="o">=</span><span class="mi">5</span><span class="p">)</span>
<span class="n">parser</span><span class="o">.</span><span class="n">add_argument</span><span class="p">(</span><span class="s2">&quot;-atp&quot;</span><span class="p">,</span> <span class="s2">&quot;--add_time_pause&quot;</span><span class="p">,</span>
                    <span class="n">help</span><span class="o">=</span><span class="s2">&quot;adds a time march pause to save data&quot;</span><span class="p">,</span> <span class="nb">type</span><span class="o">=</span><span class="nb">int</span><span class="p">,</span>
                    <span class="n">default</span><span class="o">=-</span><span class="mi">1</span><span class="p">)</span>

<span class="c1"># Some point after all the arguments are added</span>
<span class="n">args</span> <span class="o">=</span> <span class="n">wse</span><span class="o">.</span><span class="n">get_available_cmd_args</span><span class="p">()</span>

<span class="c1"># Rest of problem setup</span>
</pre></div>
</div>
<p>In this example, the program code would get compiled with a <code class="code docutils literal notranslate"><span class="pre">-atp</span> <span class="pre">1</span></code> set on the command line and
<code class="code docutils literal notranslate"><span class="pre">-ts</span> <span class="pre">&lt;max_time_steps&gt;</span></code>.</p>
<p>Then to launch the job on Neocortex, additional command line arguments would be set in the submission.</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp gp-VirtualEnv">(cd /cerebras_dev/WSE_Field_Equation/util; sbatch --nodelist=sdf-&lt;1 or 2&gt; neocortex_slurm_script_bash -c &lt;hardware_run_name&gt; -o &lt;field_variable&gt; -s &lt;start_iteration&gt; -p &lt;mod_iterations&gt;)</span>
</pre></div>
</div>
<p>This allows one to set up saving data over a given time period.  For example setting <code class="code docutils literal notranslate"><span class="pre">&lt;start_iteration&gt;</span> <span class="pre">=</span> <span class="pre">100</span></code>,
<code class="code docutils literal notranslate"><span class="pre">&lt;mod_iterations&gt;</span> <span class="pre">=</span> <span class="pre">10</span></code>, and compiling with <code class="code docutils literal notranslate"><span class="pre">&lt;max_time_steps&gt;</span> <span class="pre">=</span> <span class="pre">200</span></code> will output 11 <code class="code docutils literal notranslate"><span class="pre">.ckpt</span></code>, equally
spaced at time steps between 100 and 200.</p>
</section>
<section id="converting-checkpoints-to-vtr">
<h3>Converting Checkpoints to VTR<a class="headerlink" href="#converting-checkpoints-to-vtr" title="Permalink to this headline">¶</a></h3>
<p>Terry write this section</p>
</section>
</section>
<section id="useful-tools-and-methods">
<h2>Useful Tools and Methods<a class="headerlink" href="#useful-tools-and-methods" title="Permalink to this headline">¶</a></h2>
<p>Several runtime environments are headless which makes doing development work difficult.  Here are a few useful tools
to make this easier.</p>
<section id="custom-spyder-ide">
<h3>Custom Spyder IDE<a class="headerlink" href="#custom-spyder-ide" title="Permalink to this headline">¶</a></h3>
<p>NETL is maintaining a custom version of the Spyder IDE which supports syntax
highlighting for WSE kernel code.  Installation can be done with conda by following the
instructions below:</p>
<ol class="arabic simple">
<li><p>Follow the instructions in the “Obtaining the Code” section</p></li>
<li><p>clone the repository from the <a class="reference external" href="https://mfix.netl.doe.gov/gitlab/tjordan/spyder/-/tree/wse_support">gitlab</a> repository</p></li>
<li><p>check out the v.5.4.2_wse branch</p></li>
<li><p>navigate to the folder with the setup.py and env.yml files</p></li>
<li><p>run <code class="code docutils literal notranslate"><span class="pre">conda</span> <span class="pre">env</span> <span class="pre">create</span> <span class="pre">-f</span> <span class="pre">env.yml</span> <span class="pre">--name</span> <span class="pre">spyder</span></code> on linux or <code class="code docutils literal notranslate"><span class="pre">conda</span> <span class="pre">env</span> <span class="pre">create</span> <span class="pre">-f</span> <span class="pre">env_win.yml</span> <span class="pre">--name</span> <span class="pre">spyder</span></code> on windows</p></li>
<li><p>run <code class="code docutils literal notranslate"><span class="pre">conda</span> <span class="pre">activate</span> <span class="pre">spyder</span></code></p></li>
<li><p>run <code class="code docutils literal notranslate"><span class="pre">python</span> <span class="pre">setup.py</span> <span class="pre">install</span></code></p></li>
<li><p>run <code class="code docutils literal notranslate"><span class="pre">spyder</span></code> on linux or <code class="code docutils literal notranslate"><span class="pre">spyder.bat</span></code> in the <code class="code docutils literal notranslate"><span class="pre">path/to/spyder/repository/scripts</span></code> directory in windows</p></li>
</ol>
</section>
<section id="sshfs">
<h3>sshfs<a class="headerlink" href="#sshfs" title="Permalink to this headline">¶</a></h3>
<p>sshfs is very handy for doing remote development as it allows one to mount a remote directory over standard ssh interfaces.
Follow the instructions <a class="reference external" href="https://phoenixnap.com/kb/sshfs">here</a> to get it set up.  It has been tested and works with
Neocortex.  This will allow you to edit files remotely in whatever editor you choose. Once installed do the following:</p>
<section id="neocortex-from-linux">
<h4>Neocortex from Linux<a class="headerlink" href="#neocortex-from-linux" title="Permalink to this headline">¶</a></h4>
<p>First, make a directory to mount</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">sudo mkdir /mnt/&lt;mount_name&gt;</span>
</pre></div>
</div>
<p>Next mount whatever directory you wish</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">sudo sshfs &lt;user_name&gt;@neocortex.psc.edu:&lt;path/to/directory&gt; /mnt/&lt;mount_name&gt;</span>
</pre></div>
</div>
</section>
<section id="neocortex-from-windows">
<h4>Neocortex from Windows<a class="headerlink" href="#neocortex-from-windows" title="Permalink to this headline">¶</a></h4>
<ol class="arabic simple">
<li><p>Open the file browser</p></li>
<li><p>Right click on <cite>This PC</cite></p></li>
<li><p>Select <cite>Map Network Drive…</cite></p></li>
<li><p>Select a drive letter</p></li>
<li><p>Paste the following (with correct substitutions) in the <cite>Folder:</cite> text box</p></li>
</ol>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">\\sshfs &lt;user_name&gt;@neocortex.psc.edu[\&lt;path\to\directory&gt;]</span>
</pre></div>
</div>
</section>
</section>
<section id="pycharm">
<h3>Pycharm<a class="headerlink" href="#pycharm" title="Permalink to this headline">¶</a></h3>
<p>Pycharm is another IDE similar to Spyder.  It has a useful feature in that it will render <code class="code docutils literal notranslate"><span class="pre">.rst</span></code> files and has
some minimal word processing capabilities.  This makes it very good for editing Sphinx documentation files.</p>
<p>To install:</p>
<ol class="arabic simple">
<li><p>get the latest community edition <a class="reference external" href="https://www.jetbrains.com/pycharm/download/#section=linux">here</a>.</p></li>
<li><p>untar the file</p></li>
<li><p>run with <code class="code docutils literal notranslate"><span class="pre">sh</span> <span class="pre">&lt;path_to_pycharm&gt;\bin\pycharm.sh</span></code></p></li>
</ol>
</section>
</section>
</section>
<section id="simple-diffusion-example">
<h1>Simple Diffusion Example<a class="headerlink" href="#simple-diffusion-example" title="Permalink to this headline">¶</a></h1>
<p>This package is designed to allow practitioners to easily program the Wafer Scale Engine to
solve Field Equations at an exceptionally rapid pace with high energy efficiency.  This equation
can be solved both explicitly and implicitly with linear discretization to second order accuracy. The
WFA package is capable of solving both explicit and implicit formulations.</p>
<p>The governing equation for diffusion without convection takes a simple Laplacian form and is one of the
most common field equations that relates the time rate of change of a scalar field to its spatial distribution,
known as Fick’s second law.  Here, <span class="math notranslate nohighlight">\(\alpha\)</span> is the conductivity.</p>
<div class="math notranslate nohighlight">
\[\frac{\partial T}{\partial t} =  \alpha \nabla^2 T = \alpha \left(\frac{\partial^2 T}{\partial x^2} + \frac{\partial^2 T}{\partial y^2} + \frac{\partial^2 T}{\partial z^2}\right)\]</div>
<section id="solving-explicitly">
<h2>Solving Explicitly<a class="headerlink" href="#solving-explicitly" title="Permalink to this headline">¶</a></h2>
<p>With explicit linear discretization on a cartesian, uniform grid, the diffusion equation simplifies to:</p>
<div class="math notranslate nohighlight">
\[T_i^{n+1} = c\left(T_E^n + T_W^n + T_N^n + T_S^n + T_T^n + T_B^n \right) + \left( 1 - 6c\right) T_i^n\]</div>
<div class="math notranslate nohighlight">
\[c = \frac{\alpha \left(\Delta t \right)}{\left(\Delta l \right)^2}\]</div>
<p>The equations will remain stable when:</p>
<div class="math notranslate nohighlight">
\[3c &lt; 0.5\]</div>
<p>From the stability criteria, it is clear that the allowable time step is proportional
to the square of the voxel length scale and inversely proportional to the conductivity.
Explicit solutions are very useful for large voxel size problems and/or those with
low conductivity.  Common applications for explicit solutions are weather and reservoir
modeling where voxel sizes are large and conductivity is low.</p>
<p>The following code shows how to solve a generic diffusion equation explicitly in the
WFA.</p>
<p>file name: rectangular_diffusion_explicit.py</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">WSE_FE.WSE_Interface</span> <span class="kn">import</span> <span class="n">WSE_Interface</span>
<span class="kn">from</span> <span class="nn">WSE_FE.WSE_Array</span> <span class="kn">import</span> <span class="n">WSE_Array</span>
<span class="kn">from</span> <span class="nn">WSE_FE.WSE_Loops</span> <span class="kn">import</span> <span class="n">WSE_For_loop</span>
<span class="kn">import</span> <span class="nn">NumPy</span> <span class="k">as</span> <span class="nn">np</span>

<span class="n">wse</span> <span class="o">=</span> <span class="n">WSE_Interface</span><span class="p">()</span>
<span class="n">parser</span> <span class="o">=</span> <span class="n">wse</span><span class="o">.</span><span class="n">get_cmd_line_parser</span><span class="p">()</span>

<span class="c1"># Define constansts</span>
<span class="n">c</span> <span class="o">=</span> <span class="mf">0.1</span>
<span class="n">center</span> <span class="o">=</span> <span class="mf">1.0</span> <span class="o">-</span> <span class="mf">6.0</span> <span class="o">*</span> <span class="n">c</span>

<span class="c1"># Add CFD specific command line arguments</span>
<span class="n">parser</span><span class="o">.</span><span class="n">add_argument</span><span class="p">(</span><span class="s2">&quot;-x&quot;</span><span class="p">,</span><span class="s2">&quot;--x&quot;</span><span class="p">,</span> <span class="n">help</span><span class="o">=</span><span class="s2">&quot;specify x dimension&quot;</span><span class="p">,</span> <span class="nb">type</span><span class="o">=</span><span class="nb">int</span><span class="p">,</span> <span class="n">default</span><span class="o">=</span><span class="mi">10</span><span class="p">)</span>
<span class="n">parser</span><span class="o">.</span><span class="n">add_argument</span><span class="p">(</span><span class="s2">&quot;-y&quot;</span><span class="p">,</span><span class="s2">&quot;--y&quot;</span><span class="p">,</span> <span class="n">help</span><span class="o">=</span><span class="s2">&quot;specify y dimension&quot;</span><span class="p">,</span> <span class="nb">type</span><span class="o">=</span><span class="nb">int</span><span class="p">,</span> <span class="n">default</span><span class="o">=</span><span class="mi">10</span><span class="p">)</span>
<span class="n">parser</span><span class="o">.</span><span class="n">add_argument</span><span class="p">(</span><span class="s2">&quot;-z&quot;</span><span class="p">,</span> <span class="s2">&quot;--z&quot;</span><span class="p">,</span> <span class="n">help</span><span class="o">=</span><span class="s2">&quot;specify z dimension&quot;</span><span class="p">,</span> <span class="nb">type</span><span class="o">=</span><span class="nb">int</span><span class="p">,</span> <span class="n">default</span><span class="o">=</span><span class="mi">10</span><span class="p">)</span>
<span class="n">parser</span><span class="o">.</span><span class="n">add_argument</span><span class="p">(</span><span class="s2">&quot;-ts&quot;</span><span class="p">,</span><span class="s2">&quot;--time_steps&quot;</span><span class="p">,</span> <span class="n">help</span><span class="o">=</span><span class="s2">&quot;specify number of time steps&quot;</span><span class="p">,</span> <span class="nb">type</span><span class="o">=</span><span class="nb">int</span><span class="p">,</span> <span class="n">default</span><span class="o">=</span><span class="mi">5</span><span class="p">)</span>
<span class="n">args</span> <span class="o">=</span> <span class="n">wse</span><span class="o">.</span><span class="n">get_available_cmd_args</span><span class="p">()</span>


<span class="c1"># Create the initial Temperature field</span>
<span class="n">T_init</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">ones</span><span class="p">((</span><span class="n">args</span><span class="o">.</span><span class="n">x</span><span class="p">,</span><span class="n">args</span><span class="o">.</span><span class="n">y</span><span class="p">,</span><span class="n">args</span><span class="o">.</span><span class="n">z</span><span class="p">))</span>

<span class="c1">#Set Boundary Conditions</span>
<span class="n">T_init</span><span class="p">[</span><span class="mi">1</span><span class="p">:</span><span class="o">-</span><span class="mi">1</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">:</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span> <span class="o">=</span> <span class="mf">1.0</span>
<span class="n">T_init</span><span class="p">[</span><span class="mi">1</span><span class="p">:</span><span class="o">-</span><span class="mi">1</span><span class="p">,</span><span class="o">-</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">:</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span> <span class="o">=</span> <span class="mf">1.0</span>
<span class="n">T_init</span><span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">:</span><span class="o">-</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">:</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span> <span class="o">=</span> <span class="mf">1.0</span>
<span class="n">T_init</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">:</span><span class="o">-</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">:</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span> <span class="o">=</span> <span class="mf">1.0</span>
<span class="n">T_init</span><span class="p">[</span><span class="mi">1</span><span class="p">:</span><span class="o">-</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">:</span><span class="o">-</span><span class="mi">1</span><span class="p">,</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="mf">0.0</span>
<span class="n">T_init</span><span class="p">[</span><span class="mi">1</span><span class="p">:</span><span class="o">-</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">:</span><span class="o">-</span><span class="mi">1</span><span class="p">,</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span> <span class="o">=</span> <span class="mf">0.0</span>

<span class="c1"># Instantiate the WSE Array objects needed</span>
<span class="n">T_n</span> <span class="o">=</span> <span class="n">WSE_Array</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s1">&#39;T_n&#39;</span><span class="p">,</span> <span class="n">initData</span><span class="o">=</span><span class="n">T_init</span><span class="p">)</span>

<span class="c1"># Start looping over time</span>
<span class="k">with</span> <span class="n">WSE_For_loop</span><span class="p">(</span><span class="s1">&#39;time_loop&#39;</span><span class="p">,</span> <span class="n">args</span><span class="o">.</span><span class="n">time_steps</span><span class="p">):</span>
    <span class="c1"># Update T from current values</span>
    <span class="n">T_n</span><span class="p">[</span><span class="mi">1</span><span class="p">:</span><span class="o">-</span><span class="mi">1</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="n">center</span> <span class="o">*</span> <span class="n">T_n</span><span class="p">[</span><span class="mi">1</span><span class="p">:</span><span class="o">-</span><span class="mi">1</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">]</span>\
                    <span class="o">+</span> <span class="n">c</span><span class="o">*</span><span class="p">(</span><span class="n">T_n</span><span class="p">[</span><span class="mi">2</span><span class="p">:,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">]</span> <span class="o">+</span> <span class="n">T_n</span><span class="p">[:</span><span class="o">-</span><span class="mi">2</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">]</span> \
                       <span class="o">+</span> <span class="n">T_n</span><span class="p">[</span><span class="mi">1</span><span class="p">:</span><span class="o">-</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">0</span><span class="p">]</span> <span class="o">+</span> <span class="n">T_n</span><span class="p">[</span><span class="mi">1</span><span class="p">:</span><span class="o">-</span><span class="mi">1</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span> \
                       <span class="o">+</span> <span class="n">T_n</span><span class="p">[</span><span class="mi">1</span><span class="p">:</span><span class="o">-</span><span class="mi">1</span><span class="p">,</span><span class="o">-</span><span class="mi">1</span><span class="p">,</span><span class="mi">0</span><span class="p">]</span> <span class="o">+</span> <span class="n">T_n</span><span class="p">[</span><span class="mi">1</span><span class="p">:</span><span class="o">-</span><span class="mi">1</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">])</span>

<span class="c1"># Compile, run, and validate</span>
<span class="n">wse</span><span class="o">.</span><span class="n">make_WSE</span><span class="p">(</span><span class="n">answer</span><span class="o">=</span><span class="n">T_n</span><span class="p">)</span>
</pre></div>
</div>
<p>From the command line run:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>python rectangular_diffusion_explicit.py
</pre></div>
</div>
<p>And it will produce an output similar to:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">********************* Starting Make ***********************</span>
<span class="go">********************* Writing binary input files ***********************</span>
<span class="go">    Total vectors to write:  3</span>
<span class="go">    Total Data to Write (MB):  0.012</span>
<span class="go">    Total T_bin to Write (MB):  0.00768</span>
<span class="go">**************** Done writing binary input files ***********************</span>
<span class="go">********************* Started Host Validation ***********************</span>
<span class="go">********************* Done Host Validation ***********************</span>
<span class="go">********************* Running Cerebras Tools ***********************</span>
<span class="go">examples                :  0:01.42 PASS smoke [ H=4 W=4 D=100 NC=8 NArgs=6 COMPILER=angler ]</span>
<span class="go">********************* Finished Running Cerebras Tools ***********************</span>
<span class="go">********************* Done Make ***********************</span>
</pre></div>
</div>
</section>
<section id="solving-implicitly">
<h2>Solving Implicitly<a class="headerlink" href="#solving-implicitly" title="Permalink to this headline">¶</a></h2>
<p>Implicit methods can allow for larger time steps.  The fully implicit formulation with linear discretization
and a uniform grid simplified to:</p>
<div class="math notranslate nohighlight">
\[T_i^{n+1} - \frac{c}{1+6c} \left(T_E^{n+1} + T_W^{n+1} + T_N^{n+1} + T_S^{n+1} + T_T^{n+1} + T_B^{n+1} \right) = \frac{1.0}{\left( 1 - 6c\right)} T_i^n\]</div>
<p>The convergence criteria for an implicit method is diagonal dominance.  In this case: <span class="math notranslate nohighlight">\(1 \geq \frac{6c}{1+6c}\)</span>
which is always met.  This equation will converge, even if slowly, regardless of the conductivity or cell length scale.</p>
<p>The following code shows how to solve a generic diffusion equation implicitly in the
WFA.</p>
<p>file name: rectangular_diffusion.py</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">WSE_FE.WSE_Interface</span> <span class="kn">import</span> <span class="n">WSE_Interface</span>
<span class="kn">from</span> <span class="nn">WSE_FE.WSE_Array</span> <span class="kn">import</span> <span class="n">WSE_Array</span>
<span class="kn">from</span> <span class="nn">WSE_FE.WSE_Loops</span> <span class="kn">import</span> <span class="n">WSE_For_loop</span>

<span class="kn">from</span> <span class="nn">WSE_FE.WSE_Solver</span> <span class="kn">import</span> <span class="n">CgConstantOffDiag</span><span class="p">,</span> <span class="n">JacobiConstantOffDiag</span>
<span class="kn">import</span> <span class="nn">NumPy</span> <span class="k">as</span> <span class="nn">np</span>

<span class="n">wse</span> <span class="o">=</span> <span class="n">WSE_Interface</span><span class="p">()</span>
<span class="n">parser</span> <span class="o">=</span> <span class="n">wse</span><span class="o">.</span><span class="n">get_cmd_line_parser</span><span class="p">()</span>

<span class="n">c</span> <span class="o">=</span> <span class="mf">0.1</span>
<span class="n">off_diag_coeff</span> <span class="o">=</span> <span class="o">-</span><span class="n">c</span><span class="o">/</span><span class="p">(</span><span class="mf">1.0</span><span class="o">+</span><span class="mf">6.0</span><span class="o">*</span><span class="n">c</span><span class="p">)</span>
<span class="n">source_center_coeff</span> <span class="o">=</span> <span class="mf">1.0</span><span class="o">/</span><span class="p">(</span><span class="mf">1.0</span><span class="o">+</span><span class="mf">6.0</span><span class="o">*</span><span class="n">c</span><span class="p">)</span>

<span class="c1">#Add CFD Specific command line arguments</span>
<span class="n">parser</span><span class="o">.</span><span class="n">add_argument</span><span class="p">(</span><span class="s2">&quot;-x&quot;</span><span class="p">,</span><span class="s2">&quot;--x&quot;</span><span class="p">,</span> <span class="n">help</span><span class="o">=</span><span class="s2">&quot;specify x dimension&quot;</span><span class="p">,</span> <span class="nb">type</span><span class="o">=</span><span class="nb">int</span><span class="p">,</span> <span class="n">default</span><span class="o">=</span><span class="mi">10</span><span class="p">)</span>
<span class="n">parser</span><span class="o">.</span><span class="n">add_argument</span><span class="p">(</span><span class="s2">&quot;-y&quot;</span><span class="p">,</span><span class="s2">&quot;--y&quot;</span><span class="p">,</span> <span class="n">help</span><span class="o">=</span><span class="s2">&quot;specify y dimension&quot;</span><span class="p">,</span> <span class="nb">type</span><span class="o">=</span><span class="nb">int</span><span class="p">,</span> <span class="n">default</span><span class="o">=</span><span class="mi">10</span><span class="p">)</span>
<span class="n">parser</span><span class="o">.</span><span class="n">add_argument</span><span class="p">(</span><span class="s2">&quot;-z&quot;</span><span class="p">,</span> <span class="s2">&quot;--z&quot;</span><span class="p">,</span> <span class="n">help</span><span class="o">=</span><span class="s2">&quot;specify z dimension&quot;</span><span class="p">,</span> <span class="nb">type</span><span class="o">=</span><span class="nb">int</span><span class="p">,</span> <span class="n">default</span><span class="o">=</span><span class="mi">10</span><span class="p">)</span>
<span class="n">parser</span><span class="o">.</span><span class="n">add_argument</span><span class="p">(</span><span class="s2">&quot;-ts&quot;</span><span class="p">,</span><span class="s2">&quot;--time_steps&quot;</span><span class="p">,</span> <span class="n">help</span><span class="o">=</span><span class="s2">&quot;specify number of time steps&quot;</span><span class="p">,</span> <span class="nb">type</span><span class="o">=</span><span class="nb">int</span><span class="p">,</span> <span class="n">default</span><span class="o">=</span><span class="mi">5</span><span class="p">)</span>
<span class="n">parser</span><span class="o">.</span><span class="n">add_argument</span><span class="p">(</span><span class="s2">&quot;-s&quot;</span><span class="p">,</span><span class="s2">&quot;--solver&quot;</span><span class="p">,</span> <span class="n">help</span><span class="o">=</span><span class="s2">&quot;the solver to use (Cg or Jacobi with constant off diagonal)&quot;</span><span class="p">,</span> <span class="nb">type</span><span class="o">=</span><span class="nb">str</span><span class="p">,</span> <span class="n">default</span><span class="o">=</span><span class="s1">&#39;Cg&#39;</span><span class="p">)</span>
<span class="n">args</span> <span class="o">=</span> <span class="n">wse</span><span class="o">.</span><span class="n">get_available_cmd_args</span><span class="p">()</span>

<span class="k">if</span> <span class="n">args</span><span class="o">.</span><span class="n">solver</span> <span class="o">==</span> <span class="s1">&#39;Cg&#39;</span><span class="p">:</span>
    <span class="n">solver</span> <span class="o">=</span> <span class="n">CgConstantOffDiag</span><span class="p">(</span><span class="n">args</span><span class="o">.</span><span class="n">x</span><span class="p">,</span> <span class="n">args</span><span class="o">.</span><span class="n">y</span><span class="p">,</span> <span class="n">args</span><span class="o">.</span><span class="n">z</span><span class="p">)</span>
<span class="k">elif</span> <span class="n">args</span><span class="o">.</span><span class="n">solver</span> <span class="o">==</span> <span class="s1">&#39;Jacobi&#39;</span><span class="p">:</span>
    <span class="n">solver</span> <span class="o">=</span> <span class="n">JacobiConstantOffDiag</span><span class="p">(</span><span class="n">args</span><span class="o">.</span><span class="n">x</span><span class="p">,</span> <span class="n">args</span><span class="o">.</span><span class="n">y</span><span class="p">,</span> <span class="n">args</span><span class="o">.</span><span class="n">z</span><span class="p">)</span>

<span class="c1">#Create the initial Temperature field</span>
<span class="n">T_init</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">ones</span><span class="p">((</span><span class="n">args</span><span class="o">.</span><span class="n">x</span><span class="p">,</span><span class="n">args</span><span class="o">.</span><span class="n">y</span><span class="p">,</span><span class="n">args</span><span class="o">.</span><span class="n">z</span><span class="p">))</span>

<span class="n">T_init</span><span class="p">[</span><span class="mi">1</span><span class="p">:</span><span class="o">-</span><span class="mi">1</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">:</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span> <span class="o">=</span> <span class="mf">1.0</span>
<span class="n">T_init</span><span class="p">[</span><span class="mi">1</span><span class="p">:</span><span class="o">-</span><span class="mi">1</span><span class="p">,</span><span class="o">-</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">:</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span> <span class="o">=</span> <span class="mf">1.0</span>
<span class="n">T_init</span><span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">:</span><span class="o">-</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">:</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span> <span class="o">=</span> <span class="mf">1.0</span>
<span class="n">T_init</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">:</span><span class="o">-</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">:</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span> <span class="o">=</span> <span class="mf">1.0</span>
<span class="n">T_init</span><span class="p">[</span><span class="mi">1</span><span class="p">:</span><span class="o">-</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">:</span><span class="o">-</span><span class="mi">1</span><span class="p">,</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="mf">0.0</span>
<span class="n">T_init</span><span class="p">[</span><span class="mi">1</span><span class="p">:</span><span class="o">-</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">:</span><span class="o">-</span><span class="mi">1</span><span class="p">,</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span> <span class="o">=</span> <span class="mf">0.0</span>

<span class="c1">#Instantiate the WSE Array objects needed</span>
<span class="n">T_n</span> <span class="o">=</span> <span class="n">WSE_Array</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s1">&#39;T_n&#39;</span><span class="p">,</span> <span class="n">initData</span><span class="o">=</span><span class="n">T_init</span><span class="p">)</span>

<span class="k">if</span> <span class="n">args</span><span class="o">.</span><span class="n">solver</span> <span class="o">==</span> <span class="s1">&#39;Cg&#39;</span><span class="p">:</span>
    <span class="n">b</span> <span class="o">=</span> <span class="n">wse</span><span class="o">.</span><span class="n">get_named_array</span><span class="p">(</span><span class="s1">&#39;program_scratch_2&#39;</span><span class="p">)</span>
<span class="k">else</span><span class="p">:</span>
    <span class="n">b</span> <span class="o">=</span> <span class="n">WSE_Array</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s1">&#39;b&#39;</span><span class="p">,</span> <span class="n">initData</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">zeros</span><span class="p">((</span><span class="n">args</span><span class="o">.</span><span class="n">x</span><span class="p">,</span><span class="n">args</span><span class="o">.</span><span class="n">y</span><span class="p">,</span><span class="n">args</span><span class="o">.</span><span class="n">z</span><span class="p">)))</span>


<span class="k">with</span> <span class="n">WSE_For_loop</span><span class="p">(</span><span class="s1">&#39;time_loop&#39;</span><span class="p">,</span> <span class="n">args</span><span class="o">.</span><span class="n">time_steps</span><span class="p">):</span>
    <span class="c1"># calculate the source terms</span>
    <span class="n">b</span><span class="p">[</span><span class="mi">1</span><span class="p">:</span><span class="o">-</span><span class="mi">1</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="n">source_center_coeff</span><span class="o">*</span><span class="n">T_n</span><span class="p">[</span><span class="mi">1</span><span class="p">:</span><span class="o">-</span><span class="mi">1</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">]</span>

    <span class="c1"># run the generalized CG solver</span>
    <span class="n">T_n</span> <span class="o">=</span> <span class="n">solver</span><span class="o">.</span><span class="n">solve</span><span class="p">(</span><span class="n">T_n</span><span class="p">,</span> <span class="n">off_diag_coeff</span><span class="p">,</span> <span class="n">b</span><span class="p">,</span> <span class="mf">0.001</span><span class="p">)</span>

<span class="n">wse</span><span class="o">.</span><span class="n">make_WSE</span><span class="p">(</span><span class="n">answer</span><span class="o">=</span><span class="n">T_n</span><span class="p">)</span>
</pre></div>
</div>
<p>From the command line run:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>python rectangular_diffusion.py
</pre></div>
</div>
<p>And it will produce an output similar to:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">********************* Starting Make ***********************</span>
<span class="go">********************* Writing binary input files ***********************</span>
<span class="go">    Total vectors to write:  6</span>
<span class="go">    Total Data to Write (MB):  0.024</span>
<span class="go">    Total T_bin to Write (MB):  0.01536</span>
<span class="go">**************** Done writing binary input files ***********************</span>
<span class="go">********************* Started Host Validation ***********************</span>
<span class="go">********************* Done Host Validation ***********************</span>
<span class="go">********************* Running Cerebras Tools ***********************</span>
<span class="go">examples                :  0:03.71 PASS smoke [ H=4 W=4 D=100 NC=8 NArgs=6 COMPILER=angler ]</span>
<span class="go">********************* Finished Running Cerebras Tools ***********************</span>
<span class="go">********************* Done Make ***********************</span>
</pre></div>
</div>
</section>
</section>
<section id="command-line-arguments">
<h1>Command Line Arguments<a class="headerlink" href="#command-line-arguments" title="Permalink to this headline">¶</a></h1>
<p>The WFA uses the argparse library to automatically add compiler options
to any script that calls the WSE_FE.WSE_Interface.WSE_Interface.make_WSE method.
This feature enables rapid development, supports debugging, and compiling larges
scale executables for hardware runs with just a few keystrokes.</p>
<p>Just add <cite>-h</cite> behind any python script with the make_WSE method called in it to
get a help menu.  It is possible to add domain specific command line arguments
to a program with the <cite>get_cmd_line_parser</cite> and <cite>get_available_cmd_args</cite> methods
as seen in the above examples.  Use the WSE_Interface.str_to_bool method in as the input to
the type keyword argument in the parser.add_argument method for boolean inputs.</p>
<p>The <cite>-h</cite> option will produce an output similar to:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">usage: test_center_add.py [-h] [-dl DEBUG_LEVEL] [-lp LAUNCH_PORTRAIT]</span>
<span class="go">              [-mg MAKE_GOAL] [-vr VERIFY_RESULT]</span>
<span class="go">              [-ptv PRINT_TILE_VERIFICATION]</span>
<span class="go">              [-hin HARDWARE_IMAGE_NAME]</span>
<span class="go">              [-ast ANALYZE_SIMULATOR_TIMESTAMPS]</span>
<span class="go">              [-hon HARDWARE_OUTPUT_NAME] [-to TIMEOUT]</span>
<span class="go">              [-att ADD_TASK_TAGS] [-ts32 TIME_STAMPS_32BIT]</span>
<span class="go">              [-ts16 TIME_STAMPS_16BIT] [-tsm TIME_STAMP_MODULO]</span>
<span class="go">              [-ppc POWER_PERFORMANCE_COUNTER]</span>
<span class="go">              [-dml DISPLAY_MAKE_LOG] [-x X] [-y Y] [-z Z]</span>

<span class="go">Command Line Parser for WSE Interface</span>

<span class="go">optional arguments:</span>
<span class="go">  -h, --help            show this help message and exit</span>
<span class="go">  -dl DEBUG_LEVEL, --debug_level DEBUG_LEVEL</span>
<span class="go">                        Sets the level of debug. 0:off 1:create portrait files</span>
<span class="go">                        2:JOB=-</span>
<span class="go">  -lp LAUNCH_PORTRAIT, --launch_portrait LAUNCH_PORTRAIT</span>
<span class="go">                        launches portrait</span>
<span class="go">  -mg MAKE_GOAL, --make_goal MAKE_GOAL</span>
<span class="go">                        specify make goal</span>
<span class="go">  -vr VERIFY_RESULT, --verify_result VERIFY_RESULT</span>
<span class="go">                        toggle verification of results through NumPy</span>
<span class="go">  -ptv PRINT_TILE_VERIFICATION, --print_tile_verification PRINT_TILE_VERIFICATION</span>
<span class="go">                        enables printing the memory space from the host during</span>
<span class="go">                        validation. Specify Tx.y where x and y are the tile</span>
<span class="go">                        coordinates from passing</span>
<span class="go">  -hin HARDWARE_IMAGE_NAME, --hardware_image_name HARDWARE_IMAGE_NAME</span>
<span class="go">                        specifying a name creates files for a hardware run</span>
<span class="go">  -ast ANALYZE_SIMULATOR_TIMESTAMPS, --analyze_simulator_timestamps ANALYZE_SIMULATOR_TIMESTAMPS</span>
<span class="go">                        turns on analysis of time stamps from Simfabric</span>
<span class="go">  -hon HARDWARE_OUTPUT_NAME, --hardware_output_name HARDWARE_OUTPUT_NAME</span>
<span class="go">                        specifying on output image name turns on hardware</span>
<span class="go">                        analysis</span>
<span class="go">  -to TIMEOUT, --timeout TIMEOUT</span>
<span class="go">                        specifies the allowable time for a Simfabric run</span>
<span class="go">  -att ADD_TASK_TAGS, --add_task_tags ADD_TASK_TAGS</span>
<span class="go">                        compiles task tags into ag files for debugging</span>
<span class="go">  -ts32 TIME_STAMPS_32BIT, --time_stamps_32bit TIME_STAMPS_32BIT</span>
<span class="go">                        set time stamps to 32 bit recording</span>
<span class="go">  -ts16 TIME_STAMPS_16BIT, --time_stamps_16bit TIME_STAMPS_16BIT</span>
<span class="go">                        set time stamps to 16 bit recording</span>
<span class="go">  -tsm TIME_STAMP_MODULO, --time_stamp_modulo TIME_STAMP_MODULO</span>
<span class="go">                        specify the frequency of recording time stamps</span>
<span class="go">  -ppc POWER_PERFORMANCE_COUNTER, --power_performance_counter POWER_PERFORMANCE_COUNTER</span>
<span class="go">                        turns on power performance counter recording</span>
<span class="go">  -dml DISPLAY_MAKE_LOG, --display_make_log DISPLAY_MAKE_LOG</span>
<span class="go">                        displays make log from wse make</span>
<span class="go">  -x X, --x X           specify x dimension</span>
<span class="go">  -y Y, --y Y           specify y dimension</span>
<span class="go">  -z Z, --z Z           specify z dimension</span>
</pre></div>
</div>
<section id="running-scripts-for-development">
<h2>Running Scripts for Development<a class="headerlink" href="#running-scripts-for-development" title="Permalink to this headline">¶</a></h2>
<p>Running the script without any command line options will cause the API to create the
.ag, .paint, and Makefile, compile the code into a binary, run the
hardware simulator (Simfabric) and compare the output to a NumPy based
validation code within the API.  The correct result is specified in
make_wse through the <cite>answer</cite> keyword argument.</p>
<p>This configuration is a great way to debug the code during development.
It is not recommended that the problem size be very large if run in this mode.
Simfabric is very useful, but it is not very fast and can consume considerable
memory if the problem size is set to a large size.</p>
<p>If the code ran successfully and produced the same answer as the validation code it will produce an output
similar to:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">********************* Starting Make ***********************</span>
<span class="go">********************* Writing binary input files ***********************</span>
<span class="go">    Total vectors to write:  6</span>
<span class="go">    Total Data to Write (MB):  0.024</span>
<span class="go">    Total T_bin to Write (MB):  0.01536</span>
<span class="go">**************** Done writing binary input files ***********************</span>
<span class="go">********************* Started Host Validation ***********************</span>
<span class="go">********************* Done Host Validation ***********************</span>
<span class="go">********************* Running Cerebras Tools ***********************</span>
<span class="go">examples                :  0:03.71 PASS smoke [ H=4 W=4 D=100 NC=8 NArgs=6 COMPILER=angler ]</span>
<span class="go">********************* Finished Running Cerebras Tools ***********************</span>
<span class="go">********************* Done Make ***********************</span>
</pre></div>
</div>
<p>The PASS indicates that Simfabric ran and the validation/Simfabric output provided in <cite>answer</cite> were identical.</p>
</section>
<section id="debugging">
<h2>Debugging<a class="headerlink" href="#debugging" title="Permalink to this headline">¶</a></h2>
<p>The following command line set is quite useful.  The <cite>-ptv T4.5</cite> option causes the validation
code to print out the source and destination memory space for the tile at coordinates of  (4,5)
in validation.txt for every operation.  This can then be compared to the Cerebras
debug tool, Portrait, for each operation to debug the code.  The -dl 1 option launches
the portrait sever which can be connected to in a browser at <cite>http://localhost:8080/paint.html</cite></p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>python test_add.py -ptv T4.5 -dl <span class="m">1</span>
</pre></div>
</div>
<p>Setting debug_level to 2 is equivalent to setting <cite>GOAL=debug JOB=-</cite> flags in the Cerebras make process.
This will cause Simfabric to dump out detailed log files and launch the Portrait server.  It will
also ignore any tests and force a pass to allow portrait to launch even if a fatal condition was
detected in the Simfabric run.  This is useful when debugging failing microcode.</p>
<p>Setting debug_level to 1 or 2 will also turn on more printing to screen for the API</p>
</section>
<section id="compiling-for-hardware">
<h2>Compiling for Hardware<a class="headerlink" href="#compiling-for-hardware" title="Permalink to this headline">¶</a></h2>
<p>It is not recommended to run the validation or Simfabric for large scale runs.  Running either the NumPy
validation and/or Simfabric at the maximum scales that the WSE can run can take many days to
complete on a single node.  It is thus recommended that development be done on the smallest size problem
that is still meaningful and that it then be scaled up for a hardware run and all validation be turned off.</p>
<p>This can be easily done through the command line as follows</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>python rectangular_diffusion.py -x <span class="m">800</span> -y <span class="m">1000</span> -z <span class="m">2000</span> -vr <span class="m">0</span> -mg bench.img -hin full_scale_implicit_diffusion
</pre></div>
</div>
<p>If the code contains any timers, they can be turned on with the <cite>-ts16</cite> or <cite>-ts32</cite> arguments</p>
</section>
</section>
<section id="wse-interface-module">
<h1>WSE Interface Module<a class="headerlink" href="#wse-interface-module" title="Permalink to this headline">¶</a></h1>
<p>The WSE Inference Module is a singleton class which is instantiated in every
other class within the WSE_Package.  It was created this way to provide flexibility
to users and to maintain key program sequences and memory wherever it is used.
The WSE provides several key features to the API:</p>
<ol class="arabic simple">
<li><p>Maintains program sequences</p></li>
<li><p>Handles memory spaces with no need for user input</p></li>
<li><p>Handles controller specific operations as well as global operations (Looping, conditionals, global reductions, controller arithmetic)</p></li>
<li><p>Handles code optimization</p></li>
<li><p>Enables compiler directives</p></li>
<li><p>Compiles into WSE images and maps</p></li>
<li><p>Handles validation in NumPy</p></li>
</ol>
<p>Almost all of this functionality is handled automatically and is not a necessary
concern for end users.</p>
<section id="module-WSE_FE.WSE_Interface">
<span id="classes-and-methods"></span><h2>Classes and Methods<a class="headerlink" href="#module-WSE_FE.WSE_Interface" title="Permalink to this headline">¶</a></h2>
<dl class="py class">
<dt id="WSE_FE.WSE_Interface.WSE_Interface">
<em class="property">class </em><code class="sig-prename descclassname">WSE_FE.WSE_Interface.</code><code class="sig-name descname">WSE_Interface</code><a class="headerlink" href="#WSE_FE.WSE_Interface.WSE_Interface" title="Permalink to this definition">¶</a></dt>
<dd><p>Singleton class that keeps track of program sequence for the WSE_FE package
See WSE_Interface_Singleton for available methods</p>
</dd></dl>

<dl class="py class">
<dt id="WSE_FE.WSE_Interface.WSE_Interface_Singleton">
<em class="property">class </em><code class="sig-prename descclassname">WSE_FE.WSE_Interface.</code><code class="sig-name descname">WSE_Interface_Singleton</code><a class="headerlink" href="#WSE_FE.WSE_Interface.WSE_Interface_Singleton" title="Permalink to this definition">¶</a></dt>
<dd><p>DO NOT INSTANTIATE DIRECTLY
This class is the singleton base of WSE_Interface
Contains all methods available in WSE_Interface</p>
<dl class="py method">
<dt id="WSE_FE.WSE_Interface.WSE_Interface_Singleton.debug_message">
<code class="sig-name descname">debug_message</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">message</span></em>, <em class="sig-param"><span class="n">active</span><span class="o">=</span><span class="default_value">True</span></em><span class="sig-paren">)</span><a class="headerlink" href="#WSE_FE.WSE_Interface.WSE_Interface_Singleton.debug_message" title="Permalink to this definition">¶</a></dt>
<dd><p>Enables debug message when compiled with the -dl 3 option.  Very useful for determining position in a large
program. To use, add into the graph construction wherever needed.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">_calc_shear_and_P</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">debug_active</span><span class="o">=</span><span class="kc">False</span><span class="p">):</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_wse</span><span class="o">.</span><span class="n">debug_message</span><span class="p">(</span><span class="s1">&#39;FD_Stokes._calc_shear_and_P: Start of _calc_shear_and_P&#39;</span><span class="p">,</span> <span class="n">active</span><span class="o">=</span><span class="n">debug_active</span><span class="p">)</span>
    <span class="k">with</span> <span class="n">ASM</span><span class="p">()</span> <span class="k">as</span> <span class="n">cs_asm</span><span class="p">:</span>
        <span class="n">eta_two</span> <span class="o">=</span> <span class="n">cs_asm</span><span class="o">.</span><span class="n">get_free_array_scratch</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_wse</span><span class="o">.</span><span class="n">debug_message</span><span class="p">(</span><span class="s1">&#39;FD_Stokes._calc_shear_and_P: calc eta_two&#39;</span><span class="p">,</span> <span class="n">active</span><span class="o">=</span><span class="n">debug_active</span><span class="p">)</span>
        <span class="n">eta_two</span><span class="p">[</span><span class="mi">1</span><span class="p">:</span><span class="o">-</span><span class="mi">1</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">eta0</span><span class="o">*</span><span class="p">(</span><span class="mf">2.0</span> <span class="o">-</span> <span class="mf">2.0</span><span class="o">*</span><span class="bp">self</span><span class="o">.</span><span class="n">deta_dT</span><span class="o">*</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">T</span><span class="p">[</span><span class="mi">1</span><span class="p">:</span><span class="o">-</span><span class="mi">1</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">]</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">deltaT</span><span class="o">/</span><span class="mf">2.0</span><span class="p">))</span>
</pre></div>
</div>
<p>The message will show up in the validation.txt file</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">----------------------------------</span>
<span class="go">Debug Message: FD_Stokes._calc_shear_and_P: Start of _calc_shear_and_P</span>
<span class="go">Debug Message ID: 0x0</span>
<span class="go">Debug Task ID: 0xf</span>
<span class="go">----------------------------------</span>
</pre></div>
</div>
<p>Each time <code class="code docutils literal notranslate"><span class="pre">debug_message</span></code> gets called, it increments the <code class="code docutils literal notranslate"><span class="pre">Debug</span> <span class="pre">Message</span> <span class="pre">ID</span></code>, ensuring that each
message has a unique ID number.  The <code class="code docutils literal notranslate"><span class="pre">Debug</span> <span class="pre">Task</span> <span class="pre">ID</span></code> shows which task to search for in the source window
in portrait:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">     task debug_task entry(0xf) {</span>
<span class="go">009c     BLOCK ctrl_color;</span>
<span class="go">009d     gpr_R6 = gpr_R2;</span>
<span class="go">009e     arguments_recv.length = gpr_c_6;</span>
<span class="go">00a0     UNBLOCK ctrl_color;}</span>
</pre></div>
</div>
<p>The move instruction <code class="code docutils literal notranslate"><span class="pre">gpr_R6</span> <span class="pre">=</span> <span class="pre">gpr_R2</span></code> got tagged with an instruction address of <code class="code docutils literal notranslate"><span class="pre">009d</span></code> by the
compiler in this case. The <code class="code docutils literal notranslate"><span class="pre">009d</span></code> address is searchable in the pipeline window if the ADDR option is
enabled at the top.  Clicking on the line with that address will display the details of the instruction in the
<code class="code docutils literal notranslate"><span class="pre">Instruction</span></code> window.  The value involved in the move will be displayed in the <code class="code docutils literal notranslate"><span class="pre">s1</span></code> and <code class="code docutils literal notranslate"><span class="pre">dst</span></code>
values in the <code class="code docutils literal notranslate"><span class="pre">Instruction</span></code> window.  When the <code class="code docutils literal notranslate"><span class="pre">s1</span></code> or <code class="code docutils literal notranslate"><span class="pre">dst</span></code> value matches that in the
<code class="code docutils literal notranslate"><span class="pre">Debug</span> <span class="pre">Message</span> <span class="pre">ID</span></code>, the point in the graph where the <code class="code docutils literal notranslate"><span class="pre">debug_message</span></code> was inserted has been found.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>message</strong> (<em>str</em>) – descriptive string.</p></li>
<li><p><strong>active</strong> (<em>bool</em><em>, </em><em>optional</em>) – Enable debug mesage. The default is True.</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p></p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>None.</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="WSE_FE.WSE_Interface.WSE_Interface_Singleton.get_available_cmd_args">
<code class="sig-name descname">get_available_cmd_args</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#WSE_FE.WSE_Interface.WSE_Interface_Singleton.get_available_cmd_args" title="Permalink to this definition">¶</a></dt>
<dd><p>WSE_Interface creates a default set of command line arguments through
the argparse library.  This function allows users to retrieve all
command line arguments.  To add more domain specific arguments see
get_cmd_line_parser.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">WSE_FE.WSE_Interface</span> <span class="kn">import</span> <span class="n">WSE_Interface</span>

<span class="n">wse</span> <span class="o">=</span> <span class="n">WSE_Interface</span><span class="p">()</span>
<span class="n">args</span> <span class="o">=</span> <span class="n">wse</span><span class="o">.</span><span class="n">get_available_cmd_args</span><span class="p">()</span>

<span class="c1">#use args in furhter code</span>
</pre></div>
</div>
<dl class="field-list simple">
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p>The WSE_Interface args member variable.</p>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p>argparse.arguments</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="WSE_FE.WSE_Interface.WSE_Interface_Singleton.get_cmd_line_parser">
<code class="sig-name descname">get_cmd_line_parser</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#WSE_FE.WSE_Interface.WSE_Interface_Singleton.get_cmd_line_parser" title="Permalink to this definition">¶</a></dt>
<dd><p>WSE_Interface creates a default set of command line arguments through
the argparse library.  This function allows users to get the parser
created in the WSE_Interface so that domain specific arguments can be
added as command line arguments.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">WSE_FE.WSE_Interface</span> <span class="kn">import</span> <span class="n">WSE_Interface</span>

<span class="n">wse</span> <span class="o">=</span> <span class="n">WSE_Interface</span><span class="p">()</span>
<span class="n">parser</span> <span class="o">=</span> <span class="n">wse</span><span class="o">.</span><span class="n">get_cmd_line_parser</span><span class="p">()</span>

<span class="c1">#Add CFD Specific command line arguments</span>
<span class="n">parser</span><span class="o">.</span><span class="n">add_argument</span><span class="p">(</span><span class="s2">&quot;-x&quot;</span><span class="p">,</span><span class="s2">&quot;--x&quot;</span><span class="p">,</span> <span class="n">help</span><span class="o">=</span><span class="s2">&quot;specify x dimension&quot;</span><span class="p">,</span>
                    <span class="nb">type</span><span class="o">=</span><span class="nb">int</span><span class="p">,</span> <span class="n">default</span><span class="o">=</span><span class="mi">10</span><span class="p">)</span>
<span class="n">parser</span><span class="o">.</span><span class="n">add_argument</span><span class="p">(</span><span class="s2">&quot;-y&quot;</span><span class="p">,</span><span class="s2">&quot;--y&quot;</span><span class="p">,</span> <span class="n">help</span><span class="o">=</span><span class="s2">&quot;specify y dimension&quot;</span><span class="p">,</span>
                    <span class="nb">type</span><span class="o">=</span><span class="nb">int</span><span class="p">,</span> <span class="n">default</span><span class="o">=</span><span class="mi">10</span><span class="p">)</span>
<span class="n">parser</span><span class="o">.</span><span class="n">add_argument</span><span class="p">(</span><span class="s2">&quot;-z&quot;</span><span class="p">,</span> <span class="s2">&quot;--z&quot;</span><span class="p">,</span> <span class="n">help</span><span class="o">=</span><span class="s2">&quot;specify z dimension&quot;</span><span class="p">,</span>
                    <span class="nb">type</span><span class="o">=</span><span class="nb">int</span><span class="p">,</span> <span class="n">default</span><span class="o">=</span><span class="mi">10</span><span class="p">)</span>
<span class="n">args</span> <span class="o">=</span> <span class="n">wse</span><span class="o">.</span><span class="n">get_available_cmd_args</span><span class="p">()</span>

<span class="c1">#use args in further code</span>
</pre></div>
</div>
<dl class="field-list simple">
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p>The WSE_Interface parser member variable.</p>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p>argparse.parser</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="WSE_FE.WSE_Interface.WSE_Interface_Singleton.get_named_array">
<code class="sig-name descname">get_named_array</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">name</span></em><span class="sig-paren">)</span><a class="headerlink" href="#WSE_FE.WSE_Interface.WSE_Interface_Singleton.get_named_array" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns a python reference to an existing WSE_array with <code class="code docutils literal notranslate"><span class="pre">name</span></code>. When instantiating a WSE_Array object,
an optional name parameter can be supplied.  This tag is stored in a dictionary for later retrieval.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">MyCFDClass</span><span class="p">():</span>
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">u_center</span><span class="p">,</span> <span class="n">v_center</span><span class="p">,</span> <span class="n">w_center</span><span class="p">):</span>
        <span class="n">WSE_Array</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s1">&#39;u_center&#39;</span><span class="p">,</span> <span class="n">initData</span><span class="o">=</span><span class="n">u_center</span><span class="p">)</span>
        <span class="n">WSE_Array</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s1">&#39;v_center&#39;</span><span class="p">,</span> <span class="n">initData</span><span class="o">=</span><span class="n">v_center</span><span class="p">)</span>
        <span class="n">WSE_Array</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s1">&#39;w_center&#39;</span><span class="p">,</span> <span class="n">initData</span><span class="o">=</span><span class="n">w_center</span><span class="p">)</span>
        <span class="n">WSE_Array</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s1">&#39;press&#39;</span><span class="p">,</span> <span class="n">initData</span><span class="o">=</span><span class="n">press</span><span class="p">)</span>
</pre></div>
</div>
<p>Somewhere else in the code, a python object can be created which references the original WSE_Array by the name
supplied.  It can even be in a completely different class as long as the WSE_Interface singleton is
instantiated.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">initialize_face_velocity</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">cell_type</span><span class="p">,</span> <span class="n">debug_active</span><span class="o">=</span><span class="kc">False</span><span class="p">):</span>

    <span class="n">u</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_wse</span><span class="o">.</span><span class="n">get_named_array</span><span class="p">(</span><span class="s1">&#39;u_center&#39;</span><span class="p">)</span>
    <span class="n">v</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_wse</span><span class="o">.</span><span class="n">get_named_array</span><span class="p">(</span><span class="s1">&#39;v_center&#39;</span><span class="p">)</span>
    <span class="n">w</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_wse</span><span class="o">.</span><span class="n">get_named_array</span><span class="p">(</span><span class="s1">&#39;w_center&#39;</span><span class="p">)</span>

    <span class="c1"># use u,v,w in further code</span>
</pre></div>
</div>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>name</strong> (<em>str</em>) – The name given to the WSE_Array object to retrieve.</p>
</dd>
<dt class="field-even">Raises<span class="colon">:</span></dt>
<dd class="field-even"><p><strong>ValueError</strong> – Name does not exist.</p>
</dd>
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p>The python reference to the WSE_Array with the unique name.</p>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p><a class="reference internal" href="#WSE_FE.WSE_Array.WSE_Array" title="WSE_FE.WSE_Array.WSE_Array">WSE_Array</a></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="WSE_FE.WSE_Interface.WSE_Interface_Singleton.make_WSE">
<code class="sig-name descname">make_WSE</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">answer</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">liveCells</span><span class="o">=</span><span class="default_value">None</span></em><span class="sig-paren">)</span><a class="headerlink" href="#WSE_FE.WSE_Interface.WSE_Interface_Singleton.make_WSE" title="Permalink to this definition">¶</a></dt>
<dd><p>Compiles the code for the Wafer Scale Engine.  Several command line
options set compilation behavior.  Any python script calls this script
will have default command line arguments enabled. Use the <cite>-h</cite> option
behind the python call to launch the script to get a listing of the
available options.</p>
<p>Must be called <strong>once</strong> at the end of a program to compile the graph.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># problem setup</span>

<span class="k">with</span> <span class="n">WSE_For_Loop</span><span class="p">(</span><span class="s1">&#39;time_loop&#39;</span><span class="p">,</span> <span class="n">ts</span><span class="p">):</span>
    <span class="k">if</span> <span class="n">benchmark_iterations</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">wse</span><span class="o">.</span><span class="n">record_timestamp</span><span class="p">()</span>

    <span class="c1"># Update T from current values</span>
    <span class="n">T_n</span><span class="p">[</span><span class="mi">1</span><span class="p">:</span><span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="n">center</span> <span class="o">*</span> <span class="n">T_n</span><span class="p">[</span><span class="mi">1</span><span class="p">:</span><span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">]</span>
        <span class="o">+</span> <span class="n">c</span> <span class="o">*</span> <span class="p">(</span><span class="n">T_n</span><span class="p">[</span><span class="mi">2</span><span class="p">:,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">]</span> <span class="o">+</span> <span class="n">T_n</span><span class="p">[:</span><span class="o">-</span><span class="mi">2</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">]</span>
               <span class="o">+</span> <span class="n">T_n</span><span class="p">[</span><span class="mi">1</span><span class="p">:</span><span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">]</span> <span class="o">+</span> <span class="n">T_n</span><span class="p">[</span><span class="mi">1</span><span class="p">:</span><span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="o">-</span><span class="mi">1</span><span class="p">]</span>
               <span class="o">+</span> <span class="n">T_n</span><span class="p">[</span><span class="mi">1</span><span class="p">:</span><span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">]</span> <span class="o">+</span> <span class="n">T_n</span><span class="p">[</span><span class="mi">1</span><span class="p">:</span><span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">])</span>

<span class="c1"># graph construction is now complete, so we can call make_wse</span>
<span class="n">wse</span><span class="o">.</span><span class="n">make_WSE</span><span class="p">(</span><span class="n">answer</span><span class="o">=</span><span class="n">T_n</span><span class="p">)</span>
</pre></div>
</div>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>answer</strong> (<a class="reference internal" href="#WSE_FE.WSE_Array.WSE_Array" title="WSE_FE.WSE_Array.WSE_Array"><em>WSE_Array</em></a><em>, </em><a class="reference internal" href="#WSE_FE.WSE_Scalar.WSE_Scalar" title="WSE_FE.WSE_Scalar.WSE_Scalar"><em>WSE_Scalar</em></a><em>, </em><em>optional</em>) – A WSE_array or WSE_Scalar that holds the answer for validation.
The default is None.</p></li>
<li><p><strong>liveCells</strong> (<em>np.array</em><em>, </em><em>optional</em>) – A map of live cells used to construct an image of validation data.
The default is None.</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p></p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>None.</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="WSE_FE.WSE_Interface.WSE_Interface_Singleton.print">
<code class="sig-name descname">print</code><span class="sig-paren">(</span><em class="sig-param"><span class="o">*</span><span class="n">args</span></em>, <em class="sig-param"><span class="o">**</span><span class="n">kwargs</span></em><span class="sig-paren">)</span><a class="headerlink" href="#WSE_FE.WSE_Interface.WSE_Interface_Singleton.print" title="Permalink to this definition">¶</a></dt>
<dd><p>calls python’s default print with flush=True if <code class="code docutils literal notranslate"><span class="pre">-dl</span> <span class="pre">&lt;1,2,3&gt;</span></code> is set.  Useful for debugging and following
the python code during graph construction.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="bp">self</span><span class="o">.</span><span class="n">_wse</span><span class="o">.</span><span class="n">print</span><span class="p">(</span><span class="s1">&#39;------------------&#39;</span><span class="p">)</span>
<span class="bp">self</span><span class="o">.</span><span class="n">_wse</span><span class="o">.</span><span class="n">print</span><span class="p">(</span><span class="s1">&#39;WSE_Array.__add__&#39;</span><span class="p">)</span>
<span class="bp">self</span><span class="o">.</span><span class="n">_wse</span><span class="o">.</span><span class="n">print</span><span class="p">(</span><span class="s1">&#39;self:&#39;</span><span class="p">,</span> <span class="bp">self</span><span class="p">,</span> <span class="nb">id</span><span class="p">(</span><span class="bp">self</span><span class="p">))</span>
<span class="bp">self</span><span class="o">.</span><span class="n">_wse</span><span class="o">.</span><span class="n">print</span><span class="p">(</span><span class="s1">&#39;other:&#39;</span><span class="p">,</span> <span class="n">other</span><span class="p">,</span> <span class="nb">id</span><span class="p">(</span><span class="n">other</span><span class="p">))</span>
<span class="bp">self</span><span class="o">.</span><span class="n">_wse</span><span class="o">.</span><span class="n">print</span><span class="p">(</span><span class="s1">&#39;result:&#39;</span><span class="p">,</span> <span class="n">result</span><span class="p">,</span> <span class="nb">id</span><span class="p">(</span><span class="n">result</span><span class="p">))</span>
<span class="bp">self</span><span class="o">.</span><span class="n">_wse</span><span class="o">.</span><span class="n">print</span><span class="p">(</span><span class="s1">&#39;------------------&#39;</span><span class="p">)</span>
</pre></div>
</div>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>*args</strong> (<em>args</em>) – args to print in __builtin__.</p></li>
<li><p><strong>**kwargs</strong> (<em>kwargs</em>) – kwargs to print in __builtin__.</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>DESCRIPTION.</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>TYPE</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="WSE_FE.WSE_Interface.WSE_Interface_Singleton.record_timestamp">
<code class="sig-name descname">record_timestamp</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#WSE_FE.WSE_Interface.WSE_Interface_Singleton.record_timestamp" title="Permalink to this definition">¶</a></dt>
<dd><p>Records the cycle number in a defined symbol on the worker tiles for benchmarking.  The symbol is set up to
record 100 values in a circular buffer.  In order to activate the timestamp recording, the <code class="code docutils literal notranslate"><span class="pre">-pcc</span> <span class="pre">1</span></code>
command line option must be set and one of <code class="code docutils literal notranslate"><span class="pre">-ts16</span> <span class="pre">1</span></code> or <code class="code docutils literal notranslate"><span class="pre">-ts32</span> <span class="pre">1</span></code> must be set.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">with</span> <span class="n">for_loop</span><span class="p">(</span><span class="s1">&#39;max_outter_iters&#39;</span><span class="p">,</span> <span class="n">max_outter_iters</span><span class="p">)</span> <span class="k">as</span> <span class="n">max_outer_iters_loop</span><span class="p">:</span>
    <span class="k">with</span> <span class="n">for_loop</span><span class="p">(</span><span class="s1">&#39;reduction_limited_iters&#39;</span><span class="p">,</span> <span class="n">num_reduction_lim_its</span><span class="p">):</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_benchmark_fluid_solver</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_wse</span><span class="o">.</span><span class="n">record_timestamp</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">ErrV</span><span class="p">[</span><span class="mi">2</span><span class="p">:</span><span class="o">-</span><span class="mi">2</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">Vz</span><span class="p">[</span><span class="mi">2</span><span class="p">:</span><span class="o">-</span><span class="mi">2</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">ErrP</span><span class="p">[</span><span class="mi">2</span><span class="p">:</span><span class="o">-</span><span class="mi">2</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">P</span><span class="p">[</span><span class="mi">2</span><span class="p">:</span><span class="o">-</span><span class="mi">2</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_calc_shear_and_P</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_calc_dV</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_update_V</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_bc_xyz</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">Vx</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">Vy</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">Vz</span><span class="p">)</span>

        <span class="c1"># more code</span>
</pre></div>
</div>
<dl class="field-list simple">
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p></p>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p>None.</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

</section>
</section>
<section id="wse-array-module">
<h1>WSE Array Module<a class="headerlink" href="#wse-array-module" title="Permalink to this headline">¶</a></h1>
<p>The WSE_Array class is designed to allow users to work with 3D arrays in a
similar way to NumPy.  In fact, user defined WSE_Arrays are initialized from
3D NumPy arrays through the <cite>initData</cite> keyword on instantiation.  The first two
axes in the NumPy arrays map to tile coordinates and axis 2 maps to the memory
axis on each tile.</p>
<p>Each WSE_Array is designed to represent field data within a cell/voxel in a 3D
structured finite element/volume simulation. Thus, the shape of each WSE_Array
is set to the number of cells in the cardinal axes (including boundary cells).</p>
<p>Each tile holds a column of cells in the third axis of the NumPy data.  Arithmetic
is written from the perspective of a single tile in the array.</p>
<p>Slicing a WSE_Array object is similar to NumPy but is in relative coordinates.
The first axis is usually a slice range which specifies the elements of each
local vector on each tile.  It is equivalent to the slicing in the third axis
of a 3d NumPy array.  The second two axes specify the tile position relative
to the local tile coordinate.  The second axis specifies the relative position
east and west, and the third axis specifies the relative position north and
south.</p>
<p>Arithmetic operations are done in the worker field.  When neighbor operations
are involved, moats send their data into the worker field.  Moats are designed
to hold NSEW boundary conditions and are usually only updated at the tail end
of a time step.  Boundary conditions can be updated through a copy operation
which will move neighboring values from the worker field into the moat.</p>
<p>WSE_Array format:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">dst</span><span class="p">[</span><span class="mi">1</span><span class="p">:</span><span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="n">s0</span><span class="p">[</span><span class="mi">2</span><span class="p">:,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">]</span> <span class="o">+</span> <span class="n">s1</span><span class="p">[:</span><span class="o">-</span><span class="mi">2</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">]</span>
<span class="n">dst</span><span class="p">[</span><span class="mi">1</span><span class="p">:</span><span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="n">s0</span><span class="p">[</span><span class="mi">1</span><span class="p">:</span><span class="o">-</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">0</span><span class="p">]</span> <span class="o">+</span> <span class="n">s1</span><span class="p">[</span><span class="mi">1</span><span class="p">:</span><span class="o">-</span><span class="mi">1</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">]</span>
</pre></div>
</div>
<p>NumPy format:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">dst</span><span class="p">[</span><span class="mi">1</span><span class="p">:</span><span class="o">-</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">:</span><span class="o">-</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">:</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span> <span class="o">=</span> <span class="n">s0</span><span class="p">[</span><span class="mi">1</span><span class="p">:</span><span class="o">-</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">:</span><span class="o">-</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">:]</span> <span class="o">+</span> <span class="n">s1</span><span class="p">[</span><span class="mi">1</span><span class="p">:</span><span class="o">-</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">:</span><span class="o">-</span><span class="mi">1</span><span class="p">,:</span><span class="o">-</span><span class="mi">2</span><span class="p">]</span>
<span class="n">dst</span><span class="p">[</span><span class="mi">1</span><span class="p">:</span><span class="o">-</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">:</span><span class="o">-</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">:</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span> <span class="o">=</span> <span class="n">s0</span><span class="p">[</span><span class="mi">1</span><span class="p">:</span><span class="o">-</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">:,</span><span class="mi">1</span><span class="p">:</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span> <span class="o">+</span> <span class="n">s1</span><span class="p">[</span><span class="mi">1</span><span class="p">:</span><span class="o">-</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">:</span><span class="o">-</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">:</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span>
</pre></div>
</div>
<section id="classes-and-methods-1">
<h2>Classes and Methods<a class="headerlink" href="#classes-and-methods-1" title="Permalink to this headline">¶</a></h2>
<dl class="py class">
<dt id="WSE_FE.WSE_Array.WSE_Array">
<em class="property">class </em><code class="sig-prename descclassname">WSE_FE.WSE_Array.</code><code class="sig-name descname">WSE_Array</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">name</span><span class="o">=</span><span class="default_value">'array'</span></em>, <em class="sig-param"><span class="o">**</span><span class="n">kwargs</span></em><span class="sig-paren">)</span><a class="headerlink" href="#WSE_FE.WSE_Array.WSE_Array" title="Permalink to this definition">¶</a></dt>
<dd><p>Class to handle expressive math with array objects.</p>
<dl class="py method">
<dt id="WSE_FE.WSE_Array.WSE_Array.__add__">
<code class="sig-name descname">__add__</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">other</span></em><span class="sig-paren">)</span><a class="headerlink" href="#WSE_FE.WSE_Array.WSE_Array.__add__" title="Permalink to this definition">¶</a></dt>
<dd><p>Python magic function to override the ‘+’ operator</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>other</strong> (<em>int</em><em>, </em><em>float</em><em>, </em><a class="reference internal" href="#WSE_FE.WSE_Array.WSE_Array" title="WSE_FE.WSE_Array.WSE_Array"><em>WSE_Array</em></a>) – The other object to add</p>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p><strong>result</strong> – The WSE_Array object pointing to the result of the addition</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>WSE_array</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="WSE_FE.WSE_Array.WSE_Array.__getitem__">
<code class="sig-name descname">__getitem__</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">subscript</span></em><span class="sig-paren">)</span><a class="headerlink" href="#WSE_FE.WSE_Array.WSE_Array.__getitem__" title="Permalink to this definition">¶</a></dt>
<dd><p>Python magic function to handle slicing</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>subscript</strong> (<em>tuple</em>) – The slice data</p>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p><strong>copy_self</strong> – A copy of the incoming WSE_Array</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p><a class="reference internal" href="#WSE_FE.WSE_Array.WSE_Array" title="WSE_FE.WSE_Array.WSE_Array">WSE_Array</a></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="WSE_FE.WSE_Array.WSE_Array.__mul__">
<code class="sig-name descname">__mul__</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">other</span></em><span class="sig-paren">)</span><a class="headerlink" href="#WSE_FE.WSE_Array.WSE_Array.__mul__" title="Permalink to this definition">¶</a></dt>
<dd><p>Python magic function to override the ‘*’ operator</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>other</strong> (<em>int</em><em>, </em><em>float</em><em>, </em><a class="reference internal" href="#WSE_FE.WSE_Array.WSE_Array" title="WSE_FE.WSE_Array.WSE_Array"><em>WSE_Array</em></a>) – The other object to multiply</p>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p><strong>result</strong> – The WSE_Array object pointing to the result of the multiplication</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>WSE_array</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="WSE_FE.WSE_Array.WSE_Array.__setitem__">
<code class="sig-name descname">__setitem__</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">subscript</span></em>, <em class="sig-param"><span class="n">item</span></em><span class="sig-paren">)</span><a class="headerlink" href="#WSE_FE.WSE_Array.WSE_Array.__setitem__" title="Permalink to this definition">¶</a></dt>
<dd><p>Python magic function to handle sclice assignment</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>subscript</strong> (<em>tuple</em>) – The slice of the slice assignment</p></li>
<li><p><strong>item</strong> (<em>list</em>) – A list containing the self, other, and operation tag for the
previous operation</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p></p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>None</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="WSE_FE.WSE_Array.WSE_Array.__sub__">
<code class="sig-name descname">__sub__</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">other</span></em><span class="sig-paren">)</span><a class="headerlink" href="#WSE_FE.WSE_Array.WSE_Array.__sub__" title="Permalink to this definition">¶</a></dt>
<dd><p>Python magic function to override the ‘-’ operator</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>other</strong> (<em>int</em><em>, </em><em>float</em><em>, </em><a class="reference internal" href="#WSE_FE.WSE_Array.WSE_Array" title="WSE_FE.WSE_Array.WSE_Array"><em>WSE_Array</em></a>) – The object to subtract</p>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p><strong>result</strong> – The WSE_Array object pointing to the result of the subtraction</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>WSE_array</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="WSE_FE.WSE_Array.WSE_Array.__truediv__">
<code class="sig-name descname">__truediv__</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">other</span></em><span class="sig-paren">)</span><a class="headerlink" href="#WSE_FE.WSE_Array.WSE_Array.__truediv__" title="Permalink to this definition">¶</a></dt>
<dd><p>Python magic function to override the ‘/’ operator</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>other</strong> (<em>int</em><em>, </em><em>float</em><em>, </em><a class="reference internal" href="#WSE_FE.WSE_Array.WSE_Array" title="WSE_FE.WSE_Array.WSE_Array"><em>WSE_Array</em></a>) – The denominator for the division</p>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p><strong>result</strong> – The WSE_Array object pointing to the result of the division</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>WSE_array</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="WSE_FE.WSE_Array.WSE_Array.abs">
<code class="sig-name descname">abs</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#WSE_FE.WSE_Array.WSE_Array.abs" title="Permalink to this definition">¶</a></dt>
<dd><p>take absolute value of vector</p>
<dl class="field-list simple">
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>result</strong> – The negated WSE_Array.</p>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p><a class="reference internal" href="#WSE_FE.WSE_Array.WSE_Array" title="WSE_FE.WSE_Array.WSE_Array">WSE_Array</a></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="WSE_FE.WSE_Array.WSE_Array.copy">
<code class="sig-name descname">copy</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">other</span></em>, <em class="sig-param"><span class="n">moatArray</span><span class="o">=</span><span class="default_value">None</span></em><span class="sig-paren">)</span><a class="headerlink" href="#WSE_FE.WSE_Array.WSE_Array.copy" title="Permalink to this definition">¶</a></dt>
<dd><p>Copies other into self.  If moatArray is specified, copies self into
moatArray memory space on the moat invoved rather than self.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>other</strong> (<a class="reference internal" href="#WSE_FE.WSE_Array.WSE_Array" title="WSE_FE.WSE_Array.WSE_Array"><em>WSE_Array</em></a>) – The WSE_Array to copy</p></li>
<li><p><strong>moatArray</strong> (<a class="reference internal" href="#WSE_FE.WSE_Array.WSE_Array" title="WSE_FE.WSE_Array.WSE_Array"><em>WSE_Array</em></a><em>, </em><em>optional</em>) – The WSE_Array to copy into on the moat if specified. The default is
None.</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p><strong>result</strong> – A copy of self</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p><a class="reference internal" href="#WSE_FE.WSE_Array.WSE_Array" title="WSE_FE.WSE_Array.WSE_Array">WSE_Array</a></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="WSE_FE.WSE_Array.WSE_Array.get_cell_binary">
<code class="sig-name descname">get_cell_binary</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">direction</span></em>, <em class="sig-param"><span class="n">cell_type</span></em><span class="sig-paren">)</span><a class="headerlink" href="#WSE_FE.WSE_Array.WSE_Array.get_cell_binary" title="Permalink to this definition">¶</a></dt>
<dd><p>returns a tensor of binary float values, 0.0 or 1.0, if a cell is
the specified type</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>direction</strong> (<em>string</em>) – one of the following: center, east, west, north, south, top, bottom</p></li>
<li><p><strong>cell_type</strong> (<em>string</em>) – one of the following: fluid, wall, dead, inlet, outlet</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p></p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>None.</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="WSE_FE.WSE_Array.WSE_Array.get_operation_starting_address">
<code class="sig-name descname">get_operation_starting_address</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#WSE_FE.WSE_Array.WSE_Array.get_operation_starting_address" title="Permalink to this definition">¶</a></dt>
<dd><p>Get the operation’s starting address</p>
<dl class="field-list simple">
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p></p>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p>The operation’s starting address</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="WSE_FE.WSE_Array.WSE_Array.max_with">
<code class="sig-name descname">max_with</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">other</span></em><span class="sig-paren">)</span><a class="headerlink" href="#WSE_FE.WSE_Array.WSE_Array.max_with" title="Permalink to this definition">¶</a></dt>
<dd><p>Computes the element wise maximum of self with other</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>other</strong> (<em>int</em><em>, </em><em>float</em>) – A value to max with</p>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p></p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>None</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="WSE_FE.WSE_Array.WSE_Array.min_with">
<code class="sig-name descname">min_with</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">other</span></em><span class="sig-paren">)</span><a class="headerlink" href="#WSE_FE.WSE_Array.WSE_Array.min_with" title="Permalink to this definition">¶</a></dt>
<dd><p>Computes the element wise minimum of self with other</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>other</strong> (<em>int</em><em>, </em><em>float</em>) – A value to min with</p>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p></p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>neg_max.__neg__()</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="WSE_FE.WSE_Array.WSE_Array.reciprocal">
<code class="sig-name descname">reciprocal</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#WSE_FE.WSE_Array.WSE_Array.reciprocal" title="Permalink to this definition">¶</a></dt>
<dd><p>reciprocal of a WSE_Array</p>
<dl class="field-list simple">
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>result</strong> – The reciprocal WSE_Array.</p>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p><a class="reference internal" href="#WSE_FE.WSE_Array.WSE_Array" title="WSE_FE.WSE_Array.WSE_Array">WSE_Array</a></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="WSE_FE.WSE_Array.WSE_Array.reduce_add_2_control">
<code class="sig-name descname">reduce_add_2_control</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">result_scalar</span></em><span class="sig-paren">)</span><a class="headerlink" href="#WSE_FE.WSE_Array.WSE_Array.reduce_add_2_control" title="Permalink to this definition">¶</a></dt>
<dd><p>Computes the reduce add on self and places the result
in a WSE_Scalar on the control tile</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>result_scalar</strong> (<a class="reference internal" href="#WSE_FE.WSE_Scalar.WSE_Scalar" title="WSE_FE.WSE_Scalar.WSE_Scalar"><em>WSE_Scalar</em></a><em>, </em><em>int</em>) – The WSE_Scalar objecto or scalar index to where to store the
result</p>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p></p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>None</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="WSE_FE.WSE_Array.WSE_Array.reduce_dot_2_control">
<code class="sig-name descname">reduce_dot_2_control</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">other</span></em>, <em class="sig-param"><span class="n">result_scalar</span></em><span class="sig-paren">)</span><a class="headerlink" href="#WSE_FE.WSE_Array.WSE_Array.reduce_dot_2_control" title="Permalink to this definition">¶</a></dt>
<dd><p>Computes the dot product reduction between self and other and places it
in a WSE_Scalar on the control tile</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>other</strong> (<a class="reference internal" href="#WSE_FE.WSE_Array.WSE_Array" title="WSE_FE.WSE_Array.WSE_Array"><em>WSE_Array</em></a>) – The other Array object to do the dot product with</p></li>
<li><p><strong>result_scalar</strong> (<a class="reference internal" href="#WSE_FE.WSE_Scalar.WSE_Scalar" title="WSE_FE.WSE_Scalar.WSE_Scalar"><em>WSE_Scalar</em></a><em>, </em><em>int</em>) – The WSE_Scalar objecto or scalar index to where to store the
result</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p></p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>None</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="WSE_FE.WSE_Array.WSE_Array.reduce_max_2_control">
<code class="sig-name descname">reduce_max_2_control</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">result_scalar</span></em><span class="sig-paren">)</span><a class="headerlink" href="#WSE_FE.WSE_Array.WSE_Array.reduce_max_2_control" title="Permalink to this definition">¶</a></dt>
<dd><p>computes the max reduction between self and other and places it
in a WSE_Scalar on the control tile</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>other</strong> (<a class="reference internal" href="#WSE_FE.WSE_Array.WSE_Array" title="WSE_FE.WSE_Array.WSE_Array"><em>WSE_Array</em></a>) – The other Array object to do the dot product with.</p></li>
<li><p><strong>result_scalar</strong> (<a class="reference internal" href="#WSE_FE.WSE_Scalar.WSE_Scalar" title="WSE_FE.WSE_Scalar.WSE_Scalar"><em>WSE_Scalar</em></a><em>, </em><em>int</em>) – The WSE_Scalar objecto or scalar index to where to store the
result.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="WSE_FE.WSE_Array.WSE_Array.reduce_norm_2_control">
<code class="sig-name descname">reduce_norm_2_control</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">result_scalar</span></em><span class="sig-paren">)</span><a class="headerlink" href="#WSE_FE.WSE_Array.WSE_Array.reduce_norm_2_control" title="Permalink to this definition">¶</a></dt>
<dd><p>Computes the norm of self and places it
in a WSE_Scalar on the control tile</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>result_scalar</strong> (<a class="reference internal" href="#WSE_FE.WSE_Scalar.WSE_Scalar" title="WSE_FE.WSE_Scalar.WSE_Scalar"><em>WSE_Scalar</em></a><em>, </em><em>int</em>) – The WSE_Scalar objecto or scalar index to where to store the
result.</p>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p></p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>None</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="WSE_FE.WSE_Array.WSE_Array.reduce_norm_2_scalar">
<code class="sig-name descname">reduce_norm_2_scalar</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">result_scalar</span></em><span class="sig-paren">)</span><a class="headerlink" href="#WSE_FE.WSE_Array.WSE_Array.reduce_norm_2_scalar" title="Permalink to this definition">¶</a></dt>
<dd><p>computes the norm of self and places it
in a WSE_Constant on each tile</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>result_scalar</strong> (<em>WSE_Constant</em><em>, </em><em>int</em>) – The WSE_Constant object or scalar index to where to store the
result.</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="WSE_FE.WSE_Array.WSE_Array.set_bank_at_next_write">
<code class="sig-name descname">set_bank_at_next_write</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">bank</span></em><span class="sig-paren">)</span><a class="headerlink" href="#WSE_FE.WSE_Array.WSE_Array.set_bank_at_next_write" title="Permalink to this definition">¶</a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>bank</strong> (<em>int</em>) – The desired memory bank</p>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p></p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>None</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="WSE_FE.WSE_Array.WSE_Array.sqrt">
<code class="sig-name descname">sqrt</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#WSE_FE.WSE_Array.WSE_Array.sqrt" title="Permalink to this definition">¶</a></dt>
<dd><p>take square root value of vector</p>
<dl class="field-list simple">
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>result</strong> – The negated WSE_Array.</p>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p><a class="reference internal" href="#WSE_FE.WSE_Array.WSE_Array" title="WSE_FE.WSE_Array.WSE_Array">WSE_Array</a></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="WSE_FE.WSE_Array.WSE_Array.square">
<code class="sig-name descname">square</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#WSE_FE.WSE_Array.WSE_Array.square" title="Permalink to this definition">¶</a></dt>
<dd><p>squares a vector</p>
<dl class="field-list simple">
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>result</strong> – The negated WSE_Array.</p>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p><a class="reference internal" href="#WSE_FE.WSE_Array.WSE_Array" title="WSE_FE.WSE_Array.WSE_Array">WSE_Array</a></p>
</dd>
</dl>
</dd></dl>

</dd></dl>

</section>
</section>
<section id="wse-scalar-module">
<h1>WSE Scalar Module<a class="headerlink" href="#wse-scalar-module" title="Permalink to this headline">¶</a></h1>
<p>The WSE Scalar Module is designed to handle global, mutable scalars in the
WFA.  Global scalars live in the memory space of the controller and
are broadcast with the arguments when an operation is evoked.  This approach
conserves memory on the system and incurs minimal latencies.  It is most
commonly used in calculating dot products in linear solvers.  The Module
supports a limited but growing number of scalar-scalar operations.  These
operations are conducted on the controller tile.</p>
<section id="classes-and-methods-2">
<h2>Classes and Methods<a class="headerlink" href="#classes-and-methods-2" title="Permalink to this headline">¶</a></h2>
<dl class="py class">
<dt id="WSE_FE.WSE_Scalar.WSE_Scalar">
<em class="property">class </em><code class="sig-prename descclassname">WSE_FE.WSE_Scalar.</code><code class="sig-name descname">WSE_Scalar</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">name</span><span class="o">=</span><span class="default_value">'scalar'</span></em>, <em class="sig-param"><span class="o">**</span><span class="n">kwargs</span></em><span class="sig-paren">)</span><a class="headerlink" href="#WSE_FE.WSE_Scalar.WSE_Scalar" title="Permalink to this definition">¶</a></dt>
<dd><p>The scalar class</p>
<dl class="py method">
<dt id="WSE_FE.WSE_Scalar.WSE_Scalar.__add__">
<code class="sig-name descname">__add__</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">other</span></em><span class="sig-paren">)</span><a class="headerlink" href="#WSE_FE.WSE_Scalar.WSE_Scalar.__add__" title="Permalink to this definition">¶</a></dt>
<dd><p>Python magic function to override the ‘+’ operator</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>other</strong> (<em>float</em><em>, </em><em>int</em><em>, </em><a class="reference internal" href="#WSE_FE.WSE_Scalar.WSE_Scalar" title="WSE_FE.WSE_Scalar.WSE_Scalar"><em>WSE_Scalar</em></a>) – The value or scalar for summation.</p>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p><strong>result</strong> – The WSE_Scalar object that contains the result.</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p><a class="reference internal" href="#WSE_FE.WSE_Scalar.WSE_Scalar" title="WSE_FE.WSE_Scalar.WSE_Scalar">WSE_Scalar</a></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="WSE_FE.WSE_Scalar.WSE_Scalar.__mul__">
<code class="sig-name descname">__mul__</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">other</span></em><span class="sig-paren">)</span><a class="headerlink" href="#WSE_FE.WSE_Scalar.WSE_Scalar.__mul__" title="Permalink to this definition">¶</a></dt>
<dd><p>Python magic function to override the ‘*’ operator</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>other</strong> (<em>float</em><em>, </em><em>int</em><em>, </em><a class="reference internal" href="#WSE_FE.WSE_Scalar.WSE_Scalar" title="WSE_FE.WSE_Scalar.WSE_Scalar"><em>WSE_Scalar</em></a>) – The value or WSE_Scalar or WSE_Array for multiplication.</p>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p><strong>result</strong> – The WSE_Scalar  or WSE_Array object that contains the result.</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p><a class="reference internal" href="#WSE_FE.WSE_Scalar.WSE_Scalar" title="WSE_FE.WSE_Scalar.WSE_Scalar">WSE_Scalar</a>, WSE_array</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="WSE_FE.WSE_Scalar.WSE_Scalar.__setitem__">
<code class="sig-name descname">__setitem__</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">subscript</span></em>, <em class="sig-param"><span class="n">item</span></em><span class="sig-paren">)</span><a class="headerlink" href="#WSE_FE.WSE_Scalar.WSE_Scalar.__setitem__" title="Permalink to this definition">¶</a></dt>
<dd><p>Python magic to override the slice assignment.  Used to trigger a
write into an existing WSE_Scalar object and not trigger creation of
a new WSE_Scalar object. This is necessary because there is no python
magic to override the assign operator.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">WSE_FE.WSE_Scalar</span> <span class="kn">import</span> <span class="n">WSE_Scalar</span>

<span class="n">dst</span> <span class="o">=</span> <span class="n">WSE_Scalar</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s1">&#39;dst&#39;</span><span class="p">)</span>
<span class="n">scalar_1</span> <span class="o">=</span> <span class="n">WSE_Scalar</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s1">&#39;scalar_1&#39;</span><span class="p">,</span> <span class="n">value</span> <span class="o">=</span> <span class="mf">1.0</span><span class="p">)</span>

<span class="c1">#puts the value 2.0 in the memory space for dst</span>
<span class="n">dst</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>  <span class="o">=</span> <span class="n">scalar_1</span> <span class="o">+</span> <span class="mf">1.0</span>

<span class="c1">#overwrites dst with a new WSE_Scalar object (dangerous)</span>
<span class="n">dst</span> <span class="o">=</span> <span class="n">scalar_1</span> <span class="o">+</span> <span class="mf">1.0</span>
</pre></div>
</div>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>subscript</strong> (<em>int</em>) – Should be an int of zero, if not throws error.</p></li>
<li><p><strong>item</strong> (<em>list</em>) – Coded list that shows the previous operations coming into the slice
assignment.</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p></p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>None</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="WSE_FE.WSE_Scalar.WSE_Scalar.__sub__">
<code class="sig-name descname">__sub__</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">other</span></em><span class="sig-paren">)</span><a class="headerlink" href="#WSE_FE.WSE_Scalar.WSE_Scalar.__sub__" title="Permalink to this definition">¶</a></dt>
<dd><p>Python reverse magic function to override the ‘-’ operator</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>other</strong> (<em>float</em><em>, </em><em>int</em><em>, </em><a class="reference internal" href="#WSE_FE.WSE_Scalar.WSE_Scalar" title="WSE_FE.WSE_Scalar.WSE_Scalar"><em>WSE_Scalar</em></a>) – The value or scalar for subtraction.</p>
</dd>
<dt class="field-even">Raises<span class="colon">:</span></dt>
<dd class="field-even"><p><strong>ValueError</strong> – DESCRIPTION.</p>
</dd>
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>NotImplemented</strong> – Return is not implement</p>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p>TYPE</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="WSE_FE.WSE_Scalar.WSE_Scalar.__truediv__">
<code class="sig-name descname">__truediv__</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">other</span></em><span class="sig-paren">)</span><a class="headerlink" href="#WSE_FE.WSE_Scalar.WSE_Scalar.__truediv__" title="Permalink to this definition">¶</a></dt>
<dd><p>see __div__</p>
</dd></dl>

<dl class="py method">
<dt id="WSE_FE.WSE_Scalar.WSE_Scalar.copy">
<code class="sig-name descname">copy</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">other</span></em><span class="sig-paren">)</span><a class="headerlink" href="#WSE_FE.WSE_Scalar.WSE_Scalar.copy" title="Permalink to this definition">¶</a></dt>
<dd><p>Copies the value in other to self</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>other</strong> (<a class="reference internal" href="#WSE_FE.WSE_Scalar.WSE_Scalar" title="WSE_FE.WSE_Scalar.WSE_Scalar"><em>WSE_Scalar</em></a>) – The value to copy.</p>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p></p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>None</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="WSE_FE.WSE_Scalar.WSE_Scalar.max_with">
<code class="sig-name descname">max_with</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">other</span></em><span class="sig-paren">)</span><a class="headerlink" href="#WSE_FE.WSE_Scalar.WSE_Scalar.max_with" title="Permalink to this definition">¶</a></dt>
<dd><p>computes the maximum between self and other</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>other</strong> (<a class="reference internal" href="#WSE_FE.WSE_Scalar.WSE_Scalar" title="WSE_FE.WSE_Scalar.WSE_Scalar"><em>WSE_Scalar</em></a>) – The value to max with</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="WSE_FE.WSE_Scalar.WSE_Scalar.min_with">
<code class="sig-name descname">min_with</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">other</span></em><span class="sig-paren">)</span><a class="headerlink" href="#WSE_FE.WSE_Scalar.WSE_Scalar.min_with" title="Permalink to this definition">¶</a></dt>
<dd><p>computes the maximum between self and other</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>other</strong> (<a class="reference internal" href="#WSE_FE.WSE_Scalar.WSE_Scalar" title="WSE_FE.WSE_Scalar.WSE_Scalar"><em>WSE_Scalar</em></a>) – The value to max with</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="WSE_FE.WSE_Scalar.WSE_Scalar.setValue">
<code class="sig-name descname">setValue</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">value</span></em><span class="sig-paren">)</span><a class="headerlink" href="#WSE_FE.WSE_Scalar.WSE_Scalar.setValue" title="Permalink to this definition">¶</a></dt>
<dd><p>Sets a WSE_Scalar to a float value.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>value</strong> (<em>float</em><em>, </em><em>int</em>) – The desired value for the scalar</p>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p></p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>None</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

</section>
</section>
<section id="wse-solver-module">
<h1>WSE Solver Module<a class="headerlink" href="#wse-solver-module" title="Permalink to this headline">¶</a></h1>
<p>This is a convenience class that packages common linear solvers to solve systems
of linear equations to a defined tolerance.  The Solvers use the same Modules
in this package to program the WSE once the coefficient matrix and source vector
are formed.  The implicit solution example for the diffusion equation
uses one of the <cite>CgConstantOffDiag</cite> variant below.  Be sure to instantiate
the class at the start of a program to initialize the necessary memory spaces.</p>
<p>The solvers will create <cite>program_scratch</cite> space for arrays and scalars.  These
memory spaces are available to users outside of the solver, but will be overwritten
when the solver is called.  This is usually ok as implicitly solving equations
involves repeated processes of forming and solving and the memory spaces during
each process is partially isolated (they share A/b and field values).  Reusing
program scratch is suitable for several intermediate calculations in the formation
steps.</p>
<section id="classes-and-methods-3">
<h2>Classes and Methods<a class="headerlink" href="#classes-and-methods-3" title="Permalink to this headline">¶</a></h2>
<dl class="py class">
<dt id="WSE_FE.WSE_Solver.BiCgStab">
<em class="property">class </em><code class="sig-prename descclassname">WSE_FE.WSE_Solver.</code><code class="sig-name descname">BiCgStab</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">x_dim</span></em>, <em class="sig-param"><span class="n">y_dim</span></em>, <em class="sig-param"><span class="n">z_dim</span></em>, <em class="sig-param"><span class="n">makeXCopy</span><span class="o">=</span><span class="default_value">True</span></em><span class="sig-paren">)</span><a class="headerlink" href="#WSE_FE.WSE_Solver.BiCgStab" title="Permalink to this definition">¶</a></dt>
<dd><p>Biconjugate Gradient Solver</p>
<dl class="py method">
<dt id="WSE_FE.WSE_Solver.BiCgStab.solve">
<code class="sig-name descname">solve</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">x</span></em>, <em class="sig-param"><span class="n">A_E</span></em>, <em class="sig-param"><span class="n">A_W</span></em>, <em class="sig-param"><span class="n">A_N</span></em>, <em class="sig-param"><span class="n">A_S</span></em>, <em class="sig-param"><span class="n">A_T</span></em>, <em class="sig-param"><span class="n">A_B</span></em>, <em class="sig-param"><span class="n">b</span></em>, <em class="sig-param"><span class="n">tolerance</span></em>, <em class="sig-param"><span class="n">A_C</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">max_iterations</span><span class="o">=</span><span class="default_value">2</span></em>, <em class="sig-param"><span class="n">benchmark_iterations</span><span class="o">=</span><span class="default_value">None</span></em><span class="sig-paren">)</span><a class="headerlink" href="#WSE_FE.WSE_Solver.BiCgStab.solve" title="Permalink to this definition">¶</a></dt>
<dd><p>Solves the linear equation Ax=b using the biconjugate gradient
stablized method. A and b terms are assumed to be normalized by the
diagonal so that the diagonal is 1 at every row</p>
<p>The matrix is assumed to have 7 non zero components correspondign to
center, east, west, north, top, and bottom</p>
<p>The matrix should be diagonally dominant, symmetric with a positive
diagonal of one and negative off diagonals</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>x</strong> (<a class="reference internal" href="#WSE_FE.WSE_Array.WSE_Array" title="WSE_FE.WSE_Array.WSE_Array"><em>WSE_Array</em></a>) – The initial guess</p></li>
<li><p><strong>A_E</strong> (<a class="reference internal" href="#WSE_FE.WSE_Array.WSE_Array" title="WSE_FE.WSE_Array.WSE_Array"><em>WSE_Array</em></a>) – The east component of the coefficient matrix</p></li>
<li><p><strong>A_W</strong> (<a class="reference internal" href="#WSE_FE.WSE_Array.WSE_Array" title="WSE_FE.WSE_Array.WSE_Array"><em>WSE_Array</em></a>) – The west component of the coefficient matrix</p></li>
<li><p><strong>A_N</strong> (<a class="reference internal" href="#WSE_FE.WSE_Array.WSE_Array" title="WSE_FE.WSE_Array.WSE_Array"><em>WSE_Array</em></a>) – The north component of the coefficient matrix</p></li>
<li><p><strong>A_S</strong> (<a class="reference internal" href="#WSE_FE.WSE_Array.WSE_Array" title="WSE_FE.WSE_Array.WSE_Array"><em>WSE_Array</em></a>) – The south component of the coefficient matrix</p></li>
<li><p><strong>A_T</strong> (<a class="reference internal" href="#WSE_FE.WSE_Array.WSE_Array" title="WSE_FE.WSE_Array.WSE_Array"><em>WSE_Array</em></a>) – The top component of the coefficient matrix</p></li>
<li><p><strong>A_B</strong> (<a class="reference internal" href="#WSE_FE.WSE_Array.WSE_Array" title="WSE_FE.WSE_Array.WSE_Array"><em>WSE_Array</em></a>) – The bottom component of the coefficient matrix</p></li>
<li><p><strong>b</strong> (<a class="reference internal" href="#WSE_FE.WSE_Array.WSE_Array" title="WSE_FE.WSE_Array.WSE_Array"><em>WSE_Array</em></a>) – The source array</p></li>
<li><p><strong>tolerance</strong> (<em>float</em>) – The tolerance to solve the equation set to.</p></li>
<li><p><strong>benchmark_iterations</strong> (<em>int</em><em>, </em><em>optional</em>) – Sets the loop to a for loop with <cite>benchmark_iterations</cite> iterations
if a positive integer is provided and inserts a record_timestamp
method call. The default is None.</p></li>
<li><p><strong>A_C</strong> – (Default value = None)</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p><strong>x</strong> – The resulting array</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p><a class="reference internal" href="#WSE_FE.WSE_Array.WSE_Array" title="WSE_FE.WSE_Array.WSE_Array">WSE_Array</a></p>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt id="WSE_FE.WSE_Solver.Cg">
<em class="property">class </em><code class="sig-prename descclassname">WSE_FE.WSE_Solver.</code><code class="sig-name descname">Cg</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">x_dim</span></em>, <em class="sig-param"><span class="n">y_dim</span></em>, <em class="sig-param"><span class="n">z_dim</span></em>, <em class="sig-param"><span class="n">makeXCopy</span><span class="o">=</span><span class="default_value">True</span></em><span class="sig-paren">)</span><a class="headerlink" href="#WSE_FE.WSE_Solver.Cg" title="Permalink to this definition">¶</a></dt>
<dd><p>Conjugate Gradient Solver</p>
<dl class="py method">
<dt id="WSE_FE.WSE_Solver.Cg.solve">
<code class="sig-name descname">solve</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">x</span></em>, <em class="sig-param"><span class="n">A_E</span></em>, <em class="sig-param"><span class="n">A_W</span></em>, <em class="sig-param"><span class="n">A_N</span></em>, <em class="sig-param"><span class="n">A_S</span></em>, <em class="sig-param"><span class="n">A_T</span></em>, <em class="sig-param"><span class="n">A_B</span></em>, <em class="sig-param"><span class="n">b</span></em>, <em class="sig-param"><span class="n">tolerance</span></em>, <em class="sig-param"><span class="n">A_C</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">max_iterations</span><span class="o">=</span><span class="default_value">20</span></em>, <em class="sig-param"><span class="n">benchmark_iterations</span><span class="o">=</span><span class="default_value">None</span></em><span class="sig-paren">)</span><a class="headerlink" href="#WSE_FE.WSE_Solver.Cg.solve" title="Permalink to this definition">¶</a></dt>
<dd><p>Solves the linear equation Ax=b using the conjugate gradient method.
A and b terms are assumed to be normalized by the diagonal so that
the diagonal is 1 at every row</p>
<p>The matrix is assumed to have 7 non zero components correspondign to
center, east, west, north, top, and bottom</p>
<p>The matrix should be diagonally dominant, symmetric with a positive
diagonal of one and negative off diagonals</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>x</strong> (<a class="reference internal" href="#WSE_FE.WSE_Array.WSE_Array" title="WSE_FE.WSE_Array.WSE_Array"><em>WSE_Array</em></a>) – The initial guess</p></li>
<li><p><strong>A_E</strong> (<a class="reference internal" href="#WSE_FE.WSE_Array.WSE_Array" title="WSE_FE.WSE_Array.WSE_Array"><em>WSE_Array</em></a>) – The east component of the coefficient matrix</p></li>
<li><p><strong>A_W</strong> (<a class="reference internal" href="#WSE_FE.WSE_Array.WSE_Array" title="WSE_FE.WSE_Array.WSE_Array"><em>WSE_Array</em></a>) – The east component of the coefficient matrix</p></li>
<li><p><strong>A_N</strong> (<a class="reference internal" href="#WSE_FE.WSE_Array.WSE_Array" title="WSE_FE.WSE_Array.WSE_Array"><em>WSE_Array</em></a>) – The east component of the coefficient matrix</p></li>
<li><p><strong>A_S</strong> (<a class="reference internal" href="#WSE_FE.WSE_Array.WSE_Array" title="WSE_FE.WSE_Array.WSE_Array"><em>WSE_Array</em></a>) – The east component of the coefficient matrix</p></li>
<li><p><strong>A_T</strong> (<a class="reference internal" href="#WSE_FE.WSE_Array.WSE_Array" title="WSE_FE.WSE_Array.WSE_Array"><em>WSE_Array</em></a>) – The east component of the coefficient matrix</p></li>
<li><p><strong>A_B</strong> (<a class="reference internal" href="#WSE_FE.WSE_Array.WSE_Array" title="WSE_FE.WSE_Array.WSE_Array"><em>WSE_Array</em></a>) – The east component of the coefficient matrix</p></li>
<li><p><strong>b</strong> (<a class="reference internal" href="#WSE_FE.WSE_Array.WSE_Array" title="WSE_FE.WSE_Array.WSE_Array"><em>WSE_Array</em></a>) – The source array</p></li>
<li><p><strong>tolerance</strong> (<em>float</em>) – The tolerance to solve the equation set to</p></li>
<li><p><strong>benchmark_iterations</strong> (<em>int</em><em>, </em><em>optional</em>) – sets the loop to a for loop with <cite>benchmark_iterations</cite> iterations
if a positive integer is provided and inserts a record_timestamp
method call. The default is None.</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p><strong>x</strong> – The resulting array</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p><a class="reference internal" href="#WSE_FE.WSE_Array.WSE_Array" title="WSE_FE.WSE_Array.WSE_Array">WSE_Array</a></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="WSE_FE.WSE_Solver.Cg.solve_list">
<code class="sig-name descname">solve_list</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">x</span></em>, <em class="sig-param"><span class="n">Alist</span></em>, <em class="sig-param"><span class="n">b</span></em>, <em class="sig-param"><span class="n">tolerance</span></em>, <em class="sig-param"><span class="n">max_iterations</span><span class="o">=</span><span class="default_value">20</span></em>, <em class="sig-param"><span class="n">benchmark_iterations</span><span class="o">=</span><span class="default_value">None</span></em><span class="sig-paren">)</span><a class="headerlink" href="#WSE_FE.WSE_Solver.Cg.solve_list" title="Permalink to this definition">¶</a></dt>
<dd><p>Solves the linear equation Ax=b using the conjugate gradient method.
A and b terms are assumed to be normalized by the diagonal so that
the diagonal is 1 at every row</p>
<p>The matrix is assumed to have 27 non zero components</p>
<p>The matrix should be diagonally dominant, symmetric with a positive
diagonal of one and negative off diagonals</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>x</strong> (<a class="reference internal" href="#WSE_FE.WSE_Array.WSE_Array" title="WSE_FE.WSE_Array.WSE_Array"><em>WSE_Array</em></a>) – The initial guess.</p></li>
<li><p><strong>Alist</strong> (<em>list</em>) – list of WSE_Array objects in A_C, A_T, A_B, A_EB, A_WT, A_E, A_W, A_ET, A_WB,
A_NB, A_N, A_NT, A_NWT, A_NW, A_NWB, A_NEB, A_NE, A_NET,
A_ST, A_S, A_SB, A_SEB, A_SE, A_SET, A_SWT, A_SW, A_SWB order
Together these constitute A</p></li>
<li><p><strong>b</strong> (<a class="reference internal" href="#WSE_FE.WSE_Array.WSE_Array" title="WSE_FE.WSE_Array.WSE_Array"><em>WSE_Array</em></a>) – The source array.</p></li>
<li><p><strong>tolerance</strong> (<em>float</em>) – The tolerance to solve the equation set to.</p></li>
<li><p><strong>benchmark_iterations</strong> (<em>int</em><em>, </em><em>optional</em>) – sets the loop to a for loop with <cite>benchmark_iterations</cite> iterations
if a positive integer is provided and inserts a record_timestamp
method call. The default is None.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt id="WSE_FE.WSE_Solver.CgConstantOffDiag">
<em class="property">class </em><code class="sig-prename descclassname">WSE_FE.WSE_Solver.</code><code class="sig-name descname">CgConstantOffDiag</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">x_dim</span></em>, <em class="sig-param"><span class="n">y_dim</span></em>, <em class="sig-param"><span class="n">z_dim</span></em>, <em class="sig-param"><span class="n">makeXCopy</span><span class="o">=</span><span class="default_value">True</span></em><span class="sig-paren">)</span><a class="headerlink" href="#WSE_FE.WSE_Solver.CgConstantOffDiag" title="Permalink to this definition">¶</a></dt>
<dd><p>Conjugate Gradient Off Diagnol Solver</p>
<dl class="py method">
<dt id="WSE_FE.WSE_Solver.CgConstantOffDiag.solve">
<code class="sig-name descname">solve</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">x</span></em>, <em class="sig-param"><span class="n">offdiag</span></em>, <em class="sig-param"><span class="n">b</span></em>, <em class="sig-param"><span class="n">tolerance</span></em>, <em class="sig-param"><span class="n">max_iterations</span><span class="o">=</span><span class="default_value">20</span></em>, <em class="sig-param"><span class="n">benchmark_iterations</span><span class="o">=</span><span class="default_value">None</span></em><span class="sig-paren">)</span><a class="headerlink" href="#WSE_FE.WSE_Solver.CgConstantOffDiag.solve" title="Permalink to this definition">¶</a></dt>
<dd><p>Solves the linear equation Ax=b using the conjugate gradient method.
A and b terms are assumed to be normalized by the diagonal so that
the diagonal is 1 at every row</p>
<p>The matrix is assumed to have 7 non zero components that all share the
value of offdiag (typical of diffusion equations)</p>
<p>The matrix should be diagonally dominant, symmetric with a positive
diagonal of one and negative off diagonals</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>x</strong> (<a class="reference internal" href="#WSE_FE.WSE_Array.WSE_Array" title="WSE_FE.WSE_Array.WSE_Array"><em>WSE_Array</em></a>) – The initial guess</p></li>
<li><p><strong>offdiag</strong> (<em>float</em>) – The shared matrix coefficient for all off diagonals</p></li>
<li><p><strong>b</strong> (<a class="reference internal" href="#WSE_FE.WSE_Array.WSE_Array" title="WSE_FE.WSE_Array.WSE_Array"><em>WSE_Array</em></a>) – The source array</p></li>
<li><p><strong>tolerance</strong> (<em>float</em>) – The tolerance to solve the equation set to</p></li>
<li><p><strong>benchmark_iterations</strong> (<em>int</em><em>, </em><em>optional</em>) – Sets the loop to a for loop with <cite>benchmark_iterations</cite> iterations
if a positive integer is provided and inserts a record_timestamp
method call. The default is None.</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p><strong>x</strong> – The resulting array</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p><a class="reference internal" href="#WSE_FE.WSE_Array.WSE_Array" title="WSE_FE.WSE_Array.WSE_Array">WSE_Array</a></p>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt id="WSE_FE.WSE_Solver.Jacobi">
<em class="property">class </em><code class="sig-prename descclassname">WSE_FE.WSE_Solver.</code><code class="sig-name descname">Jacobi</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">x_dim</span></em>, <em class="sig-param"><span class="n">y_dim</span></em>, <em class="sig-param"><span class="n">z_dim</span></em>, <em class="sig-param"><span class="n">makeXCopy</span><span class="o">=</span><span class="default_value">True</span></em><span class="sig-paren">)</span><a class="headerlink" href="#WSE_FE.WSE_Solver.Jacobi" title="Permalink to this definition">¶</a></dt>
<dd><p>Jacobi Method Solver</p>
<dl class="py method">
<dt id="WSE_FE.WSE_Solver.Jacobi.solve">
<code class="sig-name descname">solve</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">x</span></em>, <em class="sig-param"><span class="n">A_E</span></em>, <em class="sig-param"><span class="n">A_W</span></em>, <em class="sig-param"><span class="n">A_N</span></em>, <em class="sig-param"><span class="n">A_S</span></em>, <em class="sig-param"><span class="n">A_T</span></em>, <em class="sig-param"><span class="n">A_B</span></em>, <em class="sig-param"><span class="n">b</span></em>, <em class="sig-param"><span class="n">tolerance</span></em>, <em class="sig-param"><span class="n">max_iterations</span><span class="o">=</span><span class="default_value">20</span></em>, <em class="sig-param"><span class="n">benchmark_iterations</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">A_negative</span><span class="o">=</span><span class="default_value">False</span></em><span class="sig-paren">)</span><a class="headerlink" href="#WSE_FE.WSE_Solver.Jacobi.solve" title="Permalink to this definition">¶</a></dt>
<dd><p>Solves the linear equation Ax=b using the Jacobi method.
A and b terms are assumed to be normalized by the diagonal so that
the diagonal is 1 at every row</p>
<p>The matrix is assumed to have 7 non zero components correspondign to
center, east, west, north, top, and bottom</p>
<p>The matrix should be diagonally dominant with a positive
diagonal of one and negative off diagonals</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>x</strong> (<a class="reference internal" href="#WSE_FE.WSE_Array.WSE_Array" title="WSE_FE.WSE_Array.WSE_Array"><em>WSE_Array</em></a>) – The initial guess</p></li>
<li><p><strong>A_E</strong> (<a class="reference internal" href="#WSE_FE.WSE_Array.WSE_Array" title="WSE_FE.WSE_Array.WSE_Array"><em>WSE_Array</em></a>) – The east component of the coefficient matrix</p></li>
<li><p><strong>A_W</strong> (<a class="reference internal" href="#WSE_FE.WSE_Array.WSE_Array" title="WSE_FE.WSE_Array.WSE_Array"><em>WSE_Array</em></a>) – The east component of the coefficient matrix</p></li>
<li><p><strong>A_N</strong> (<a class="reference internal" href="#WSE_FE.WSE_Array.WSE_Array" title="WSE_FE.WSE_Array.WSE_Array"><em>WSE_Array</em></a>) – The east component of the coefficient matrix</p></li>
<li><p><strong>A_S</strong> (<a class="reference internal" href="#WSE_FE.WSE_Array.WSE_Array" title="WSE_FE.WSE_Array.WSE_Array"><em>WSE_Array</em></a>) – The east component of the coefficient matrix</p></li>
<li><p><strong>A_T</strong> (<a class="reference internal" href="#WSE_FE.WSE_Array.WSE_Array" title="WSE_FE.WSE_Array.WSE_Array"><em>WSE_Array</em></a>) – The east component of the coefficient matrix</p></li>
<li><p><strong>A_B</strong> (<a class="reference internal" href="#WSE_FE.WSE_Array.WSE_Array" title="WSE_FE.WSE_Array.WSE_Array"><em>WSE_Array</em></a>) – The east component of the coefficient matrix</p></li>
<li><p><strong>b</strong> (<a class="reference internal" href="#WSE_FE.WSE_Array.WSE_Array" title="WSE_FE.WSE_Array.WSE_Array"><em>WSE_Array</em></a>) – The source array</p></li>
<li><p><strong>tolerance</strong> (<em>float</em>) – The tolerance to solve the equation set to</p></li>
<li><p><strong>benchmark_iterations</strong> (<em>int</em><em>, </em><em>optional</em>) – Sets the loop to a for loop with <cite>benchmark_iterations</cite> iterations
if a positive integer is provided and inserts a record_timestamp
method call. The default is None.</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p><strong>x</strong> – The resulting array</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p><a class="reference internal" href="#WSE_FE.WSE_Array.WSE_Array" title="WSE_FE.WSE_Array.WSE_Array">WSE_Array</a></p>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt id="WSE_FE.WSE_Solver.JacobiConstantOffDiag">
<em class="property">class </em><code class="sig-prename descclassname">WSE_FE.WSE_Solver.</code><code class="sig-name descname">JacobiConstantOffDiag</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">x_dim</span></em>, <em class="sig-param"><span class="n">y_dim</span></em>, <em class="sig-param"><span class="n">z_dim</span></em>, <em class="sig-param"><span class="n">makeXCopy</span><span class="o">=</span><span class="default_value">True</span></em><span class="sig-paren">)</span><a class="headerlink" href="#WSE_FE.WSE_Solver.JacobiConstantOffDiag" title="Permalink to this definition">¶</a></dt>
<dd><p>Jacobi Method Off Diagnol Solver</p>
<dl class="py method">
<dt id="WSE_FE.WSE_Solver.JacobiConstantOffDiag.solve">
<code class="sig-name descname">solve</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">x</span></em>, <em class="sig-param"><span class="n">offdiag</span></em>, <em class="sig-param"><span class="n">b</span></em>, <em class="sig-param"><span class="n">tolerance</span></em>, <em class="sig-param"><span class="n">max_iterations</span><span class="o">=</span><span class="default_value">20</span></em>, <em class="sig-param"><span class="n">benchmark_iterations</span><span class="o">=</span><span class="default_value">None</span></em><span class="sig-paren">)</span><a class="headerlink" href="#WSE_FE.WSE_Solver.JacobiConstantOffDiag.solve" title="Permalink to this definition">¶</a></dt>
<dd><p>Solves the linear equation Ax=b using the Jacobi method.
A and b terms are assumed to be normalized by the diagonal so that
the diagonal is 1 at every row</p>
<p>The matrix is assumed to have 7 non zero components that all share the
value of offdiag (typical of diffusion equations)</p>
<p>The matrix should be diagonally dominant with a positive
diagonal of one and negative off diagonals</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>x</strong> (<a class="reference internal" href="#WSE_FE.WSE_Array.WSE_Array" title="WSE_FE.WSE_Array.WSE_Array"><em>WSE_Array</em></a>) – The initial guess</p></li>
<li><p><strong>offdiag</strong> (<em>float</em>) – The shared matrix coefficient for all off diagonals</p></li>
<li><p><strong>b</strong> (<a class="reference internal" href="#WSE_FE.WSE_Array.WSE_Array" title="WSE_FE.WSE_Array.WSE_Array"><em>WSE_Array</em></a>) – The source array</p></li>
<li><p><strong>tolerance</strong> (<em>float</em>) – The tolerance to solve the equation set to</p></li>
<li><p><strong>benchmark_iterations</strong> (<em>int</em><em>, </em><em>optional</em>) – Sets the loop to a for loop with <cite>benchmark_iterations</cite> iterations
if a positive integer is provided and inserts a record_timestamp
method call. The default is None.</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p><strong>x</strong> – The resulting array</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p><a class="reference internal" href="#WSE_FE.WSE_Array.WSE_Array" title="WSE_FE.WSE_Array.WSE_Array">WSE_Array</a></p>
</dd>
</dl>
</dd></dl>

</dd></dl>

</section>
</section>
<section id="wse-loops-module">
<h1>WSE Loops Module<a class="headerlink" href="#wse-loops-module" title="Permalink to this headline">¶</a></h1>
<p>The WSE Loops Module is designed to handle…</p>
<section id="classes-and-methods-4">
<h2>Classes and Methods<a class="headerlink" href="#classes-and-methods-4" title="Permalink to this headline">¶</a></h2>
<dl class="py class">
<dt id="WSE_FE.WSE_Loops.WSE_For_Loop">
<em class="property">class </em><code class="sig-prename descclassname">WSE_FE.WSE_Loops.</code><code class="sig-name descname">WSE_For_Loop</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">name</span></em>, <em class="sig-param"><span class="n">iterations</span></em>, <em class="sig-param"><span class="n">conditional</span><span class="o">=</span><span class="default_value">True</span></em><span class="sig-paren">)</span><a class="headerlink" href="#WSE_FE.WSE_Loops.WSE_For_Loop" title="Permalink to this definition">¶</a></dt>
<dd><p>WSE For Loop</p>
<dl class="py method">
<dt id="WSE_FE.WSE_Loops.WSE_For_Loop.__init__">
<code class="sig-name descname">__init__</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">name</span></em>, <em class="sig-param"><span class="n">iterations</span></em>, <em class="sig-param"><span class="n">conditional</span><span class="o">=</span><span class="default_value">True</span></em><span class="sig-paren">)</span><a class="headerlink" href="#WSE_FE.WSE_Loops.WSE_For_Loop.__init__" title="Permalink to this definition">¶</a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>name</strong> (<em>str:</em>) – A unique name for the loop to reference at the close of
the loop</p></li>
<li><p><strong>iterations</strong> (<em>int</em>) – The number of iterations to execute</p></li>
<li><p><strong>conditional</strong> (<em>boolean</em>) – Enable the loop</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p></p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>None</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="WSE_FE.WSE_Loops.WSE_For_Loop.conditional_exit">
<code class="sig-name descname">conditional_exit</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">tolerance</span></em>, <em class="sig-param"><span class="n">scalar</span></em><span class="sig-paren">)</span><a class="headerlink" href="#WSE_FE.WSE_Loops.WSE_For_Loop.conditional_exit" title="Permalink to this definition">¶</a></dt>
<dd><p>Conditionally exiting runtime context</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>tolerance</strong> (<em>float</em>) – The tolerance to stop iterating</p></li>
<li><p><strong>scalar</strong> (<em>int</em>) – The integer handle to the scalar memory position in the controller
where value is stored to compare to tolerance</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p></p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>None</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="WSE_FE.WSE_Loops.WSE_For_Loop.conditional_pause">
<code class="sig-name descname">conditional_pause</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#WSE_FE.WSE_Loops.WSE_For_Loop.conditional_pause" title="Permalink to this definition">¶</a></dt>
<dd><p>Conditionally pause runtime context</p>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt id="WSE_FE.WSE_Loops.WSE_While_Loop">
<em class="property">class </em><code class="sig-prename descclassname">WSE_FE.WSE_Loops.</code><code class="sig-name descname">WSE_While_Loop</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">name</span></em>, <em class="sig-param"><span class="n">tolerance</span></em>, <em class="sig-param"><span class="n">scalar</span></em>, <em class="sig-param"><span class="n">conditional</span><span class="o">=</span><span class="default_value">True</span></em><span class="sig-paren">)</span><a class="headerlink" href="#WSE_FE.WSE_Loops.WSE_While_Loop" title="Permalink to this definition">¶</a></dt>
<dd><p>WSE While Loop</p>
<dl class="py method">
<dt id="WSE_FE.WSE_Loops.WSE_While_Loop.__init__">
<code class="sig-name descname">__init__</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">name</span></em>, <em class="sig-param"><span class="n">tolerance</span></em>, <em class="sig-param"><span class="n">scalar</span></em>, <em class="sig-param"><span class="n">conditional</span><span class="o">=</span><span class="default_value">True</span></em><span class="sig-paren">)</span><a class="headerlink" href="#WSE_FE.WSE_Loops.WSE_While_Loop.__init__" title="Permalink to this definition">¶</a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>name</strong> (<em>str:</em>) – A unique name for the loop to reference at the close of
the loop</p></li>
<li><p><strong>tolerance</strong> (<em>float</em>) – The tolerance to stop iterating</p></li>
<li><p><strong>scalar</strong> (<em>int</em>) – The integer handle to the scalar memory position in the controller
where value is stored to compare to tolerance</p></li>
<li><p><strong>conditional</strong> (<em>boolean</em>) – Enable the loop</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p></p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>None</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt id="WSE_FE.WSE_Loops.WSE_Solver_While_Loop">
<em class="property">class </em><code class="sig-prename descclassname">WSE_FE.WSE_Loops.</code><code class="sig-name descname">WSE_Solver_While_Loop</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">name</span></em>, <em class="sig-param"><span class="n">tolerance</span></em>, <em class="sig-param"><span class="n">scalar</span></em>, <em class="sig-param"><span class="n">benchmark_iterations</span><span class="o">=</span><span class="default_value">None</span></em><span class="sig-paren">)</span><a class="headerlink" href="#WSE_FE.WSE_Loops.WSE_Solver_While_Loop" title="Permalink to this definition">¶</a></dt>
<dd><p>WSE Solver While Loop</p>
<dl class="py method">
<dt id="WSE_FE.WSE_Loops.WSE_Solver_While_Loop.__init__">
<code class="sig-name descname">__init__</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">name</span></em>, <em class="sig-param"><span class="n">tolerance</span></em>, <em class="sig-param"><span class="n">scalar</span></em>, <em class="sig-param"><span class="n">benchmark_iterations</span><span class="o">=</span><span class="default_value">None</span></em><span class="sig-paren">)</span><a class="headerlink" href="#WSE_FE.WSE_Loops.WSE_Solver_While_Loop.__init__" title="Permalink to this definition">¶</a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>name</strong> (<em>str:</em>) – A unique name for the loop to reference at the close of
the loop</p></li>
<li><p><strong>tolerance</strong> (<em>float</em>) – The tolerance to stop iterating</p></li>
<li><p><strong>scalar</strong> (<em>int</em>) – The integer handle to the scalar memory position in the controller
where value is stored to compare to tolerance</p></li>
<li><p><strong>benchmark_iterations</strong> (<em>int</em>) – The number of iterations to run for benchmarking</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p></p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>None</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

</section>
</section>
<section id="cfd-formation-module">
<h1>CFD Formation Module<a class="headerlink" href="#cfd-formation-module" title="Permalink to this headline">¶</a></h1>
<p>The CFD Formation Module is designed to handle…</p>
<section id="classes-and-methods-5">
<h2>Classes and Methods<a class="headerlink" href="#classes-and-methods-5" title="Permalink to this headline">¶</a></h2>
<dl class="py class">
<dt id="WSE_FE.CFD_Formation._Formation_Base">
<em class="property">class </em><code class="sig-prename descclassname">WSE_FE.CFD_Formation.</code><code class="sig-name descname">_Formation_Base</code><a class="headerlink" href="#WSE_FE.CFD_Formation._Formation_Base" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py class">
<dt id="WSE_FE.CFD_Formation._Sliceable_Constant">
<em class="property">class </em><code class="sig-prename descclassname">WSE_FE.CFD_Formation.</code><code class="sig-name descname">_Sliceable_Constant</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">value</span></em><span class="sig-paren">)</span><a class="headerlink" href="#WSE_FE.CFD_Formation._Sliceable_Constant" title="Permalink to this definition">¶</a></dt>
<dd><dl class="py method">
<dt id="WSE_FE.CFD_Formation._Sliceable_Constant.__init__">
<code class="sig-name descname">__init__</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">value</span></em><span class="sig-paren">)</span><a class="headerlink" href="#WSE_FE.CFD_Formation._Sliceable_Constant.__init__" title="Permalink to this definition">¶</a></dt>
<dd><p>Initialize self.  See help(type(self)) for accurate signature.</p>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt id="WSE_FE.CFD_Formation.FD_Nonlinear_Diffusion">
<em class="property">class </em><code class="sig-prename descclassname">WSE_FE.CFD_Formation.</code><code class="sig-name descname">FD_Nonlinear_Diffusion</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">H</span></em>, <em class="sig-param"><span class="n">Hold</span></em>, <em class="sig-param"><span class="n">dHx</span></em>, <em class="sig-param"><span class="n">dHy</span></em>, <em class="sig-param"><span class="n">dHz</span></em>, <em class="sig-param"><span class="n">max_lxyz</span></em>, <em class="sig-param"><span class="n">Vpdτ</span></em>, <em class="sig-param"><span class="n">Resc</span></em>, <em class="sig-param"><span class="n">dx</span></em>, <em class="sig-param"><span class="n">dy</span></em>, <em class="sig-param"><span class="n">dz</span></em>, <em class="sig-param"><span class="n">dt</span></em>, <em class="sig-param"><span class="n">dims</span></em><span class="sig-paren">)</span><a class="headerlink" href="#WSE_FE.CFD_Formation.FD_Nonlinear_Diffusion" title="Permalink to this definition">¶</a></dt>
<dd><dl class="py method">
<dt id="WSE_FE.CFD_Formation.FD_Nonlinear_Diffusion.__init__">
<code class="sig-name descname">__init__</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">H</span></em>, <em class="sig-param"><span class="n">Hold</span></em>, <em class="sig-param"><span class="n">dHx</span></em>, <em class="sig-param"><span class="n">dHy</span></em>, <em class="sig-param"><span class="n">dHz</span></em>, <em class="sig-param"><span class="n">max_lxyz</span></em>, <em class="sig-param"><span class="n">Vpdτ</span></em>, <em class="sig-param"><span class="n">Resc</span></em>, <em class="sig-param"><span class="n">dx</span></em>, <em class="sig-param"><span class="n">dy</span></em>, <em class="sig-param"><span class="n">dz</span></em>, <em class="sig-param"><span class="n">dt</span></em>, <em class="sig-param"><span class="n">dims</span></em><span class="sig-paren">)</span><a class="headerlink" href="#WSE_FE.CFD_Formation.FD_Nonlinear_Diffusion.__init__" title="Permalink to this definition">¶</a></dt>
<dd><p>Initialize self.  See help(type(self)) for accurate signature.</p>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt id="WSE_FE.CFD_Formation.Scalar_Transport">
<em class="property">class </em><code class="sig-prename descclassname">WSE_FE.CFD_Formation.</code><code class="sig-name descname">Scalar_Transport</code><a class="headerlink" href="#WSE_FE.CFD_Formation.Scalar_Transport" title="Permalink to this definition">¶</a></dt>
<dd><dl class="py method">
<dt id="WSE_FE.CFD_Formation.Scalar_Transport.form">
<code class="sig-name descname">form</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">u</span></em>, <em class="sig-param"><span class="n">v</span></em>, <em class="sig-param"><span class="n">w</span></em>, <em class="sig-param"><span class="n">scalar</span></em>, <em class="sig-param"><span class="n">odx</span></em>, <em class="sig-param"><span class="n">ody</span></em>, <em class="sig-param"><span class="n">odz</span></em>, <em class="sig-param"><span class="n">odt</span></em>, <em class="sig-param"><span class="n">conductivity</span></em>, <em class="sig-param"><span class="n">A_C</span></em>, <em class="sig-param"><span class="n">A_E</span></em>, <em class="sig-param"><span class="n">A_W</span></em>, <em class="sig-param"><span class="n">A_S</span></em>, <em class="sig-param"><span class="n">A_N</span></em>, <em class="sig-param"><span class="n">A_T</span></em>, <em class="sig-param"><span class="n">A_B</span></em>, <em class="sig-param"><span class="n">b</span></em>, <em class="sig-param"><span class="n">convection_discretization</span><span class="o">=</span><span class="default_value">'upwinding'</span></em><span class="sig-paren">)</span><a class="headerlink" href="#WSE_FE.CFD_Formation.Scalar_Transport.form" title="Permalink to this definition">¶</a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>u</strong> (<em>type</em>) – comment</p></li>
<li><p><strong>v</strong> (<em>type</em>) – comment</p></li>
<li><p><strong>w</strong> (<em>type</em>) – comment</p></li>
<li><p><strong>scalar</strong> (<em>type</em>) – comment</p></li>
<li><p><strong>odx</strong> (<em>type</em>) – comment</p></li>
<li><p><strong>ody</strong> (<em>type</em>) – comment</p></li>
<li><p><strong>odz</strong> (<em>type</em>) – comment</p></li>
<li><p><strong>odt</strong> (<em>type</em>) – comment</p></li>
<li><p><strong>conductivity</strong> (<em>type</em>) – comment</p></li>
<li><p><strong>A_C</strong> (<em>type</em>) – comment</p></li>
<li><p><strong>A_E</strong> (<em>type</em>) – comment</p></li>
<li><p><strong>A_W</strong> (<em>type</em>) – comment</p></li>
<li><p><strong>A_S</strong> (<em>type</em>) – comment</p></li>
<li><p><strong>A_N</strong> (<em>type</em>) – comment</p></li>
<li><p><strong>A_T</strong> (<em>type</em>) – comment</p></li>
<li><p><strong>A_B</strong> (<em>type</em>) – comment</p></li>
<li><p><strong>b</strong> (<em>type</em>) – comment</p></li>
<li><p><strong>convection_discretization</strong> – (Default value = ‘upwinding’)</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p><ul class="simple">
<li><p><strong>A_C</strong> (<em>type</em>) – comment</p></li>
<li><p><strong>A_E</strong> (<em>type</em>) – comment</p></li>
<li><p><strong>A_W</strong> (<em>type</em>) – comment</p></li>
<li><p><strong>A_S</strong> (<em>type</em>) – comment</p></li>
<li><p><strong>A_N</strong> (<em>type</em>) – comment</p></li>
<li><p><strong>A_T</strong> (<em>type</em>) – comment</p></li>
<li><p><strong>A_B</strong> (<em>type</em>) – comment</p></li>
<li><p><strong>b</strong> (<em>type</em>) – comment</p></li>
</ul>
</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="WSE_FE.CFD_Formation.Scalar_Transport.form_A">
<code class="sig-name descname">form_A</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">u</span></em>, <em class="sig-param"><span class="n">v</span></em>, <em class="sig-param"><span class="n">w</span></em>, <em class="sig-param"><span class="n">odx</span></em>, <em class="sig-param"><span class="n">ody</span></em>, <em class="sig-param"><span class="n">odz</span></em>, <em class="sig-param"><span class="n">odt</span></em>, <em class="sig-param"><span class="n">conductivity</span></em>, <em class="sig-param"><span class="n">A_C</span></em>, <em class="sig-param"><span class="n">A_E</span></em>, <em class="sig-param"><span class="n">A_W</span></em>, <em class="sig-param"><span class="n">A_S</span></em>, <em class="sig-param"><span class="n">A_N</span></em>, <em class="sig-param"><span class="n">A_T</span></em>, <em class="sig-param"><span class="n">A_B</span></em>, <em class="sig-param"><span class="n">convection_discretization</span><span class="o">=</span><span class="default_value">'upwinding'</span></em><span class="sig-paren">)</span><a class="headerlink" href="#WSE_FE.CFD_Formation.Scalar_Transport.form_A" title="Permalink to this definition">¶</a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>u</strong> (<em>type</em>) – comment</p></li>
<li><p><strong>v</strong> (<em>type</em>) – comment</p></li>
<li><p><strong>w</strong> (<em>type</em>) – comment</p></li>
<li><p><strong>scalar</strong> (<em>type</em>) – comment</p></li>
<li><p><strong>odx</strong> (<em>type</em>) – comment</p></li>
<li><p><strong>ody</strong> (<em>type</em>) – comment</p></li>
<li><p><strong>odz</strong> (<em>type</em>) – comment</p></li>
<li><p><strong>odt</strong> (<em>type</em>) – comment</p></li>
<li><p><strong>conductivity</strong> (<em>type</em>) – comment</p></li>
<li><p><strong>A_C</strong> (<em>type</em>) – comment</p></li>
<li><p><strong>A_E</strong> (<em>type</em>) – comment</p></li>
<li><p><strong>A_W</strong> (<em>type</em>) – comment</p></li>
<li><p><strong>A_S</strong> (<em>type</em>) – comment</p></li>
<li><p><strong>A_N</strong> (<em>type</em>) – comment</p></li>
<li><p><strong>A_T</strong> (<em>type</em>) – comment</p></li>
<li><p><strong>A_B</strong> (<em>type</em>) – comment</p></li>
<li><p><strong>b</strong> (<em>type</em>) – comment</p></li>
<li><p><strong>convection_discretization</strong> – (Default value = ‘upwinding’)</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p><ul class="simple">
<li><p><strong>A_C</strong> (<em>type</em>) – comment</p></li>
<li><p><strong>A_E</strong> (<em>type</em>) – comment</p></li>
<li><p><strong>A_W</strong> (<em>type</em>) – comment</p></li>
<li><p><strong>A_S</strong> (<em>type</em>) – comment</p></li>
<li><p><strong>A_N</strong> (<em>type</em>) – comment</p></li>
<li><p><strong>A_T</strong> (<em>type</em>) – comment</p></li>
<li><p><strong>A_B</strong> (<em>type</em>) – comment</p></li>
</ul>
</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="WSE_FE.CFD_Formation.Scalar_Transport.form_b">
<code class="sig-name descname">form_b</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">scalar</span></em>, <em class="sig-param"><span class="n">odt</span></em>, <em class="sig-param"><span class="n">b</span></em><span class="sig-paren">)</span><a class="headerlink" href="#WSE_FE.CFD_Formation.Scalar_Transport.form_b" title="Permalink to this definition">¶</a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>u</strong> (<em>type</em>) – comment</p></li>
<li><p><strong>v</strong> (<em>type</em>) – comment</p></li>
<li><p><strong>w</strong> (<em>type</em>) – comment</p></li>
<li><p><strong>scalar</strong> (<em>type</em>) – comment</p></li>
<li><p><strong>odx</strong> (<em>type</em>) – comment</p></li>
<li><p><strong>ody</strong> (<em>type</em>) – comment</p></li>
<li><p><strong>odz</strong> (<em>type</em>) – comment</p></li>
<li><p><strong>odt</strong> (<em>type</em>) – comment</p></li>
<li><p><strong>conductivity</strong> (<em>type</em>) – comment</p></li>
<li><p><strong>A_C</strong> (<em>type</em>) – comment</p></li>
<li><p><strong>A_E</strong> (<em>type</em>) – comment</p></li>
<li><p><strong>A_W</strong> (<em>type</em>) – comment</p></li>
<li><p><strong>A_S</strong> (<em>type</em>) – comment</p></li>
<li><p><strong>A_N</strong> (<em>type</em>) – comment</p></li>
<li><p><strong>A_T</strong> (<em>type</em>) – comment</p></li>
<li><p><strong>A_B</strong> (<em>type</em>) – comment</p></li>
<li><p><strong>b</strong> (<em>type</em>) – comment</p></li>
<li><p><strong>convection_discretization</strong> – (Default value = ‘upwinding’)</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p><strong>b</strong> – comment</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>type</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt id="WSE_FE.CFD_Formation.Momentum_Colocated">
<em class="property">class </em><code class="sig-prename descclassname">WSE_FE.CFD_Formation.</code><code class="sig-name descname">Momentum_Colocated</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">u_center</span></em>, <em class="sig-param"><span class="n">v_center</span></em>, <em class="sig-param"><span class="n">w_center</span></em>, <em class="sig-param"><span class="n">press</span></em>, <em class="sig-param"><span class="n">mu</span><span class="o">=</span><span class="default_value">0.1</span></em>, <em class="sig-param"><span class="n">rho</span><span class="o">=</span><span class="default_value">1.0</span></em>, <em class="sig-param"><span class="n">dx</span><span class="o">=</span><span class="default_value">0.001</span></em>, <em class="sig-param"><span class="n">dy</span><span class="o">=</span><span class="default_value">0.001</span></em>, <em class="sig-param"><span class="n">dz</span><span class="o">=</span><span class="default_value">0.001</span></em><span class="sig-paren">)</span><a class="headerlink" href="#WSE_FE.CFD_Formation.Momentum_Colocated" title="Permalink to this definition">¶</a></dt>
<dd><dl class="py method">
<dt id="WSE_FE.CFD_Formation.Momentum_Colocated.__init__">
<code class="sig-name descname">__init__</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">u_center</span></em>, <em class="sig-param"><span class="n">v_center</span></em>, <em class="sig-param"><span class="n">w_center</span></em>, <em class="sig-param"><span class="n">press</span></em>, <em class="sig-param"><span class="n">mu</span><span class="o">=</span><span class="default_value">0.1</span></em>, <em class="sig-param"><span class="n">rho</span><span class="o">=</span><span class="default_value">1.0</span></em>, <em class="sig-param"><span class="n">dx</span><span class="o">=</span><span class="default_value">0.001</span></em>, <em class="sig-param"><span class="n">dy</span><span class="o">=</span><span class="default_value">0.001</span></em>, <em class="sig-param"><span class="n">dz</span><span class="o">=</span><span class="default_value">0.001</span></em><span class="sig-paren">)</span><a class="headerlink" href="#WSE_FE.CFD_Formation.Momentum_Colocated.__init__" title="Permalink to this definition">¶</a></dt>
<dd><p>Initialize self.  See help(type(self)) for accurate signature.</p>
</dd></dl>

<dl class="py method">
<dt id="WSE_FE.CFD_Formation.Momentum_Colocated.form_Ab">
<code class="sig-name descname">form_Ab</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">cell_type</span></em>, <em class="sig-param"><span class="n">dt</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">scheme</span><span class="o">=</span><span class="default_value">'UDS'</span></em>, <em class="sig-param"><span class="n">invert_A_C</span><span class="o">=</span><span class="default_value">False</span></em>, <em class="sig-param"><span class="n">diagonal_precondition</span><span class="o">=</span><span class="default_value">False</span></em>, <em class="sig-param"><span class="n">debug_active</span><span class="o">=</span><span class="default_value">False</span></em><span class="sig-paren">)</span><a class="headerlink" href="#WSE_FE.CFD_Formation.Momentum_Colocated.form_Ab" title="Permalink to this definition">¶</a></dt>
<dd><dl class="simple">
<dt>Coordiante Directions:</dt><dd><p>East is in x+1   (index 1)
West is in x-1   (index 1)
North is in y+1  (index 2)
South is in y-1  (index 2)
Top is in z+1    (index 0, memory slicing)
Bottom is in z-1 (index 0, memory slicing)</p>
</dd>
<dt>Face Value Conventions:</dt><dd><p>cells centers contain the East, North, and Top values of faces</p>
</dd>
</dl>
<p>dx, dz, and dy are distances between cell centers</p>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt id="WSE_FE.CFD_Formation.Press_Colocated">
<em class="property">class </em><code class="sig-prename descclassname">WSE_FE.CFD_Formation.</code><code class="sig-name descname">Press_Colocated</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">u_center</span></em>, <em class="sig-param"><span class="n">v_center</span></em>, <em class="sig-param"><span class="n">w_center</span></em>, <em class="sig-param"><span class="n">press</span></em>, <em class="sig-param"><span class="n">mu</span><span class="o">=</span><span class="default_value">0.1</span></em>, <em class="sig-param"><span class="n">rho</span><span class="o">=</span><span class="default_value">1.0</span></em>, <em class="sig-param"><span class="n">dx</span><span class="o">=</span><span class="default_value">0.001</span></em>, <em class="sig-param"><span class="n">dy</span><span class="o">=</span><span class="default_value">0.001</span></em>, <em class="sig-param"><span class="n">dz</span><span class="o">=</span><span class="default_value">0.001</span></em><span class="sig-paren">)</span><a class="headerlink" href="#WSE_FE.CFD_Formation.Press_Colocated" title="Permalink to this definition">¶</a></dt>
<dd><dl class="py method">
<dt id="WSE_FE.CFD_Formation.Press_Colocated.__init__">
<code class="sig-name descname">__init__</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">u_center</span></em>, <em class="sig-param"><span class="n">v_center</span></em>, <em class="sig-param"><span class="n">w_center</span></em>, <em class="sig-param"><span class="n">press</span></em>, <em class="sig-param"><span class="n">mu</span><span class="o">=</span><span class="default_value">0.1</span></em>, <em class="sig-param"><span class="n">rho</span><span class="o">=</span><span class="default_value">1.0</span></em>, <em class="sig-param"><span class="n">dx</span><span class="o">=</span><span class="default_value">0.001</span></em>, <em class="sig-param"><span class="n">dy</span><span class="o">=</span><span class="default_value">0.001</span></em>, <em class="sig-param"><span class="n">dz</span><span class="o">=</span><span class="default_value">0.001</span></em><span class="sig-paren">)</span><a class="headerlink" href="#WSE_FE.CFD_Formation.Press_Colocated.__init__" title="Permalink to this definition">¶</a></dt>
<dd><p>Initialize self.  See help(type(self)) for accurate signature.</p>
</dd></dl>

</dd></dl>

</section>
</section>
<section id="fd-navier-stokes-module">
<h1>FD Navier Stokes Module<a class="headerlink" href="#fd-navier-stokes-module" title="Permalink to this headline">¶</a></h1>
<p>The FD Navier Stokes Module is designed to handle…</p>
<section id="classes-and-methods-6">
<h2>Classes and Methods<a class="headerlink" href="#classes-and-methods-6" title="Permalink to this headline">¶</a></h2>
<dl class="py class">
<dt id="WSE_FE.FD_Navier_Stokes.FD_Stokes">
<em class="property">class </em><code class="sig-prename descclassname">WSE_FE.FD_Navier_Stokes.</code><code class="sig-name descname">FD_Stokes</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">dx</span></em>, <em class="sig-param"><span class="n">dy</span></em>, <em class="sig-param"><span class="n">dz</span></em>, <em class="sig-param"><span class="n">eta0</span></em>, <em class="sig-param"><span class="n">DcT</span></em>, <em class="sig-param"><span class="n">deta_dT</span></em>, <em class="sig-param"><span class="n">alpha0</span></em>, <em class="sig-param"><span class="n">rho</span></em>, <em class="sig-param"><span class="n">deltaT</span></em>, <em class="sig-param"><span class="n">dt_diff</span></em>, <em class="sig-param"><span class="n">dtau_iter</span></em>, <em class="sig-param"><span class="n">beta</span></em>, <em class="sig-param"><span class="n">dampX</span></em>, <em class="sig-param"><span class="n">dampY</span></em>, <em class="sig-param"><span class="n">dampZ</span></em>, <em class="sig-param"><span class="n">ccode</span></em>, <em class="sig-param"><span class="n">T</span></em>, <em class="sig-param"><span class="n">T_old</span></em>, <em class="sig-param"><span class="n">Vx</span></em>, <em class="sig-param"><span class="n">Vy</span></em>, <em class="sig-param"><span class="n">Vz</span></em>, <em class="sig-param"><span class="n">P</span></em>, <em class="sig-param"><span class="n">dVxdtau_init</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">dVydtau_init</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">dVzdtau_init</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">check_R</span><span class="o">=</span><span class="default_value">False</span></em>, <em class="sig-param"><span class="n">check_dQ</span><span class="o">=</span><span class="default_value">False</span></em>, <em class="sig-param"><span class="n">check_dT_dt</span><span class="o">=</span><span class="default_value">False</span></em>, <em class="sig-param"><span class="n">check_abs_V</span><span class="o">=</span><span class="default_value">False</span></em>, <em class="sig-param"><span class="n">benchmark_fluid_solver</span><span class="o">=</span><span class="default_value">False</span></em><span class="sig-paren">)</span><a class="headerlink" href="#WSE_FE.FD_Navier_Stokes.FD_Stokes" title="Permalink to this definition">¶</a></dt>
<dd><p>Navier Stokes</p>
<dl class="py method">
<dt id="WSE_FE.FD_Navier_Stokes.FD_Stokes.__init__">
<code class="sig-name descname">__init__</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">dx</span></em>, <em class="sig-param"><span class="n">dy</span></em>, <em class="sig-param"><span class="n">dz</span></em>, <em class="sig-param"><span class="n">eta0</span></em>, <em class="sig-param"><span class="n">DcT</span></em>, <em class="sig-param"><span class="n">deta_dT</span></em>, <em class="sig-param"><span class="n">alpha0</span></em>, <em class="sig-param"><span class="n">rho</span></em>, <em class="sig-param"><span class="n">deltaT</span></em>, <em class="sig-param"><span class="n">dt_diff</span></em>, <em class="sig-param"><span class="n">dtau_iter</span></em>, <em class="sig-param"><span class="n">beta</span></em>, <em class="sig-param"><span class="n">dampX</span></em>, <em class="sig-param"><span class="n">dampY</span></em>, <em class="sig-param"><span class="n">dampZ</span></em>, <em class="sig-param"><span class="n">ccode</span></em>, <em class="sig-param"><span class="n">T</span></em>, <em class="sig-param"><span class="n">T_old</span></em>, <em class="sig-param"><span class="n">Vx</span></em>, <em class="sig-param"><span class="n">Vy</span></em>, <em class="sig-param"><span class="n">Vz</span></em>, <em class="sig-param"><span class="n">P</span></em>, <em class="sig-param"><span class="n">dVxdtau_init</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">dVydtau_init</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">dVzdtau_init</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">check_R</span><span class="o">=</span><span class="default_value">False</span></em>, <em class="sig-param"><span class="n">check_dQ</span><span class="o">=</span><span class="default_value">False</span></em>, <em class="sig-param"><span class="n">check_dT_dt</span><span class="o">=</span><span class="default_value">False</span></em>, <em class="sig-param"><span class="n">check_abs_V</span><span class="o">=</span><span class="default_value">False</span></em>, <em class="sig-param"><span class="n">benchmark_fluid_solver</span><span class="o">=</span><span class="default_value">False</span></em><span class="sig-paren">)</span><a class="headerlink" href="#WSE_FE.FD_Navier_Stokes.FD_Stokes.__init__" title="Permalink to this definition">¶</a></dt>
<dd><p>Initialize self.  See help(type(self)) for accurate signature.</p>
</dd></dl>

</dd></dl>

</section>
</section>
<section id="coding-style-guidelines">
<h1>Coding Style Guidelines<a class="headerlink" href="#coding-style-guidelines" title="Permalink to this headline">¶</a></h1>
<section id="python">
<h2>Python<a class="headerlink" href="#python" title="Permalink to this headline">¶</a></h2>
<p>NETL strictly adheres to the PEP8 coding standard with a modified maximum line length of 120 characters.  Code will not
be accepted unless it meets these standards.  This is not onerous especially since modern IDEs like Spyder have code
style warning/guide systems built in.  It is suggested that users install the custom Spyder version above and make
use of the “Show code style warnings” option in the Source menu.  To adjust the line length go to Tools, preferences,
Completion and linting, Code style and formatting, and then set the “Maximum allowed line length” to 120.</p>
</section>
<section id="wse-files">
<h2>WSE files<a class="headerlink" href="#wse-files" title="Permalink to this headline">¶</a></h2>
<p>no coding standard has been adopted yet, but will be coming.</p>
</section>
<section id="python-docstrings">
<h2>Python Docstrings<a class="headerlink" href="#python-docstrings" title="Permalink to this headline">¶</a></h2>
<p>Please follow the Numpy docstring format.  In spyder, a template can be autogenerated using Ctrl+Alt+D right after
the method/class definition.</p>
</section>
</section>


           </div>
           
          </div>
          <footer>
  

  <hr/>

  <div role="contentinfo">
    <p>
        
        &copy; Copyright 

    </p>
  </div>
    
    
    
    Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a
    
    <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a>
    
    provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>